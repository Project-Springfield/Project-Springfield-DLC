<ScriptPackage>
	<PrizeListButtonPressed runQueueState="RunInAnyState">
		<Action type="checkExpression" expression="THOH2017_EventHubTabValue">
			<ExpressionCase value="0">
				<Action type="runScript" script="THOH2017_Scripts:Tab_PrizeTrack" />
			</ExpressionCase>
			<ExpressionCase value="1">
				<Action type="runScript" script="THOH2017_Scripts:Tab_BeastTamer" />
			</ExpressionCase>
			<ExpressionCase value="2">
				<Action type="runScript" script="THOH2017_Scripts:Tab_Crafting" />
			</ExpressionCase>
			<ExpressionCase value="3">
				<Action type="runScript" script="THOH2017_Scripts:Tab_BossFight" />
			</ExpressionCase>
			<ExpressionCase value="4">
				<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureKearneymonWithLisa" />
			</ExpressionCase>
		</Action>
	</PrizeListButtonPressed>
	<Tab_Crafting>
		<Action type="if">
			<If expression="THOH2017_CraftingGuideSeen">
				<Then>
					<Action type="updateVariable" variable="THOH2017_EventHubTabValue" value="2" />
					<Action type="gotoState" state="GameState_HubCraftingMenu" forceState="false">
						<Extras>
							<Attribute name="MenuConfig" value="THOH2017_CraftingConfig:CraftingMenu" />
							<Attribute name="ExitButtonScript" value="MiscScripts:GoToInGame" />
							<Attribute name="onLoadScript" value="THOH2017_Scripts_Crafting:UpdateCrafting" />
							<Attribute name="specialEvent" value="THOH2017_Event" />
						</Extras>
					</Action>
					<Action type="markBadgeViewed" badgeName="THOH2017_CraftingBadge" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="actionSequence" script="THOH2017_Scripts:GuidePanel_Crafting" />
					<Action type="updateVariable" variable="THOH2017_CraftingGuideSeen" value="1" />
				</Then>
			</Else>
		</Action>
	</Tab_Crafting>
	<Tab_Crafting_ScrollTo>
		<Action type="updateVariable" variable="THOH2017_EventHubTabValue" value="2" />
		<Action type="gotoState" state="GameState_HubCraftingMenu" forceState="false" formatMe="deep">
			<Extras>
				<Attribute name="MenuConfig" value="THOH2017_CraftingConfig:CraftingMenu" />
				<Attribute name="ExitButtonScript" value="MiscScripts:GoToInGame" />
				<Attribute name="onLoadScript" value="THOH2017_Scripts_Crafting:UpdateCrafting" />
				<Attribute name="specialEvent" value="THOH2017_Event" />
				<Attribute name="ItemToScrollTo" value="{ItemToScrollTo}" />
			</Extras>
		</Action>
		<Action type="markBadgeViewed" badgeName="THOH2017_CraftingBadge" />
	</Tab_Crafting_ScrollTo>
	<Tab_PrizeTrack>
		<Action type="if">
			<If expression="THOH2017_EventGuideSeen">
				<Then>
					<Action type="updateVariable" variable="THOH2017_EventHubTabValue" value="0" />
					<Action type="gotoState" state="GameState_HubPrizeTrack" forceState="true">
						<Extras>
							<Attribute name="helpButtonScript" value="THOH2017_Scripts:GuidePanel_Event" />
							<Attribute name="specialEvent" value="THOH2017_Event" />
							<Attribute name="exitButtonScript" value="MiscScripts:GoToInGame" />
						</Extras>
					</Action>
					<Action type="markBadgeViewed" badgeName="THOH2017_PrizeTrackBadge" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="actionSequence" script="THOH2017_Scripts:GuidePanel_Event" />
				</Then>
			</Else>
		</Action>
	</Tab_PrizeTrack>
	<ActOnePrizeTrackTab ignoreHUD="true">
		<Action type="notification" title="UI_THOH2017_title" button="UI_OK" text="UI_Superheroes2_PrizeTrack_Future_text" tooltip="UI_Superheroes2_PrizeTrack_Future_toolTip" icon="ICO_Priz_THOH2017_CrawlBarTroll_LG" darken="true" />
	</ActOnePrizeTrackTab>
	<ActTwoPrizeTrackTab ignoreHUD="true">
		<Action type="notification" title="UI_THOH2017_title" button="UI_OK" text="UI_Superheroes2_PrizeTrack_Future_text" tooltip="UI_Superheroes2_PrizeTrack_Future_toolTip" icon="ICO_Priz_THOH2017_BarfyBarTroll_LG" darken="true" />
	</ActTwoPrizeTrackTab>
	<FriendsHUDInfo>
		<Action type="triggerevent" name="ScriptEvent" data="THOH2017_UpdateFriendActionHelpVariables" />
		<Action type="runScript" script="THOH2017_Scripts:FriendsHUDInfoAux" />
	</FriendsHUDInfo>
	<FriendsHUDInfoAux>
		<Action type="checkRequirements">
			<Requirement type="reqList" location="THOH2017_Requirements:ActOne" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="variable" variable="FriendActionsCount" count="30" not="true" />
					<True>
						<Action type="checkRequirements">
							<Requirement type="variable" variable="THOH2017_SocialUpgrade_Purchased" />
							<True>
								<Action type="notification" title="RES_THOH2017_PT1_Plural" button="UI_OK" text="GEN_ResourceListing_THOH2017_PT1_Upgrade" icon="ICO_CUR_THOH2017_WandCurrency_LG">
									<Variable name="THOH2017_PT1_FOR_NEXT_FRIEND_ACTION" type="int" />
									<Variable name="THOH2017_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
								</Action>
							</True>
							<False>
								<Action type="notification" title="RES_THOH2017_PT1_Plural" button="UI_OK" text="GEN_ResourceListing_THOH2017_PT1" icon="ICO_CUR_THOH2017_WandCurrency_LG">
									<Variable name="THOH2017_PT1_FOR_NEXT_FRIEND_ACTION" type="int" />
									<Variable name="THOH2017_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
								</Action>
							</False>
						</Action>
					</True>
					<False>
						<Action type="notification" title="RES_THOH2017_PT1_Plural" button="UI_OK" text="UI_THOH2017_OutOfFriendActions_PT1" icon="ICO_CUR_THOH2017_WandCurrency_LG"></Action>
					</False>
				</Action>
			</True>
		</Action>
		<Action type="checkRequirements">
			<Requirement type="reqList" location="THOH2017_Requirements:ActTwo" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="variable" variable="FriendActionsCount" count="30" not="true" />
					<True>
						<Action type="checkRequirements">
							<Requirement type="variable" variable="THOH2017_SocialUpgrade_Purchased" />
							<True>
								<Action type="notification" title="RES_THOH2017_PT2_Plural" button="UI_OK" text="GEN_ResourceListing_THOH2017_PT2_Upgrade" icon="ICO_CUR_THOH2017_FairyDustCurrency_LG">
									<Variable name="THOH2017_PT2_FOR_NEXT_FRIEND_ACTION" type="int" />
									<Variable name="THOH2017_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
								</Action>
							</True>
							<False>
								<Action type="notification" title="RES_THOH2017_PT2_Plural" button="UI_OK" text="GEN_ResourceListing_THOH2017_PT2" icon="ICO_CUR_THOH2017_FairyDustCurrency_LG">
									<Variable name="THOH2017_PT2_FOR_NEXT_FRIEND_ACTION" type="int" />
									<Variable name="THOH2017_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
								</Action>
							</False>
						</Action>
					</True>
					<False>
						<Action type="notification" title="RES_THOH2017_PT2_Plural" button="UI_OK" text="UI_THOH2017_OutOfFriendActions_PT2" icon="ICO_CUR_THOH2017_FairyDustCurrency_LG"></Action>
					</False>
				</Action>
			</True>
		</Action>
		<Action type="checkRequirements">
			<Requirement type="reqList" location="THOH2017_Requirements:ActThree" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="variable" variable="FriendActionsCount" count="30" not="true" />
					<True>
						<Action type="checkRequirements">
							<Requirement type="variable" variable="THOH2017_SocialUpgrade_Purchased" />
							<True>
								<Action type="notification" title="RES_THOH2017_PT3_Plural" button="UI_OK" text="GEN_ResourceListing_THOH2017_PT3_Upgrade" icon="ICO_CUR_THOH2017_ToadPrinceCurrency_LG">
									<Variable name="THOH2017_PT3_FOR_NEXT_FRIEND_ACTION" type="int" />
									<Variable name="THOH2017_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
								</Action>
							</True>
							<False>
								<Action type="notification" title="RES_THOH2017_PT3_Plural" button="UI_OK" text="GEN_ResourceListing_THOH2017_PT3" icon="ICO_CUR_THOH2017_ToadPrinceCurrency_LG">
									<Variable name="THOH2017_PT3_FOR_NEXT_FRIEND_ACTION" type="int" />
									<Variable name="THOH2017_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
								</Action>
							</False>
						</Action>
					</True>
					<False>
						<Action type="notification" title="RES_THOH2017_PT3_Plural" button="UI_OK" text="UI_THOH2017_OutOfFriendActions_PT3" icon="ICO_CUR_THOH2017_ToadPrinceCurrency_LG"></Action>
					</False>
				</Action>
			</True>
		</Action>
	</FriendsHUDInfoAux>
	<GoTo_TappablesOrMagicTower ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="building" building="MagicTower" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="formula" formula="System::evaluate('Minigame::MagicTower::Ready') == 0" />
					<True>
						<Action type="actionSequence" script="THOH2017_Scripts:GoTo_Tappables" />
					</True>
					<False>
						<Action type="if">
							<If expression="#program;                                 if(User::getVariable('BankedFantasticalPests') &gt; 0)                                 {                                     return false;                                 }                                 else                                 {                                     var character = Character::find('FantasticalPest');                                     var characterInstanceList = Land::getAllInstancesOfObject(character);                                     foreach(characterInstanceList as instance)                                     {                                         if(!Object::getDelete(instance))                                         {                                             return false;                                         }                                     }                                 }                                 return true;">
								<Then>
									<Action type="hudTip" text="UI_THOH2017_MT_AllTappablesCleared" time="10s" requiresActiveHUD="false" />
								</Then>
							</If>
							<Else>
								<Then>
									<Action type="pantoobject" building="MagicTower" fakeTouch="true" />
								</Then>
							</Else>
						</Action>
					</False>
				</Action>
			</True>
			<False>
				<Action type="actionSequence" script="THOH2017_Scripts:GoTo_Tappables" />
			</False>
		</Action>
	</GoTo_TappablesOrMagicTower>
	<GetMoreCraftingCurrency>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="if">
					<If expression="#program;                         if(User::getVariable('BankedFantasticalPests') &gt; 0)                         {                         return false;                         }                         else                         {                         var character = Character::find('FantasticalPest');                         var characterInstanceList = Land::getAllInstancesOfObject(character);                         foreach(characterInstanceList as instance)                         {                         if(!Object::getDelete(instance))                         {                         return false;                         }                         }                         }                         return true;">
						<Then>
							<Action type="hudTip" text="UI_THOH2017_MT_NoTappables" time="10s" requiresActiveHUD="false" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="pantoobject" time="0" character="FantasticalPest" flagsToAvoid="delete" />
						</Then>
					</Else>
				</Action>
			</True>
		</Action>
	</GetMoreCraftingCurrency>
	<GoTo_Tappables ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="if">
					<If expression="#program;                         if(User::getVariable('BankedFantasticalPests') &gt; 0)                         {                         return false;                         }                         else                         {                         var character = Character::find('FantasticalPest');                         var characterInstanceList = Land::getAllInstancesOfObject(character);                         foreach(characterInstanceList as instance)                         {                         if(!Object::getDelete(instance))                         {                         return false;                         }                         }                         }                         return true;">
						<Then>
							<Action type="hudTip" text="UI_THOH2017_MT_AllTappablesCleared" time="10s" requiresActiveHUD="false" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="pantoobject" time="0" character="FantasticalPest" flagsToAvoid="delete" />
						</Then>
					</Else>
				</Action>
			</True>
		</Action>
	</GoTo_Tappables>
	<GoTo_Tappables_BeastTamerMenu ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="if">
					<If expression="#program;                         if(User::getVariable('BankedFantasticalPests') &gt; 0)                         {                         return false;                         }                         else                         {                         var character = Character::find('FantasticalPest');                         var characterInstanceList = Land::getAllInstancesOfObject(character);                         foreach(characterInstanceList as instance)                         {                         if(!Object::getDelete(instance))                         {                         return false;                         }                         }                         }                         return true;">
						<Then>
							<Action type="runScript" script="THOH2017_Scripts:Tab_BeastTamer" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="pantoobject" time="0" character="FantasticalPest" flagsToAvoid="delete" />
						</Then>
					</Else>
				</Action>
			</True>
		</Action>
	</GoTo_Tappables_BeastTamerMenu>
	<RecommendStoreCategory ignoreHUD="true">
		<Action type="clearRecommendations" category="Event" name="THOH2017_ThreePanel" />
		<Action type="recommendation" recType="Event" name="THOH2017_ThreePanel" eventName="UI_THOH2017_Title" />
	</RecommendStoreCategory>
	<RecommendStoreOnePanel ignoreHUD="true">
		<Action type="clearRecommendations" category="Event" name="THOH2017_ThreePanel" />
		<Action type="clearRecommendations" category="Event" name="THOH2017_OnePanel" />
		<Action type="recommendation" recType="Event" name="THOH2017_OnePanel" eventName="UI_THOH2017_Title" limitedTime="true" limitedTimeEndDate="THOH2017_EndDate" />
	</RecommendStoreOnePanel>
	<EnterStoreCategory ignoreHUD="true">
		<Action type="focusOnMenuItem" menuCategory="THOH2017" />
	</EnterStoreCategory>
	<Decoration_Tapped parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="ActiveNoLoop" />
	</Decoration_Tapped>
	<BeastCrib_Tapped parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="Tap" />
	</BeastCrib_Tapped>
	<SpawnFullHudTip>
		<Action type="hudTip" text="UI_THOH2017_TownFull" time="3s" queue="true" waitForHUD="true" />
	</SpawnFullHudTip>
	<TappableTapped parallel="true" cache="true">
		<Action type="runScriptOnAll" character="FantasticalPest" in_radius="5" radius_delay="0.3" script="THOH2017_Scripts:Tappable_Tapped_Single" />
		<Action type="actionSequence" script="THOH2017_Scripts:Tappable_Tapped_Single" />
	</TappableTapped>
	<Tappable_Tapped_Single parallel="true" cache="true">
		<Action type="if">
			<If expression="bitwiseAnd([Object::ObjectFlags], 1) == 0" asObjectExpression="true">
				<Then>
					<Action type="setObjectVariable" variable="TAPPED" value="1" allowOrphan="false" asExpression="true" />
					<Action type="actionSequence" script="THOH2017_Scripts:Tappable_Reward" />
					<Action type="setObjectFlag" flags="delete" />
					<Action type="runScript" script="THOH2017_Scripts:Tappable_AnimateAndDie_Single" />
				</Then>
			</If>
		</Action>
	</Tappable_Tapped_Single>
	<Tappable_AnimateAndDie parallel="true" cache="true">
		<Action type="sound" sound="MysticalPest_Tap" />
		<Action type="anim-play" character="FantasticalPest" animation="Tap" />
		<Action type="anim-waitforend" />
		<Action type="fade" fade="outmax" />
		<Action type="deletecharacter" character="FantasticalPest" />
		<Action type="checkRequirements" ignoreObject="false">
			<Requirements>
				<Requirement type="active quest" quest="THOH2017_DCS_ClearMysticalPests" />
			</Requirements>
			<True>
				<Action type="setVariable" intVariable="THOH2017_DCS_MysticalPests" intValue="THOH2017_DCS_MysticalPests+1" />
			</True>
		</Action>
	</Tappable_AnimateAndDie>
	<Tappable_AnimateAndDie_Single parallel="true" cache="true">
		<Action type="sound" sound="MysticalPest_Tap" />
		<Action type="anim-play" character="FantasticalPest" animation="Tap" />
		<Action type="anim-waitforend" />
		<Action type="fade" fade="outmax" />
		<Action type="deletecharacter" character="FantasticalPest" />
		<Action type="checkRequirements" ignoreObject="false">
			<Requirements>
				<Requirement type="active quest" quest="THOH2017_DCS_ClearMysticalPests" />
			</Requirements>
			<True>
				<Action type="setVariable" intVariable="THOH2017_DCS_MysticalPests" intValue="THOH2017_DCS_MysticalPests+1" />
			</True>
		</Action>
		<Action type="if">
			<If expression="#program;                 if(User::getVariable('BankedFantasticalPests') &gt; 0)                 {                     return false;                 }                 else                 {                     var character = Character::find('FantasticalPest');                     var characterInstanceList = Land::getAllInstancesOfObject(character);                     foreach(characterInstanceList as instance)                     {                         if(!Object::getDelete(instance))                         {                             return false;                         }                     }                 }                 return true;">
				<Then>
					<Action type="hudTip" text="UI_THOH2017_MT_AllTappablesCleared" time="10s" requiresActiveHUD="false" />
				</Then>
			</If>
		</Action>
	</Tappable_AnimateAndDie_Single>
	<Tappable_Reward parallel="true" cache="true">
		<Action type="reward" save="true" THOH2017_ActivePrizeTrackCurrency="__THOH2017_Config:Tappables:Award_PTCurrency__" chance="__THOH2017_Config:Tappables:DropChance_PTCurrency__" chanceType="s" suppress_sound="true" />
		<Action type="reward" save="true" THOH2017_CraftingCurrency="__THOH2017_GameConfig:TappableCraftReward:Amount__" chance="__THOH2017_Config:Tappables:DropChance_Craft1__" chanceType="s" suppress_sound="true" />
		<Action type="setVariable" intVariable="FantasticalPests_Tapped" intValue="FantasticalPests_Tapped+1" />
	</Tappable_Reward>
	<SpawnFriendTappables>
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="friendlevel" level="15" />
				</Requirements>
				<Then>
					<Action type="createobject" name="FantasticalPest" count="40" save="true" panCamera="false" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="friendlevel" level="10" />
				</Requirements>
				<Then>
					<Action type="createobject" name="FantasticalPest" count="30" save="true" panCamera="false" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="friendlevel" level="5" />
				</Requirements>
				<Then>
					<Action type="createobject" name="FantasticalPest" count="20" save="true" panCamera="false" />
				</Then>
			</ElseIf>
		</Action>
	</SpawnFriendTappables>
	<TappableTapped_Friend>
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="friendactioncount" amount="3" special="false" not="true" />
			</Requirements>
			<True>
				<Action type="friendActionPerformed" />
				<Action type="reward" save="true" THOH2017_ActivePrizeTrackCurrency="selector THOH2017_PTCurrencyPerFriendAction" chance="__THOH2017_Config:Tappables:DropChance_PTCurrency__" chanceType="s" suppress_sound="true" />
				<Action type="reward" save="true" THOH2017_CraftingCurrency="selector THOH2017_CraftingCurrencyPerFriendAction" chance="__THOH2017_Config:Tappables:DropChance_Craft1__" chanceType="s" suppress_sound="true" />
				<Action type="reward" save="true" money="selector socialMoneyReward" xp="1" FriendPoint="selector friendPointsReward" donuts="1" chance="selector socialDonutChanceReward" chanceType="d" suppress_sound="true" />
				<Action type="sound" sound="Gambler_Tap" />
				<Action type="stop" />
				<Action type="anim-play" character="FantasticalPest" animation="Tap" />
				<Action type="anim-waitforend" />
				<Action type="fade" fade="outmax" />
				<Action type="deletecharacter" character="FantasticalPest" />
				<Action type="setVariable" intVariable="FantasticalPests_Tapped_Friend" intValue="FantasticalPests_Tapped_Friend+1" />
				<Action type="checkRequirements" ignoreObject="false">
					<Requirements>
						<Requirement type="active quest" quest="THOH2017_DCS_TapMysticalPestsInFriendsTowns" />
					</Requirements>
					<True>
						<Action type="setVariable" intVariable="THOH2017_DCS_MysticalPests_Friends" intValue="THOH2017_DCS_MysticalPests_Friends+1" />
					</True>
				</Action>
			</True>
		</Action>
	</TappableTapped_Friend>
	<LicensePurchased>
		<Action type="setVariable" boolVariable="THOH2017_SocialUpgrade_Purchased" boolValue="true" />
		<Action type="notification" icon="ICO_STOR_THOH2017_License_Popup" title="CON_THOH2017_License1_name" text="CON_THOH2017_License1_desc" button="UI_OK" />
	</LicensePurchased>
	<CaptureKearneymonJobStart>
		<Action type="setVariable" intVariable="KearneymonAttackers" intValue="KearneymonAttackers+1" />
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="NextKearneymonCaptureOffset == 0" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="-3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextKearneymonCaptureOffset" intValue="NextKearneymonCaptureOffset+1" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextKearneymonCaptureOffset == 1" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextKearneymonCaptureOffset" intValue="NextKearneymonCaptureOffset+1" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextKearneymonCaptureOffset == 2" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="-3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextKearneymonCaptureOffset" intValue="NextKearneymonCaptureOffset+1" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextKearneymonCaptureOffset" intValue="0" />
				</Then>
			</Else>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var beastName = 'Kearneymon';
                    var damageVariable = 'captureManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_KearneymonCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</CaptureKearneymonJobStart>
	<CaptureWiggopsJobStart>
		<Action type="setVariable" intVariable="WiggopsAttackers" intValue="WiggopsAttackers+1" />
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="NextWiggopsCaptureOffset == 0" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="-3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextWiggopsCaptureOffset" intValue="NextWiggopsCaptureOffset+1" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextWiggopsCaptureOffset == 1" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextWiggopsCaptureOffset" intValue="NextWiggopsCaptureOffset+1" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextWiggopsCaptureOffset == 2" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="-3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextWiggopsCaptureOffset" intValue="NextWiggopsCaptureOffset+1" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextWiggopsCaptureOffset" intValue="0" />
				</Then>
			</Else>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var beastName = 'Wiggops';
                    var damageVariable = 'captureManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_WiggopsCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</CaptureWiggopsJobStart>
	<CaptureLewdJobStart>
		<Action type="setVariable" intVariable="LewdAttackers" intValue="LewdAttackers+1" />
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="NextLewdCaptureOffset == 0" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="-3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextLewdCaptureOffset" intValue="NextLewdCaptureOffset+1" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextLewdCaptureOffset == 1" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextLewdCaptureOffset" intValue="NextLewdCaptureOffset+1" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextLewdCaptureOffset == 2" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="-3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextLewdCaptureOffset" intValue="NextLewdCaptureOffset+1" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextLewdCaptureOffset" intValue="0" />
				</Then>
			</Else>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var beastName = 'Lewd';
                    var damageVariable = 'captureManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_LewdCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</CaptureLewdJobStart>
	<CaptureCrawlJobStart>
		<Action type="setVariable" intVariable="CrawlAttackers" intValue="CrawlAttackers+1" />
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="NextCrawlCaptureOffset == 0" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="-3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextCrawlCaptureOffset" intValue="NextCrawlCaptureOffset+1" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextCrawlCaptureOffset == 1" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextCrawlCaptureOffset" intValue="NextCrawlCaptureOffset+1" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextCrawlCaptureOffset == 2" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="-3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextCrawlCaptureOffset" intValue="NextCrawlCaptureOffset+1" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextCrawlCaptureOffset" intValue="0" />
				</Then>
			</Else>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var beastName = 'Crawl';
                    var damageVariable = 'captureManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_CrawlCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</CaptureCrawlJobStart>
	<CaptureBarfyJobStart>
		<Action type="setVariable" intVariable="BarfyAttackers" intValue="BarfyAttackers+1" />
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="NextBarfyCaptureOffset == 0" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="-3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextBarfyCaptureOffset" intValue="NextBarfyCaptureOffset+1" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextBarfyCaptureOffset == 1" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextBarfyCaptureOffset" intValue="NextBarfyCaptureOffset+1" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextBarfyCaptureOffset == 2" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="-3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextBarfyCaptureOffset" intValue="NextBarfyCaptureOffset+1" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextBarfyCaptureOffset" intValue="0" />
				</Then>
			</Else>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var beastName = 'Barfy';
                    var damageVariable = 'captureManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_BarfyCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</CaptureBarfyJobStart>
	<CaptureBullyVernJobStart>
		<Action type="setVariable" intVariable="BullyVernAttackers" intValue="BullyVernAttackers+1" />
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="NextBullyVernCaptureOffset == 0" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="-3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextBullyVernCaptureOffset" intValue="NextBullyVernCaptureOffset+1" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextBullyVernCaptureOffset == 1" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextBullyVernCaptureOffset" intValue="NextBullyVernCaptureOffset+1" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextBullyVernCaptureOffset == 2" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="-3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextBullyVernCaptureOffset" intValue="NextBullyVernCaptureOffset+1" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextBullyVernCaptureOffset" intValue="0" />
				</Then>
			</Else>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var beastName = 'BullyVern';
                    var damageVariable = 'captureManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_BullyVernCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</CaptureBullyVernJobStart>
	<CaptureBurnsDragonJobStart>
		<Action type="setVariable" intVariable="BurnsDragonAttackers" intValue="BurnsDragonAttackers+1" />
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="NextBurnsDragonCaptureOffset == 0" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="-3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextBurnsDragonCaptureOffset" intValue="NextBurnsDragonCaptureOffset+1" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextBurnsDragonCaptureOffset == 1" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextBurnsDragonCaptureOffset" intValue="NextBurnsDragonCaptureOffset+1" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextBurnsDragonCaptureOffset == 2" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="-3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextBurnsDragonCaptureOffset" intValue="NextBurnsDragonCaptureOffset+1" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextBurnsDragonCaptureOffset" intValue="0" />
				</Then>
			</Else>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var beastName = 'BurnsDragon';
                    var damageVariable = 'captureManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_BurnsDragonCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</CaptureBurnsDragonJobStart>
	<CaptureTreestacheJobStart>
		<Action type="setVariable" intVariable="TreestacheAttackers" intValue="TreestacheAttackers+1" />
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="NextTreestacheCaptureOffset == 0" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="-3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextTreestacheCaptureOffset" intValue="NextTreestacheCaptureOffset+1" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextTreestacheCaptureOffset == 1" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextTreestacheCaptureOffset" intValue="NextTreestacheCaptureOffset+1" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="NextTreestacheCaptureOffset == 2" />
				</Requirements>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="0" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="-3" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextTreestacheCaptureOffset" intValue="NextTreestacheCaptureOffset+1" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="setObjectVariable" variable="CaptureOffsetX" value="3" allowOrphan="false" />
					<Action type="setObjectVariable" variable="CaptureOffsetY" value="0" allowOrphan="false" />
					<Action type="setVariable" intVariable="NextTreestacheCaptureOffset" intValue="0" />
				</Then>
			</Else>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var beastName = 'Treestache';
                    var damageVariable = 'captureManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_TreestacheCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</CaptureTreestacheJobStart>
	<OpenMenu_CaptureKearneymonWithLisa ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="checkRequirements">
					<Requirement type="place building" building="KearneymonLair" />
					<False>
						<Action type="showBuildMenu" building="KearneymonLair" highlight="true" />
					</False>
					<True>
						<Action type="if">
							<If>
								<Requirement type="character" name="Kearneymon" />
								<Then>
									<Action type="pantoobject" time="0" character="Kearneymon" follow="true" />
								</Then>
							</If>
						</Action>
						<Action type="if">
							<If expression="THOH2017_BeastTamerGuideSeen">
								<Then>
									<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="4" />
									<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184008" />
									<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastList" />
									<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastIDIndex" />
									<Action type="setVariable" intVariable="Capture_AutoSlotCharacterID" intValue="4" />
									<Action type="gotoState" state="GameState_JobSelection">
										<Extras>
											<Attribute name="menu" value="MonsterBattleHUB" />
											<Attribute name="scriptResProvider" value="MonsterBattleHUB.mns" />
											<Attribute name="menuConfig" value="THOH2017_MenuConfig_CaptureBeasts:MenuConfig" />
											<Attribute name="buttonsConfig" value="THOH2017_MenuConfig_CaptureBeasts:ButtonConfig" />
											<Attribute name="generalConfig" value="THOH2017_MenuConfig_CaptureBeasts:Kearneymon" />
											<Attribute name="baseRewardPath" value="THOH2017_MenuConfig_CaptureBeasts:RewardValue" />
											<Attribute name="character" value="Kearneymon" />
											<Attribute name="characterAdHocObject" value="Obj_KearneymonBeast" />
											<Attribute name="autoSlotCharacterID" value="Capture_AutoSlotCharacterID" />
											<Attribute>
												<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_KearneymonBeast', 'state') == 0;" />
												<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListCaptureKearneymonWithLisa" />
												<Attribute name="characterJob" value="KearneymonGetCaptured" />
												<Attribute name="characterAdHocObjectLevelVariable" value="captureMana" />
											</Attribute>
											<Attribute name="specialEvent" value="THOH2017_Event" />
										</Extras>
									</Action>
								</Then>
							</If>
							<Else>
								<Then>
									<Action type="actionSequence" script="THOH2017_Scripts:GuidePanel_BeastTamer" />
									<Action type="updateVariable" variable="THOH2017_BeastTamerGuideSeen" value="1" />
								</Then>
							</Else>
						</Action>
					</True>
				</Action>
			</True>
		</Action>
	</OpenMenu_CaptureKearneymonWithLisa>
	<GoTo_TabKearneymon>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="building" building="KearneymonLair" not="true" />
						<Then>
							<Action type="focusOnMenuItem" itemName="KearneymonLair" inventory="true" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="actionSequence" script="THOH2017_Scripts:OpenMenu_TabKearneymon" />
						</Then>
					</Else>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_TabKearneymon>
	<GoTo_TabLewd>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="building" building="LewdBarTrollLair" not="true" />
						<Then>
							<Action type="focusOnMenuItem" itemName="LewdBarTrollLair" inventory="true" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="actionSequence" script="THOH2017_Scripts:OpenMenu_TabLewd" />
						</Then>
					</Else>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_TabLewd>
	<GoTo_TabCrawl>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="building" building="CrawlBarTrollLair" not="true" />
						<Then>
							<Action type="focusOnMenuItem" itemName="CrawlBarTrollLair" inventory="true" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="actionSequence" script="THOH2017_Scripts:OpenMenu_TabCrawl" />
						</Then>
					</Else>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_TabCrawl>
	<GoTo_TabBarfy>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="building" building="BarfyBarTrollLair" not="true" />
						<Then>
							<Action type="focusOnMenuItem" itemName="BarfyBarTrollLair" inventory="true" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="actionSequence" script="THOH2017_Scripts:OpenMenu_TabBarfy" />
						</Then>
					</Else>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_TabBarfy>
	<GoTo_TabWiggops>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="building" building="WiggopsLair" not="true" />
						<Then>
							<Action type="focusOnMenuItem" itemName="WiggopsLair" inventory="true" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="actionSequence" script="THOH2017_Scripts:OpenMenu_TabWiggops" />
						</Then>
					</Else>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_TabWiggops>
	<GoTo_TabBullyVern>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="building" building="BullyVernLair" not="true" />
						<Then>
							<Action type="focusOnMenuItem" itemName="BullyVernLair" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="actionSequence" script="THOH2017_Scripts:OpenMenu_TabBullyVern" />
						</Then>
					</Else>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_TabBullyVern>
	<GoTo_TabBurnsDragon>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="building" building="BurnsDragonLair" not="true" />
						<Then>
							<Action type="focusOnMenuItem" itemName="BurnsDragonLair" inventory="true" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="actionSequence" script="THOH2017_Scripts:OpenMenu_TabBurnsDragon" />
						</Then>
					</Else>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_TabBurnsDragon>
	<GoTo_TabTreestache>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="building" building="TreestachesLair" not="true" />
						<Then>
							<Action type="focusOnMenuItem" itemName="TreestachesLair" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="actionSequence" script="THOH2017_Scripts:OpenMenu_TabTreestache" />
						</Then>
					</Else>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_TabTreestache>
	<OpenMenu_TabKearneymon ignoreHUD="true">
		<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184008" />
		<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastList" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastIDIndex" />
		<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureKearneymon" />
	</OpenMenu_TabKearneymon>
	<OpenMenu_CaptureKearneymon ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="character" name="Kearneymon" />
				<Then>
					<Action type="pantoobject" time="0" character="Kearneymon" follow="true" />
				</Then>
			</If>
		</Action>
		<Action type="gotoState" state="GameState_JobSelection">
			<Extras>
				<Attribute name="menu" value="MonsterBattleHUB" />
				<Attribute name="scriptResProvider" value="MonsterBattleHUB.mns" />
				<Attribute name="menuConfig" value="THOH2017_MenuConfig_CaptureBeasts:MenuConfig" />
				<Attribute name="buttonsConfig" value="THOH2017_MenuConfig_CaptureBeasts:ButtonConfig" />
				<Attribute name="generalConfig" value="THOH2017_MenuConfig_CaptureBeasts:Kearneymon" />
				<Attribute name="baseRewardPath" value="THOH2017_MenuConfig_CaptureBeasts:RewardValue" />
				<Attribute name="character" value="Kearneymon" />
				<Attribute name="characterAdHocObject" value="Obj_KearneymonBeast" />
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_KearneymonBeast', 'state') == 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListCaptureKearneymon" />
					<Attribute name="characterJob" value="KearneymonGetCaptured" />
					<Attribute name="characterAdHocObjectLevelVariable" value="captureMana" />
				</Attribute>
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_KearneymonBeast', 'state') &gt; 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListEnchantKearneymon" />
					<Attribute name="characterJob" value="KearneymonGetEnchanted" />
					<Attribute name="characterAdHocObjectLevelVariable" value="enchantMana" />
					<Attribute name="building" value="KearneymonLair" />
				</Attribute>
				<Attribute name="specialEvent" value="THOH2017_Event" />
			</Extras>
		</Action>
	</OpenMenu_CaptureKearneymon>
	<CaptureKearneymonDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="Kearneymon_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="Kearneymon" param2Type="Enumeration" param2AsFormula="KearneymonAttackers" param3Type="Enumeration" param3="Capturing" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="Kearneymon_Reward" />
					<Action type="setVariable" intVariable="Kearneymon_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var captureDamage = User::getVariable('KearneymonPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_KearneymonBeast', 'captureMana');
                                var newMana = currentMana - captureDamage;
                                if(newMana <= 0)
                                {
                                    newMana = 0;
                                    Object::setVariableForAdHoc('Obj_KearneymonBeast', 'state', 1, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_KearneymonBeast', 'captureMana', newMana , 0, false);
                                User::setVariable('KearneymonPendingMana', 0, 1);
                                User::setVariable('NextKearneymonCaptureOffset', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_KearneymonCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="CaptureKearneymon" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="CaptureKearneymonPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="KearneymonGetCaptured" jobLimit="none" />
					<Action type="completeJob" name="CaptureKearneymonWithLisa" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="setVariable" intVariable="KearneymonAttackers" intValue="0" />
					<Action type="collectIndicator" character="Kearneymon" withCallback="false" />
				</Then>
			</If>
		</Action>
	</CaptureKearneymonDone>
	<KearneymonCaptured>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_KearneymonBeast', 'state', 1, 0, true);
                ]]></Program>
		</Action>
	</KearneymonCaptured>
	<KearneymonEnchanted>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_KearneymonBeast', 'state', 2, 0, true);
                ]]></Program>
		</Action>
	</KearneymonEnchanted>
	<OpenMenu_TabWiggops ignoreHUD="true">
		<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184012" />
		<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastList" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastIDIndex" />
		<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureWiggops" />
	</OpenMenu_TabWiggops>
	<OpenMenu_CaptureWiggops ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="character" name="Wiggops" />
				<Then>
					<Action type="pantoobject" time="0" character="Wiggops" follow="true" />
				</Then>
			</If>
		</Action>
		<Action type="gotoState" state="GameState_JobSelection">
			<Extras>
				<Attribute name="menu" value="MonsterBattleHUB" />
				<Attribute name="scriptResProvider" value="MonsterBattleHUB.mns" />
				<Attribute name="menuConfig" value="THOH2017_MenuConfig_CaptureBeasts:MenuConfig" />
				<Attribute name="buttonsConfig" value="THOH2017_MenuConfig_CaptureBeasts:ButtonConfig" />
				<Attribute name="baseRewardPath" value="THOH2017_MenuConfig_CaptureBeasts:RewardValue" />
				<Attribute name="character" value="Wiggops" />
				<Attribute name="characterAdHocObject" value="Obj_WiggopsBeast" />
				<Attribute name="generalConfig" value="THOH2017_MenuConfig_CaptureBeasts:Wiggops" />
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_WiggopsBeast', 'state') == 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListCaptureWiggops" />
					<Attribute name="characterJob" value="WiggopsGetCaptured" />
					<Attribute name="characterAdHocObjectLevelVariable" value="captureMana" />
				</Attribute>
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_WiggopsBeast', 'state') &gt; 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListEnchantWiggops" />
					<Attribute name="characterJob" value="WiggopsGetEnchanted" />
					<Attribute name="characterAdHocObjectLevelVariable" value="enchanteMana" />
					<Attribute name="building" value="WiggopsLair" />
				</Attribute>
				<Attribute name="specialEvent" value="THOH2017_Event" />
			</Extras>
		</Action>
	</OpenMenu_CaptureWiggops>
	<CaptureWiggopsDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="Wiggops_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="Wiggops" param2Type="Enumeration" param2AsFormula="WiggopsAttackers" param3Type="Enumeration" param3="Capturing" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="Wiggops_Reward" />
					<Action type="setVariable" intVariable="Wiggops_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var captureDamage = User::getVariable('WiggopsPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_WiggopsBeast', 'captureMana');
                                var newMana = currentMana - captureDamage;
                                if(newMana <= 0)
                                {
                                    newMana = 0;
                                    Object::setVariableForAdHoc('Obj_WiggopsBeast', 'state', 1, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_WiggopsBeast', 'captureMana', newMana , 0, false);
                                User::setVariable('WiggopsPendingMana', 0, 1);
                                User::setVariable('NextWiggopsCaptureOffset', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_WiggopsCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="CaptureWiggops" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="CaptureWiggopsPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="WiggopsGetCaptured" jobLimit="none" />
					<Action type="setVariable" intVariable="WiggopsAttackers" intValue="0" />
					<Action type="collectIndicator" character="Wiggops" withCallback="false" />
				</Then>
			</If>
		</Action>
	</CaptureWiggopsDone>
	<WiggopsCaptured>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_WiggopsBeast', 'state', 1, 0, false);
                ]]></Program>
		</Action>
	</WiggopsCaptured>
	<WiggopsEnchanted>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_WiggopsBeast', 'state', 2, 0, false);
                ]]></Program>
		</Action>
	</WiggopsEnchanted>
	<OpenMenu_TabLewd ignoreHUD="true">
		<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184009" />
		<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastList" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastIDIndex" />
		<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureLewd" />
	</OpenMenu_TabLewd>
	<OpenMenu_CaptureLewd ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="character" name="Lewd" />
				<Then>
					<Action type="pantoobject" time="0" character="Lewd" follow="true" />
				</Then>
			</If>
		</Action>
		<Action type="gotoState" state="GameState_JobSelection">
			<Extras>
				<Attribute name="menu" value="MonsterBattleHUB" />
				<Attribute name="scriptResProvider" value="MonsterBattleHUB.mns" />
				<Attribute name="menuConfig" value="THOH2017_MenuConfig_CaptureBeasts:MenuConfig" />
				<Attribute name="buttonsConfig" value="THOH2017_MenuConfig_CaptureBeasts:ButtonConfig" />
				<Attribute name="generalConfig" value="THOH2017_MenuConfig_CaptureBeasts:Lewd" />
				<Attribute name="baseRewardPath" value="THOH2017_MenuConfig_CaptureBeasts:RewardValue" />
				<Attribute name="character" value="Lewd" />
				<Attribute name="characterAdHocObject" value="Obj_LewdBeast" />
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_LewdBeast', 'state') == 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListCaptureLewd" />
					<Attribute name="characterJob" value="LewdGetCaptured" />
					<Attribute name="characterAdHocObjectLevelVariable" value="captureMana" />
				</Attribute>
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_LewdBeast', 'state') &gt; 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListEnchantLewd" />
					<Attribute name="characterJob" value="LewdGetEnchanted" />
					<Attribute name="characterAdHocObjectLevelVariable" value="enchantMana" />
					<Attribute name="building" value="LewdBarTrollLair" />
				</Attribute>
				<Attribute name="specialEvent" value="THOH2017_Event" />
			</Extras>
		</Action>
	</OpenMenu_CaptureLewd>
	<CaptureLewdDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="Lewd_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="Lewd" param2Type="Enumeration" param2AsFormula="LewdAttackers" param3Type="Enumeration" param3="Capturing" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="Lewd_Reward" />
					<Action type="setVariable" intVariable="Lewd_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var captureDamage = User::getVariable('LewdPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_LewdBeast', 'captureMana');
                                var newMana = currentMana - captureDamage;
                                if(newMana <= 0)
                                {
                                    newMana = 0;
                                    Object::setVariableForAdHoc('Obj_LewdBeast', 'state', 1, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_LewdBeast', 'captureMana', newMana , 0, false);
                                User::setVariable('LewdPendingMana', 0, 1);
                                User::setVariable('NextLewdCaptureOffset', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_LewdCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="CaptureLewd" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="CaptureLewdPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="LewdGetCaptured" jobLimit="none" />
					<Action type="setVariable" intVariable="LewdAttackers" intValue="0" />
					<Action type="collectIndicator" character="Lewd" withCallback="false" />
				</Then>
			</If>
		</Action>
	</CaptureLewdDone>
	<LewdCaptured>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_LewdBeast', 'state', 1, 0, false);
                ]]></Program>
		</Action>
	</LewdCaptured>
	<LewdEnchanted>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_LewdBeast', 'state', 2, 0, false);
                ]]></Program>
		</Action>
	</LewdEnchanted>
	<OpenMenu_TabCrawl ignoreHUD="true">
		<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184010" />
		<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastList" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastIDIndex" />
		<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureCrawl" />
	</OpenMenu_TabCrawl>
	<OpenMenu_CaptureCrawl ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="character" name="Crawl" />
				<Then>
					<Action type="pantoobject" time="0" character="Crawl" follow="true" />
				</Then>
			</If>
		</Action>
		<Action type="gotoState" state="GameState_JobSelection">
			<Extras>
				<Attribute name="menu" value="MonsterBattleHUB" />
				<Attribute name="scriptResProvider" value="MonsterBattleHUB.mns" />
				<Attribute name="menuConfig" value="THOH2017_MenuConfig_CaptureBeasts:MenuConfig" />
				<Attribute name="buttonsConfig" value="THOH2017_MenuConfig_CaptureBeasts:ButtonConfig" />
				<Attribute name="generalConfig" value="THOH2017_MenuConfig_CaptureBeasts:Crawl" />
				<Attribute name="baseRewardPath" value="THOH2017_MenuConfig_CaptureBeasts:RewardValue" />
				<Attribute name="character" value="Crawl" />
				<Attribute name="characterAdHocObject" value="Obj_CrawlBeast" />
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_CrawlBeast', 'state') == 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListCaptureCrawl" />
					<Attribute name="characterJob" value="CrawlGetCaptured" />
					<Attribute name="characterAdHocObjectLevelVariable" value="captureMana" />
				</Attribute>
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_CrawlBeast', 'state') &gt; 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListEnchantCrawl" />
					<Attribute name="characterJob" value="CrawlGetEnchanted" />
					<Attribute name="characterAdHocObjectLevelVariable" value="enchantMana" />
					<Attribute name="building" value="CrawlBarTrollLair" />
				</Attribute>
				<Attribute name="specialEvent" value="THOH2017_Event" />
			</Extras>
		</Action>
	</OpenMenu_CaptureCrawl>
	<CaptureCrawlDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="Crawl_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="Crawl" param2Type="Enumeration" param2AsFormula="CrawlAttackers" param3Type="Enumeration" param3="Capturing" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="Crawl_Reward" />
					<Action type="setVariable" intVariable="Crawl_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var captureDamage = User::getVariable('CrawlPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_CrawlBeast', 'captureMana');
                                var newMana = currentMana - captureDamage;
                                if(newMana <= 0)
                                {
                                    newMana = 0;
                                    Object::setVariableForAdHoc('Obj_CrawlBeast', 'state', 1, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_CrawlBeast', 'captureMana', newMana , 0, false);
                                User::setVariable('CrawlPendingMana', 0, 1);
                                User::setVariable('NextCrawlCaptureOffset', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_CrawlCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="CaptureCrawl" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="CaptureCrawlPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="CrawlGetCaptured" jobLimit="none" />
					<Action type="setVariable" intVariable="CrawlAttackers" intValue="0" />
					<Action type="collectIndicator" character="Crawl" withCallback="false" />
				</Then>
			</If>
		</Action>
	</CaptureCrawlDone>
	<CrawlCaptured>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_CrawlBeast', 'state', 1, 0, false);
                ]]></Program>
		</Action>
	</CrawlCaptured>
	<CrawlEnchanted>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_CrawlBeast', 'state', 2, 0, false);
                ]]></Program>
		</Action>
	</CrawlEnchanted>
	<OpenMenu_TabBarfy ignoreHUD="true">
		<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184011" />
		<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastList" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastIDIndex" />
		<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureBarfy" />
	</OpenMenu_TabBarfy>
	<OpenMenu_CaptureBarfy ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="character" name="Barfy" />
				<Then>
					<Action type="pantoobject" time="0" character="Barfy" follow="true" />
				</Then>
			</If>
		</Action>
		<Action type="gotoState" state="GameState_JobSelection">
			<Extras>
				<Attribute name="menu" value="MonsterBattleHUB" />
				<Attribute name="scriptResProvider" value="MonsterBattleHUB.mns" />
				<Attribute name="menuConfig" value="THOH2017_MenuConfig_CaptureBeasts:MenuConfig" />
				<Attribute name="buttonsConfig" value="THOH2017_MenuConfig_CaptureBeasts:ButtonConfig" />
				<Attribute name="generalConfig" value="THOH2017_MenuConfig_CaptureBeasts:Barfy" />
				<Attribute name="baseRewardPath" value="THOH2017_MenuConfig_CaptureBeasts:RewardValue" />
				<Attribute name="character" value="Barfy" />
				<Attribute name="characterAdHocObject" value="Obj_BarfyBeast" />
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_BarfyBeast', 'state') == 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListCaptureBarfy" />
					<Attribute name="characterJob" value="BarfyGetCaptured" />
					<Attribute name="characterAdHocObjectLevelVariable" value="captureMana" />
				</Attribute>
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_BarfyBeast', 'state') &gt; 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListEnchantBarfy" />
					<Attribute name="characterJob" value="BarfyGetEnchanted" />
					<Attribute name="characterAdHocObjectLevelVariable" value="enchantMana" />
					<Attribute name="building" value="BarfyBarTrollLair" />
				</Attribute>
				<Attribute name="specialEvent" value="THOH2017_Event" />
			</Extras>
		</Action>
	</OpenMenu_CaptureBarfy>
	<CaptureBarfyDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="Barfy_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="Barfy" param2Type="Enumeration" param2AsFormula="BarfyAttackers" param3Type="Enumeration" param3="Capturing" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="Barfy_Reward" />
					<Action type="setVariable" intVariable="Barfy_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var captureDamage = User::getVariable('BarfyPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_BarfyBeast', 'captureMana');
                                var newMana = currentMana - captureDamage;
                                if(newMana <= 0)
                                {
                                    newMana = 0;
                                    Object::setVariableForAdHoc('Obj_BarfyBeast', 'state', 1, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_BarfyBeast', 'captureMana', newMana , 0, false);
                                User::setVariable('BarfyPendingMana', 0, 1);
                                User::setVariable('NextBarfyCaptureOffset', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_BarfyCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="CaptureBarfy" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="CaptureBarfyPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="BarfyGetCaptured" jobLimit="none" />
					<Action type="setVariable" intVariable="BarfyAttackers" intValue="0" />
					<Action type="collectIndicator" character="Barfy" withCallback="false" />
				</Then>
			</If>
		</Action>
	</CaptureBarfyDone>
	<BarfyCaptured>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_BarfyBeast', 'state', 1, 0, false);
                ]]></Program>
		</Action>
	</BarfyCaptured>
	<BarfyEnchanted>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_BarfyBeast', 'state', 2, 0, false);
                ]]></Program>
		</Action>
	</BarfyEnchanted>
	<OpenMenu_TabBullyVern ignoreHUD="true">
		<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184013" />
		<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastList" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastIDIndex" />
		<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureBullyVern" />
	</OpenMenu_TabBullyVern>
	<OpenMenu_CaptureBullyVern ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="character" name="BullyVern" />
				<Then>
					<Action type="pantoobject" time="0" character="BullyVern" follow="true" />
				</Then>
			</If>
		</Action>
		<Action type="gotoState" state="GameState_JobSelection">
			<Extras>
				<Attribute name="menu" value="MonsterBattleHUB" />
				<Attribute name="scriptResProvider" value="MonsterBattleHUB.mns" />
				<Attribute name="menuConfig" value="THOH2017_MenuConfig_CaptureBeasts:MenuConfig" />
				<Attribute name="buttonsConfig" value="THOH2017_MenuConfig_CaptureBeasts:ButtonConfig" />
				<Attribute name="generalConfig" value="THOH2017_MenuConfig_CaptureBeasts:BullyVern" />
				<Attribute name="baseRewardPath" value="THOH2017_MenuConfig_CaptureBeasts:RewardValue" />
				<Attribute name="character" value="BullyVern" />
				<Attribute name="characterAdHocObject" value="Obj_BullyVernBeast" />
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_BullyVernBeast', 'state') == 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListCaptureBullyVern" />
					<Attribute name="characterJob" value="BullyVernGetCaptured" />
					<Attribute name="characterAdHocObjectLevelVariable" value="captureMana" />
				</Attribute>
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_BullyVernBeast', 'state') &gt; 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListEnchantBullyVern" />
					<Attribute name="characterJob" value="BullyVernGetEnchanted" />
					<Attribute name="characterAdHocObjectLevelVariable" value="enchantMana" />
					<Attribute name="building" value="BullyVernLair" />
				</Attribute>
				<Attribute name="specialEvent" value="THOH2017_Event" />
			</Extras>
		</Action>
	</OpenMenu_CaptureBullyVern>
	<CaptureBullyVernDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="BullyVern_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="BullyVern" param2Type="Enumeration" param2AsFormula="BullyVernAttackers" param3Type="Enumeration" param3="Capturing" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="BullyVern_Reward" />
					<Action type="setVariable" intVariable="BullyVern_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var captureDamage = User::getVariable('BullyVernPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_BullyVernBeast', 'captureMana');
                                var newMana = currentMana - captureDamage;
                                if(newMana <= 0)
                                {
                                    newMana = 0;
                                    Object::setVariableForAdHoc('Obj_BullyVernBeast', 'state', 1, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_BullyVernBeast', 'captureMana', newMana , 0, false);
                                User::setVariable('BullyVernPendingMana', 0, 1);
                                User::setVariable('NextBullyVernCaptureOffset', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_BullyVernCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="CaptureBullyVern" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="CaptureBullyVernPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="BullyVernGetCaptured" jobLimit="none" />
					<Action type="setVariable" intVariable="BullyVernAttackers" intValue="0" />
					<Action type="collectIndicator" character="BullyVern" withCallback="false" />
				</Then>
			</If>
		</Action>
	</CaptureBullyVernDone>
	<BullyVernCaptured>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_BullyVernBeast', 'state', 1, 0, false);
                ]]></Program>
		</Action>
	</BullyVernCaptured>
	<BullyVernEnchanted>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_BullyVernBeast', 'state', 2, 0, false);
                ]]></Program>
		</Action>
	</BullyVernEnchanted>
	<OpenMenu_TabBurnsDragon ignoreHUD="true">
		<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184016" />
		<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastList" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastIDIndex" />
		<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureBurnsDragon" />
	</OpenMenu_TabBurnsDragon>
	<OpenMenu_CaptureBurnsDragon ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="character" name="BurnsDragon" />
				<Then>
					<Action type="pantoobject" time="0" character="BurnsDragon" follow="true" />
				</Then>
			</If>
		</Action>
		<Action type="gotoState" state="GameState_JobSelection">
			<Extras>
				<Attribute name="menu" value="MonsterBattleHUB" />
				<Attribute name="scriptResProvider" value="MonsterBattleHUB.mns" />
				<Attribute name="menuConfig" value="THOH2017_MenuConfig_CaptureBeasts:MenuConfig" />
				<Attribute name="buttonsConfig" value="THOH2017_MenuConfig_CaptureBeasts:ButtonConfig" />
				<Attribute name="generalConfig" value="THOH2017_MenuConfig_CaptureBeasts:BurnsDragon" />
				<Attribute name="baseRewardPath" value="THOH2017_MenuConfig_CaptureBeasts:RewardValue" />
				<Attribute name="character" value="BurnsDragon" />
				<Attribute name="characterAdHocObject" value="Obj_BurnsDragonBeast" />
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_BurnsDragonBeast', 'state') == 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListCaptureBurnsDragon" />
					<Attribute name="characterJob" value="BurnsDragonGetCaptured" />
					<Attribute name="characterAdHocObjectLevelVariable" value="captureMana" />
				</Attribute>
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_BurnsDragonBeast', 'state') &gt; 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListEnchantBurnsDragon" />
					<Attribute name="characterJob" value="BurnsDragonGetEnchanted" />
					<Attribute name="characterAdHocObjectLevelVariable" value="enchantMana" />
					<Attribute name="building" value="BurnsDragonLair" />
				</Attribute>
				<Attribute name="specialEvent" value="THOH2017_Event" />
			</Extras>
		</Action>
	</OpenMenu_CaptureBurnsDragon>
	<CaptureBurnsDragonDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="BurnsDragon_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="BurnsDragon" param2Type="Enumeration" param2AsFormula="BurnsDragonAttackers" param3Type="Enumeration" param3="Capturing" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="BurnsDragon_Reward" />
					<Action type="setVariable" intVariable="BurnsDragon_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var captureDamage = User::getVariable('BurnsDragonPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_BurnsDragonBeast', 'captureMana');
                                var newMana = currentMana - captureDamage;
                                if(newMana <= 0)
                                {
                                    newMana = 0;
                                    Object::setVariableForAdHoc('Obj_BurnsDragonBeast', 'state', 1, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_BurnsDragonBeast', 'captureMana', newMana , 0, false);
                                User::setVariable('BurnsDragonPendingMana', 0, 1);
                                User::setVariable('NextBurnsDragonCaptureOffset', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_BurnsDragonCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="CaptureBurnsDragon" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="CaptureBurnsDragonPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="BurnsDragonGetCaptured" jobLimit="none" />
					<Action type="setVariable" intVariable="BurnsDragonAttackers" intValue="0" />
					<Action type="collectIndicator" character="BurnsDragon" withCallback="false" />
				</Then>
			</If>
		</Action>
	</CaptureBurnsDragonDone>
	<BurnsDragonCaptured>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_BurnsDragonBeast', 'state', 1, 0, false);
                ]]></Program>
		</Action>
	</BurnsDragonCaptured>
	<BurnsDragonEnchanted>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_BurnsDragonBeast', 'state', 2, 0, false);
                ]]></Program>
		</Action>
	</BurnsDragonEnchanted>
	<OpenMenu_TabTreestache ignoreHUD="true">
		<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="190000" />
		<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastList" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastIDIndex" />
		<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureTreestache" />
	</OpenMenu_TabTreestache>
	<OpenMenu_CaptureTreestache ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="character" name="Treestache" />
				<Then>
					<Action type="pantoobject" time="0" character="Treestache" follow="true" />
				</Then>
			</If>
		</Action>
		<Action type="gotoState" state="GameState_JobSelection">
			<Extras>
				<Attribute name="menu" value="MonsterBattleHUB" />
				<Attribute name="scriptResProvider" value="MonsterBattleHUB.mns" />
				<Attribute name="menuConfig" value="THOH2017_MenuConfig_CaptureBeasts:MenuConfig" />
				<Attribute name="buttonsConfig" value="THOH2017_MenuConfig_CaptureBeasts:ButtonConfig" />
				<Attribute name="generalConfig" value="THOH2017_MenuConfig_CaptureBeasts:Treestache" />
				<Attribute name="baseRewardPath" value="THOH2017_MenuConfig_CaptureBeasts:RewardValue" />
				<Attribute name="character" value="Treestache" />
				<Attribute name="characterAdHocObject" value="Obj_TreestacheBeast" />
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_TreestacheBeast', 'state') == 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListCaptureTreestache" />
					<Attribute name="characterJob" value="TreestacheGetCaptured" />
					<Attribute name="characterAdHocObjectLevelVariable" value="captureMana" />
				</Attribute>
				<Attribute>
					<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_TreestacheBeast', 'state') &gt; 0;" />
					<Attribute name="jobListConfig" value="THOH2017_MenuConfig_CaptureBeasts:JobListEnchantTreestache" />
					<Attribute name="characterJob" value="TreestacheGetEnchanted" />
					<Attribute name="characterAdHocObjectLevelVariable" value="enchantMana" />
					<Attribute name="building" value="TreestachesLair" />
				</Attribute>
				<Attribute name="specialEvent" value="THOH2017_Event" />
			</Extras>
		</Action>
	</OpenMenu_CaptureTreestache>
	<CaptureTreestacheDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="Treestache_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="Treestache" param2Type="Enumeration" param2AsFormula="TreestacheAttackers" param3Type="Enumeration" param3="Capturing" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="Treestache_Reward" />
					<Action type="setVariable" intVariable="Treestache_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var captureDamage = User::getVariable('TreestachePendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_TreestacheBeast', 'captureMana');
                                var newMana = currentMana - captureDamage;
                                if(newMana <= 0)
                                {
                                    newMana = 0;
                                    Object::setVariableForAdHoc('Obj_TreestacheBeast', 'state', 1, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_TreestacheBeast', 'captureMana', newMana , 0, false);
                                User::setVariable('TreestachePendingMana', 0, 1);
                                User::setVariable('NextTreestacheCaptureOffset', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_TreestacheCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="CaptureTreestache" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="CaptureTreestachePremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="TreestacheGetCaptured" jobLimit="none" />
					<Action type="setVariable" intVariable="TreestacheAttackers" intValue="0" />
					<Action type="collectIndicator" character="Treestache" withCallback="false" />
				</Then>
			</If>
		</Action>
	</CaptureTreestacheDone>
	<TreestacheCaptured>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_TreestacheBeast', 'state', 1, 0, false);
                ]]></Program>
		</Action>
	</TreestacheCaptured>
	<TreestacheEnchanted>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_TreestacheBeast', 'state', 2, 0, false);
                ]]></Program>
		</Action>
	</TreestacheEnchanted>
	<EnchantKearneymonJobStart>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var beastName = 'Kearneymon';
                    var damageVariable = 'enchantManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="setVariable" intVariable="KearneymonAttackers" intValue="KearneymonAttackers+1" />
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_KearneymonEnchantCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</EnchantKearneymonJobStart>
	<EnchantWiggopsJobStart>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var beastName = 'Wiggops';
                    var damageVariable = 'enchantManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="setVariable" intVariable="WiggopsAttackers" intValue="WiggopsAttackers+1" />
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_WiggopsEnchantCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</EnchantWiggopsJobStart>
	<EnchantLewdJobStart>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var beastName = 'Lewd';
                    var damageVariable = 'enchantManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="setVariable" intVariable="LewdAttackers" intValue="LewdAttackers+1" />
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_LewdEnchantCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</EnchantLewdJobStart>
	<EnchantCrawlJobStart>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var beastName = 'Crawl';
                    var damageVariable = 'enchantManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="setVariable" intVariable="CrawlAttackers" intValue="CrawlAttackers+1" />
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_CrawlEnchantCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</EnchantCrawlJobStart>
	<EnchantBarfyJobStart>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var beastName = 'Barfy';
                    var damageVariable = 'enchantManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="setVariable" intVariable="BarfyAttackers" intValue="BarfyAttackers+1" />
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_BarfyEnchantCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</EnchantBarfyJobStart>
	<EnchantBullyVernJobStart>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var beastName = 'BullyVern';
                    var damageVariable = 'enchantManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="setVariable" intVariable="BullyVernAttackers" intValue="BullyVernAttackers+1" />
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_BullyVernEnchantCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</EnchantBullyVernJobStart>
	<EnchantBurnsDragonJobStart>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var beastName = 'BurnsDragon';
                    var damageVariable = 'enchantManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="setVariable" intVariable="BurnsDragonAttackers" intValue="BurnsDragonAttackers+1" />
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_BurnsDragonEnchantCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</EnchantBurnsDragonJobStart>
	<EnchantTreestacheJobStart>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var beastName = 'Treestache';
                    var damageVariable = 'enchantManaDamage';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':ApplyDamageToBeast'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
		<Action type="setVariable" intVariable="TreestacheAttackers" intValue="TreestacheAttackers+1" />
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_TreestacheEnchantCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</EnchantTreestacheJobStart>
	<EnchantKearneymonDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="Kearneymon_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="Kearneymon" param2Type="Enumeration" param2AsFormula="KearneymonAttackers" param3Type="Enumeration" param3="Taming" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="Kearneymon_Reward" />
					<Action type="setVariable" intVariable="Kearneymon_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var targetMana = toDouble(System::getConfigValue('__THOH2017_Config:EnchantMana:Kearneymon__'));
                                var captureDamage = User::getVariable('KearneymonPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_KearneymonBeast', 'enchantMana');
                                var newMana = currentMana + captureDamage;
                                if(newMana >= targetMana)
                                {
                                    newMana = targetMana;
                                    Object::setVariableForAdHoc('Obj_KearneymonBeast', 'state', 2, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_KearneymonBeast', 'enchantMana', newMana , 0, false);
                                User::setVariable('KearneymonPendingMana', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_KearneymonEnchantCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="EnchantKearneymon" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="EnchantKearneymonPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="KearneymonGetEnchanted" jobLimit="none" />
					<Action type="setVariable" intVariable="KearneymonAttackers" intValue="0" />
				</Then>
			</If>
		</Action>
	</EnchantKearneymonDone>
	<EnchantWiggopsDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="Wiggops_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="Wiggops" param2Type="Enumeration" param2AsFormula="WiggopsAttackers" param3Type="Enumeration" param3="Taming" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="Wiggops_Reward" />
					<Action type="setVariable" intVariable="Wiggops_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var targetMana = toDouble(System::getConfigValue('__THOH2017_Config:EnchantMana:Wiggops__'));
                                var enchantDamage = User::getVariable('WiggopsPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_WiggopsBeast', 'enchantMana');
                                var newMana = currentMana + enchantDamage;
                                if(newMana >= targetMana)
                                {
                                    newMana = targetMana;
                                    Object::setVariableForAdHoc('Obj_WiggopsBeast', 'state', 2, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_WiggopsBeast', 'enchantMana', newMana , 0, false);
                                User::setVariable('WiggopsPendingMana', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_WiggopsEnchantCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="EnchantWiggops" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="EnchantWiggopsPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="WiggopsGetEnchanted" jobLimit="none" />
					<Action type="setVariable" intVariable="WiggopsAttackers" intValue="0" />
				</Then>
			</If>
		</Action>
	</EnchantWiggopsDone>
	<BattleMontymortCharacterStart>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var beastHunter = Script::getObjectInstance();
                    var bossDamage = 0;
                    var objectID = Object::getId(beastHunter);
                    if(objectID == 1)
                    {
                        var skin = Character::getSkin(beastHunter);
                        if(skin == 'WizardBart')
                        {
                            bossDamage = ObjectVars::getVariableDouble('Obj_WizardBartBeastHunter', 'bossDamage');
                        }
                    }
                    elseif(objectID == 4)
                    {
                        var skin = Character::getSkin(beastHunter);
                        if(skin == 'WizardLisa')
                        {
                            bossDamage = ObjectVars::getVariableDouble('Obj_WizardLisaBeastHunter', 'bossDamage');
                        }
                    }
                    elseif(objectID == 21)
                    {
                        var skin = Character::getSkin(beastHunter);
                        if(skin == 'MagicActMilhouse')
                        {
                            bossDamage = ObjectVars::getVariableDouble('Obj_MagicMilhouseBeastHunter', 'bossDamage');
                        }
                    }
                    elseif(objectID == 29)
                    {
                        var skin = Character::getSkin(beastHunter);
                        if(skin == 'WizardMartin')
                        {
                            bossDamage = ObjectVars::getVariableDouble('Obj_WizardMartinBeastHunter', 'bossDamage');
                        }
                    }
                    elseif(objectID == 184000)
                    {
                        bossDamage = ObjectVars::getVariableDouble('Obj_AngelicaButtonBeastHunter', 'bossDamage');
                    }
                    elseif(objectID == 184002)
                    {
                        bossDamage = ObjectVars::getVariableDouble('Obj_GreystashBeastHunter', 'bossDamage');
                    }
                    elseif(objectID == 184003)
                    {
                        bossDamage = ObjectVars::getVariableDouble('Obj_TheGreatRaymondoBeastHunter', 'bossDamage');
                    }
                    elseif(objectID == 184018)
                    {
                        bossDamage = ObjectVars::getVariableDouble('Obj_UnicornWizardBeastHunter', 'bossDamage');
                    }
                    elseif(objectID == 19)
                    {
                        var skin = Character::getSkin(beastHunter);
                        if(skin == 'SorcererFrink')
                        {
                            bossDamage = ObjectVars::getVariableDouble('Obj_SorcererFrinkBeastHunter', 'bossDamage');
                        }
                    }
                    
                    
                    var pendingDamage = User::getVariable('LordMontymort_PendingDamage');
                    User::setVariable('LordMontymort_PendingDamage', pendingDamage + bossDamage, 1);

                    var numInCombat = User::getVariable('LordMontymort_NumSentToBattle');
                    User::setVariable('LordMontymort_NumSentToBattle', numInCombat + 1, 1);
                ]]></Program>
		</Action>
		<Action type="program">
			<Program><![CDATA[
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    var beastCharacters = 'Obj_LordMontymortCharacterJobs';
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':AddCharacterToBeastJob'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</BattleMontymortCharacterStart>
	<BattleMontymortCharacterDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="LordMontymort_Reward &gt; 0" />
				<Then>
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="LordMontymort_Reward" />
					<Action type="setVariable" intVariable="LordMontymort_Reward" intValue="0" />
					<Action type="logevent" eventId="9706" param1Type="Enumeration" param1AsFormula="LordMontymort_NumDefeated+1" param2Type="Enumeration" param2="Characters" param3Type="Enumeration" param3AsFormula="LordMontymort_NumSentToBattle" />
					<Action type="setVariable" intVariable="LordMontymort_NumSentToBattle" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var damage = User::getVariable('LordMontymort_PendingDamage');
                                var currentHealth = ObjectVars::getVariableDouble('Obj_LordMontymort', 'health');
                                var newHealth = currentHealth - damage;
                                if(newHealth <= 0)
                                {
                                    var timesDefeated = User::getVariable('LordMontymort_NumDefeated');
                                    if(timesDefeated==0)
                                    {
                                        newHealth = toDouble(System::getConfigValue('__THOH2017_Config:Boss:TutorialHP__'));
                                    }
                                    else
                                    {
                                        newHealth = toDouble(System::getConfigValue('__THOH2017_Config:Boss:HP__'));
                                    }
                                    Object::setVariableForAdHoc('Obj_LordMontymort', 'state', 1, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_LordMontymort', 'health', newHealth, 0, false);
                                User::setVariable('LordMontymort_PendingDamage', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_LordMontymortCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="MontymortGetBattledCharacter" jobLimit="none" />
					<Action type="completeJob" name="BattleMontymortCharacter" jobLimit="none" />
					<Action type="completeJob" name="BattleMontymortCharacterPremium" jobLimit="none" />
				</Then>
			</If>
		</Action>
	</BattleMontymortCharacterDone>
	<BattleMontymortBeastStart>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var beast = Script::getObjectInstance();
                    var bossDamage = 0;
                    var objectID = Object::getId(beast);
                    
                    if(objectID == 184008)
                    {
                        bossDamage = ObjectVars::getVariableDouble('Obj_KearneymonBeast', 'bossDamage');
                    }
                    elseif(objectID == 184012)
                    {
                        bossDamage = ObjectVars::getVariableDouble('Obj_WiggopsBeast', 'bossDamage');
                    }
                    elseif(objectID == 184009)
                    {
                        bossDamage = ObjectVars::getVariableDouble('Obj_LewdBeast', 'bossDamage');
                    }
                    elseif(objectID == 184010)
                    {
                        bossDamage = ObjectVars::getVariableDouble('Obj_CrawlBeast', 'bossDamage');
                    }
                    elseif(objectID == 184011)
                    {
                        bossDamage = ObjectVars::getVariableDouble('Obj_BarfyBeast', 'bossDamage');
                    }
                    elseif(objectID == 184013)
                    {
                        bossDamage = ObjectVars::getVariableDouble('Obj_BullyVernBeast', 'bossDamage');
                    }
                    elseif(objectID == 184016)
                    {
                        bossDamage = ObjectVars::getVariableDouble('Obj_BurnsDragonBeast', 'bossDamage');
                    }
                    elseif(objectID == 190000)
                    {
                    bossDamage = ObjectVars::getVariableDouble('Obj_TreestacheBeast', 'bossDamage');
                    }
                    
                    var pendingDamage = User::getVariable('LordMontymort_PendingDamage');
                    User::setVariable('LordMontymort_PendingDamage', pendingDamage + bossDamage, 1);

                    var numInCombat = User::getVariable('LordMontymort_NumSentToBattle');
                    User::setVariable('LordMontymort_NumSentToBattle', numInCombat + 1, 1);
                ]]></Program>
		</Action>
	</BattleMontymortBeastStart>
	<BattleMontymortBeastDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="LordMontymort_Reward &gt; 0" />
				<Then>
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="LordMontymort_Reward" />
					<Action type="setVariable" intVariable="LordMontymort_Reward" intValue="0" />
					<Action type="logevent" eventId="9706" param1Type="Enumeration" param1AsFormula="LordMontymort_NumDefeated+1" param2Type="Enumeration" param2="Beasts" param3Type="Enumeration" param3AsFormula="LordMontymort_NumSentToBattle" />
					<Action type="setVariable" intVariable="LordMontymort_NumSentToBattle" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var damage = User::getVariable('LordMontymort_PendingDamage');
                                var currentHealth = ObjectVars::getVariableDouble('Obj_LordMontymort', 'health');
                                var newHealth = currentHealth - damage;
                                if(newHealth <= 0)
                                {
                                    newHealth = toDouble(System::getConfigValue('__THOH2017_Config:Boss:HP__'));
                                    Object::setVariableForAdHoc('Obj_LordMontymort', 'state', 2, 0, 1);
                                    
                                    var timesDefeated = User::getVariable('LordMontymort_NumDefeated');
                                    timesDefeated = timesDefeated + 1;
                                    User::setVariable('LordMontymort_NumDefeated', timesDefeated, 1);
                                    if(timesDefeated >= 4)
                                    {
                                        Object::setVariableForAdHoc('Obj_LordMontymort', 'state', 3, 0, 1);
                                    }
                                }
                                Object::setVariableForAdHoc('Obj_LordMontymort', 'health', newHealth, 0, 0);
                                User::setVariable('LordMontymort_PendingDamage', 0, 1);
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="MontymortGetBattledBeast" jobLimit="none" />
					<Action type="completeJob" name="BattleMontymortBeast" jobLimit="none" />
					<Action type="if">
						<If>
							<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_LordMontymort', 'state') == 2;" />
							<Then>
								<Action type="startJob" name="MontymortRespawn" character="FakeLordMontymort" />
							</Then>
						</If>
						<ElseIf>
							<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_LordMontymort', 'state') == 3;" />
							<Then>
								<Action type="deletecharacter" character="FakeLordMontymort" ignoreObject="true" />
							</Then>
						</ElseIf>
					</Action>
				</Then>
			</If>
		</Action>
	</BattleMontymortBeastDone>
	<OpenMenu_BossFight ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_LordMontymort', 'state') == 2;" />
				<Then>
					<Action type="gotoState" state="GameState_HubDataDrivenMenu" forceState="false">
						<Extras>
							<Attribute name="menuName" value="MonsterFightEmptyMenu" />
							<Attribute name="scriptResProvider" value="MonsterFightEmptyMenu.mns" />
							<Attribute name="menuConfig" value="THOH2017_MenuConfig_BossFight:EmptyMenuConfig" />
							<Attribute name="buttonsConfig" value="THOH2017_MenuConfig_BossFight:EmptyButtonConfig" />
							<Attribute name="progressBarsConfig" value="THOH2017_MenuConfig_BossFight:EmptyProgressBarConfig" />
							<Attribute name="specialEvent" value="THOH2017_Event" />
						</Extras>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="LordMontymortBossfightDecoration" fakeTouch="false" />
					<Action type="gotoState" state="GameState_JobSelection">
						<Extras>
							<Attribute name="menu" value="MonsterBattleHUB" />
							<Attribute name="scriptResProvider" value="MonsterBattleHUB.mns" />
							<Attribute name="menuConfig" value="THOH2017_MenuConfig_BossFight:MenuConfig" />
							<Attribute name="buttonsConfig" value="THOH2017_MenuConfig_BossFight:ButtonConfig" />
							<Attribute name="baseRewardPath" value="THOH2017_MenuConfig_BossFight:RewardValue" />
							<Attribute name="character" value="FakeLordMontymort" />
							<Attribute name="characterAdHocObject" value="Obj_LordMontymort" />
							<Attribute name="building" value="LordMontymortBossfightDecoration" />
							<Attribute>
								<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_LordMontymort', 'state') == 0;" />
								<Attribute name="jobListConfig" value="THOH2017_MenuConfig_BossFight:JobListCharacterBattle" />
								<Attribute name="characterJob" value="MontymortGetBattledCharacter" />
								<Attribute name="characterAdHocObjectLevelVariable" value="health" />
								<Attribute name="generalConfig" value="THOH2017_MenuConfig_BossFight:CharacterBattle" />
							</Attribute>
							<Attribute>
								<Requirement type="formula" formula="#program; return ObjectVars::getVariableInt('Obj_LordMontymort', 'state') == 1;" />
								<Attribute name="jobListConfig" value="THOH2017_MenuConfig_BossFight:JobListBeastBattle" />
								<Attribute name="characterJob" value="MontymortGetBattledBeast" />
								<Attribute name="characterAdHocObjectLevelVariable" value="health" />
								<Attribute name="generalConfig" value="THOH2017_MenuConfig_BossFight:BeastBattle" />
							</Attribute>
							<Attribute name="specialEvent" value="THOH2017_Event" />
						</Extras>
					</Action>
				</Then>
			</Else>
		</Action>
	</OpenMenu_BossFight>
	<EnchantLewdDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="Lewd_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="Lewd" param2Type="Enumeration" param2AsFormula="LewdAttackers" param3Type="Enumeration" param3="Taming" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="Lewd_Reward" />
					<Action type="setVariable" intVariable="Lewd_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var targetMana = toDouble(System::getConfigValue('__THOH2017_Config:EnchantMana:Lewd__'));
                                var enchantDamage = User::getVariable('LewdPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_LewdBeast', 'enchantMana');
                                var newMana = currentMana + enchantDamage;
                                if(newMana >= targetMana)
                                {
                                    newMana = targetMana;
                                    Object::setVariableForAdHoc('Obj_LewdBeast', 'state', 2, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_LewdBeast', 'enchantMana', newMana , 0, false);
                                User::setVariable('LewdPendingMana', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_LewdEnchantCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="EnchantLewd" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="EnchantLewdPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="LewdGetEnchanted" jobLimit="none" />
					<Action type="setVariable" intVariable="LewdAttackers" intValue="0" />
				</Then>
			</If>
		</Action>
	</EnchantLewdDone>
	<EnchantCrawlDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="Crawl_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="Crawl" param2Type="Enumeration" param2AsFormula="CrawlAttackers" param3Type="Enumeration" param3="Taming" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="Crawl_Reward" />
					<Action type="setVariable" intVariable="Crawl_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var targetMana = toDouble(System::getConfigValue('__THOH2017_Config:EnchantMana:Crawl__'));
                                var enchantDamage = User::getVariable('CrawlPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_CrawlBeast', 'enchantMana');
                                var newMana = currentMana + enchantDamage;
                                if(newMana >= targetMana)
                                {
                                    newMana = targetMana;
                                    Object::setVariableForAdHoc('Obj_CrawlBeast', 'state', 2, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_CrawlBeast', 'enchantMana', newMana , 0, false);
                                User::setVariable('CrawlPendingMana', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_CrawlEnchantCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="EnchantCrawl" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="EnchantCrawlPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="CrawlGetEnchanted" jobLimit="none" />
					<Action type="setVariable" intVariable="CrawlAttackers" intValue="0" />
				</Then>
			</If>
		</Action>
	</EnchantCrawlDone>
	<EnchantBarfyDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="Barfy_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="Barfy" param2Type="Enumeration" param2AsFormula="BarfyAttackers" param3Type="Enumeration" param3="Taming" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="Barfy_Reward" />
					<Action type="setVariable" intVariable="Barfy_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var targetMana = toDouble(System::getConfigValue('__THOH2017_Config:EnchantMana:Barfy__'));
                                var enchantDamage = User::getVariable('BarfyPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_BarfyBeast', 'enchantMana');
                                var newMana = currentMana + enchantDamage;
                                if(newMana >= targetMana)
                                {
                                    newMana = targetMana;
                                    Object::setVariableForAdHoc('Obj_BarfyBeast', 'state', 2, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_BarfyBeast', 'enchantMana', newMana , 0, false);
                                User::setVariable('BarfyPendingMana', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_BarfyEnchantCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="EnchantBarfy" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="EnchantBarfyPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="BarfyGetEnchanted" jobLimit="none" />
					<Action type="setVariable" intVariable="BarfyAttackers" intValue="0" />
				</Then>
			</If>
		</Action>
	</EnchantBarfyDone>
	<EnchantBullyVernDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="BullyVern_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="BullyVern" param2Type="Enumeration" param2AsFormula="BullyVernAttackers" param3Type="Enumeration" param3="Taming" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="BullyVern_Reward" />
					<Action type="setVariable" intVariable="BullyVern_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var targetMana = toDouble(System::getConfigValue('__THOH2017_Config:EnchantMana:BullyVern__'));
                                var enchantDamage = User::getVariable('BullyVernPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_BullyVernBeast', 'enchantMana');
                                var newMana = currentMana + enchantDamage;
                                if(newMana >= targetMana)
                                {
                                    newMana = targetMana;
                                    Object::setVariableForAdHoc('Obj_BullyVernBeast', 'state', 2, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_BullyVernBeast', 'enchantMana', newMana , 0, false);
                                User::setVariable('BullyVernPendingMana', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_BullyVernEnchantCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="EnchantBullyVern" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="EnchantBullyVernPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="BullyVernGetEnchanted" jobLimit="none" />
					<Action type="setVariable" intVariable="BullyVernAttackers" intValue="0" />
				</Then>
			</If>
		</Action>
	</EnchantBullyVernDone>
	<EnchantBurnsDragonDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="BurnsDragon_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="BurnsDragon" param2Type="Enumeration" param2AsFormula="BurnsDragonAttackers" param3Type="Enumeration" param3="Taming" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="BurnsDragon_Reward" />
					<Action type="setVariable" intVariable="BurnsDragon_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var targetMana = toDouble(System::getConfigValue('__THOH2017_Config:EnchantMana:BurnsDragon__'));
                                var enchantDamage = User::getVariable('BurnsDragonPendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_BurnsDragonBeast', 'enchantMana');
                                var newMana = currentMana + enchantDamage;
                                if(newMana >= targetMana)
                                {
                                    newMana = targetMana;
                                    Object::setVariableForAdHoc('Obj_BurnsDragonBeast', 'state', 2, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_BurnsDragonBeast', 'enchantMana', newMana , 0, false);
                                User::setVariable('BurnsDragonPendingMana', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_BurnsDragonEnchantCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="EnchantBurnsDragon" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="EnchantBurnsDragonPremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="BurnsDragonGetEnchanted" jobLimit="none" />
					<Action type="setVariable" intVariable="BurnsDragonAttackers" intValue="0" />
				</Then>
			</If>
		</Action>
	</EnchantBurnsDragonDone>
	<EnchantTreestacheDone parallel="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="Treestache_Reward &gt; 0" />
				<Then>
					<Action type="logevent" eventId="9705" param1Type="Enumeration" param1="Treestache" param2Type="Enumeration" param2AsFormula="TreestacheAttackers" param3Type="Enumeration" param3="Taming" />
					<Action type="reward" THOH2017_ActivePrizeTrackCurrency="Treestache_Reward" />
					<Action type="setVariable" intVariable="Treestache_Reward" intValue="0" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var targetMana = toDouble(System::getConfigValue('__THOH2017_Config:EnchantMana:Treestache__'));
                                var enchantDamage = User::getVariable('TreestachePendingMana');
                                var currentMana = ObjectVars::getVariableDouble('Obj_TreestacheBeast', 'enchantMana');
                                var newMana = currentMana + enchantDamage;
                                if(newMana >= targetMana)
                                {
                                    newMana = targetMana;
                                    Object::setVariableForAdHoc('Obj_TreestacheBeast', 'state', 2, 0, false);
                                }
                                Object::setVariableForAdHoc('Obj_TreestacheBeast', 'enchantMana', newMana , 0, false);
                                User::setVariable('TreestachePendingMana', 0, 1);
                                
                                for(var i = 0; i < 4; i++)
                                {
                                    Object::setVariableForAdHoc('Obj_TreestacheEnchantCharacterJobs', toString(i), '0', 0, false);
                                }
                            ]]></Program>
					</Action>
					<Action type="completeJob" name="EnchantTreestache" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="EnchantTreestachePremium" jobLimit="none" giveRewardsRefunds="true" />
					<Action type="completeJob" name="TreestacheGetEnchanted" jobLimit="none" />
					<Action type="setVariable" intVariable="TreestacheAttackers" intValue="0" />
				</Then>
			</If>
		</Action>
	</EnchantTreestacheDone>
	<Tab_BossFight>
		<Action type="if">
			<If>
				<Requirement type="reqList" location="THOH2017_Requirements:BossFight_Unlocked" />
				<Then>
					<Action type="if">
						<If expression="THOH2017_BossFightGuideSeen">
							<Then>
								<Action type="updateVariable" variable="THOH2017_EventHubTabValue" value="3" />
								<Action type="actionSequence" script="THOH2017_Scripts:OpenMenu_BossFight" />
							</Then>
						</If>
						<Else>
							<Then>
								<Action type="actionSequence" script="THOH2017_Scripts:GuidePanel_BossFight" />
								<Action type="updateVariable" variable="THOH2017_BossFightGuideSeen" value="1" />
							</Then>
						</Else>
					</Action>
				</Then>
			</If>
		</Action>
	</Tab_BossFight>
	<Check_BossGuidePanel>
		<Action type="if">
			<If>
				<Requirement type="reqList" location="THOH2017_Requirements:BossFight_Unlocked" />
				<Then>
					<Action type="if">
						<If expression="THOH2017_BossFightGuideSeen==0">
							<Then>
								<Action type="actionSequence" script="THOH2017_Scripts:GuidePanel_BossFight" />
								<Action type="updateVariable" variable="THOH2017_BossFightGuideSeen" value="1" />
							</Then>
						</If>
					</Action>
				</Then>
			</If>
		</Action>
	</Check_BossGuidePanel>
	<Tab_BeastTamer ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
				<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastList" />
				<Action type="if">
					<If>
						<Requirement type="formula" formula="NumBeastIDs &gt; 0" />
						<Then>
							<Action type="if">
								<If>
									<Requirement type="conditional" logic="OR">
										<Requirement type="variable" variable="THOH2017_Badge_ReadyToCollect_Kearneymon" />
										<Requirement type="variable" variable="THOH2017_Badge_CanStart_Kearneymon" />
									</Requirement>
									<Then>
										<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
											<FormatToken key="thisCharacterCounter" value="_[0]_" />
										</Action>
										<Action type="actionSequence" script="THOH2017_Scripts:SelectBeastMenu" parseOnDemand="true" />
									</Then>
								</If>
								<ElseIf>
									<Requirement type="conditional" logic="OR">
										<Requirement type="variable" variable="THOH2017_Badge_ReadyToCollect_Wiggops" />
										<Requirement type="variable" variable="THOH2017_Badge_CanStart_Wiggops" />
									</Requirement>
									<Then>
										<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
											<FormatToken key="thisCharacterCounter" value="_[1]_" />
										</Action>
										<Action type="actionSequence" script="THOH2017_Scripts:SelectBeastMenu" parseOnDemand="true" />
									</Then>
								</ElseIf>
								<ElseIf>
									<Requirement type="conditional" logic="OR">
										<Requirement type="variable" variable="THOH2017_Badge_ReadyToCollect_Lewd" />
										<Requirement type="variable" variable="THOH2017_Badge_CanStart_Lewd" />
									</Requirement>
									<Then>
										<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
											<FormatToken key="thisCharacterCounter" value="_[2]_" />
										</Action>
										<Action type="actionSequence" script="THOH2017_Scripts:SelectBeastMenu" parseOnDemand="true" />
									</Then>
								</ElseIf>
								<ElseIf>
									<Requirement type="conditional" logic="OR">
										<Requirement type="variable" variable="THOH2017_Badge_ReadyToCollect_Crawl" />
										<Requirement type="variable" variable="THOH2017_Badge_CanStart_Crawl" />
									</Requirement>
									<Then>
										<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
											<FormatToken key="thisCharacterCounter" value="_[3]_" />
										</Action>
										<Action type="actionSequence" script="THOH2017_Scripts:SelectBeastMenu" parseOnDemand="true" />
									</Then>
								</ElseIf>
								<ElseIf>
									<Requirement type="conditional" logic="OR">
										<Requirement type="variable" variable="THOH2017_Badge_ReadyToCollect_Barfy" />
										<Requirement type="variable" variable="THOH2017_Badge_CanStart_Barfy" />
									</Requirement>
									<Then>
										<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
											<FormatToken key="thisCharacterCounter" value="_[4]_" />
										</Action>
										<Action type="actionSequence" script="THOH2017_Scripts:SelectBeastMenu" parseOnDemand="true" />
									</Then>
								</ElseIf>
								<ElseIf>
									<Requirement type="conditional" logic="OR">
										<Requirement type="variable" variable="THOH2017_Badge_ReadyToCollect_BullyVern" />
										<Requirement type="variable" variable="THOH2017_Badge_CanStart_BullyVern" />
									</Requirement>
									<Then>
										<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
											<FormatToken key="thisCharacterCounter" value="_[5]_" />
										</Action>
										<Action type="actionSequence" script="THOH2017_Scripts:SelectBeastMenu" parseOnDemand="true" />
									</Then>
								</ElseIf>
								<ElseIf>
									<Requirement type="conditional" logic="OR">
										<Requirement type="variable" variable="THOH2017_Badge_ReadyToCollect_BurnsDragon" />
										<Requirement type="variable" variable="THOH2017_Badge_CanStart_BurnsDragon" />
									</Requirement>
									<Then>
										<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
											<FormatToken key="thisCharacterCounter" value="_[6]_" />
										</Action>
										<Action type="actionSequence" script="THOH2017_Scripts:SelectBeastMenu" parseOnDemand="true" />
									</Then>
								</ElseIf>
								<ElseIf>
									<Requirement type="conditional" logic="OR">
										<Requirement type="variable" variable="THOH2017_Badge_ReadyToCollect_Treestache" />
										<Requirement type="variable" variable="THOH2017_Badge_CanStart_Treestache" />
									</Requirement>
									<Then>
										<Action type="checkRequirements">
											<Requirement type="reqList" location="THOH2017_Requirements:BurnsDragonOwnedOrAvailable" />
											<True>
												<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
													<FormatToken key="thisCharacterCounter" value="_[7]_" />
												</Action>
											</True>
											<False>
												<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
													<FormatToken key="thisCharacterCounter" value="_[6]_" />
												</Action>
											</False>
										</Action>
										<Action type="actionSequence" script="THOH2017_Scripts:SelectBeastMenu" parseOnDemand="true" />
									</Then>
								</ElseIf>
								<Else>
									<Then>
										<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
											<FormatToken key="thisCharacterCounter" value="_[0]_" />
										</Action>
										<Action type="actionSequence" script="THOH2017_Scripts:SelectBeastMenu" parseOnDemand="true" />
									</Then>
								</Else>
							</Action>
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="gotoState" state="GameState_HubDataDrivenMenu" forceState="false">
								<Extras>
									<Attribute name="menuName" value="MonsterFightEmptyMenu" />
									<Attribute name="scriptResProvider" value="MonsterFightEmptyMenu.mns" />
									<Attribute name="menuConfig" value="THOH2016_MonsterBattleConfig:EmptyMenuConfig" />
									<Attribute name="buttonsConfig" value="THOH2016_MonsterBattleConfig:EmptyButtonConfig" />
									<Attribute name="progressBarsConfig" value="THOH2016_MonsterBattleConfig:EmptyProgressBarConfig" />
									<Attribute name="specialEvent" value="THOH2016_Event" />
								</Extras>
							</Action>
						</Then>
					</Else>
				</Action>
			</True>
		</Action>
	</Tab_BeastTamer>
	<UpdateBeastList parallel="true">
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    User::setVariable('NumBeastIDs', 0, false);
                    ObjectVars::clearVariables('Obj_BeastIDs');
                    var numBeasts = 0;
                    
                    ObjectVars::pushBackVariable('Obj_BeastIDs', '184008');
                    Object::setVariableForAdHoc('Obj_BeastIDIndices', '184008', numBeasts, 0, false);
                    numBeasts = numBeasts + 1;
                    
                    if(Requirements::checkRequirementList('THOH2017_Requirements:BeastTamer_Unlocked'))
                    {
                        ObjectVars::pushBackVariable('Obj_BeastIDs', '184012');
                        Object::setVariableForAdHoc('Obj_BeastIDIndices', '184012', numBeasts, 0, false);
                        numBeasts = numBeasts + 1;
                        
                        ObjectVars::pushBackVariable('Obj_BeastIDs', '184009');
                        Object::setVariableForAdHoc('Obj_BeastIDIndices', '184009', numBeasts, 0, false);
                        numBeasts = numBeasts + 1;
                        
                        ObjectVars::pushBackVariable('Obj_BeastIDs', '184010');
                        Object::setVariableForAdHoc('Obj_BeastIDIndices', '184010', numBeasts, 0, false);
                        numBeasts = numBeasts + 1;
                        
                        ObjectVars::pushBackVariable('Obj_BeastIDs', '184011');
                        Object::setVariableForAdHoc('Obj_BeastIDIndices', '184011', numBeasts, 0, false);
                        numBeasts = numBeasts + 1;
                    
                        ObjectVars::pushBackVariable('Obj_BeastIDs', '184013');
                        Object::setVariableForAdHoc('Obj_BeastIDIndices', '184013', numBeasts, 0, false);
                        numBeasts = numBeasts + 1;
                        
                        if(Requirements::checkRequirementList('THOH2017_Requirements:BurnsDragonOwnedOrAvailable'))
                        {
                            ObjectVars::pushBackVariable('Obj_BeastIDs', '184016');
                            Object::setVariableForAdHoc('Obj_BeastIDIndices', '184016', numBeasts, 0, false);
                            numBeasts = numBeasts + 1;
                        }
                        
                        if(Requirements::checkRequirementList('THOH2017_Requirements:TreestacheShouldShowOnEnchantMenu'))
                        {
                            ObjectVars::pushBackVariable('Obj_BeastIDs', '190000');
                            Object::setVariableForAdHoc('Obj_BeastIDIndices', '190000', numBeasts, 0, false);
                            numBeasts = numBeasts + 1;
                        }
                    }
                    
                    User::setVariable('NumBeastIDs', numBeasts, false);
                ]]></Program>
		</Action>
	</UpdateBeastList>
	<SelectBeastMenu parallel="true" otherScriptsCanRunOnObject="true">
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastIDIndex" />
		<Action type="if">
			<If expression="CurrentBeastID==184008">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureKearneymon" />
				</Then>
			</If>
			<ElseIf expression="CurrentBeastID==184012">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureWiggops" />
				</Then>
			</ElseIf>
			<ElseIf expression="CurrentBeastID==184009">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureLewd" />
				</Then>
			</ElseIf>
			<ElseIf expression="CurrentBeastID==184010">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureCrawl" />
				</Then>
			</ElseIf>
			<ElseIf expression="CurrentBeastID==184011">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureBarfy" />
				</Then>
			</ElseIf>
			<ElseIf expression="CurrentBeastID==184013">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureBullyVern" />
				</Then>
			</ElseIf>
			<ElseIf expression="CurrentBeastID==184016">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureBurnsDragon" />
				</Then>
			</ElseIf>
			<ElseIf expression="CurrentBeastID==190000">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureTreestache" />
				</Then>
			</ElseIf>
		</Action>
	</SelectBeastMenu>
	<GoToBeastCaptureUI parallel="true" otherScriptsCanRunOnObject="true">
		<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="Object::ID" />
		<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
		<Action type="actionSequence" script="THOH2017_Scripts:GotoSpecificBeastCaptureUI" parseOnDemand="true" />
	</GoToBeastCaptureUI>
	<GotoSpecificBeastCaptureUI parallel="true" otherScriptsCanRunOnObject="true">
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastList" />
		<Action type="actionSequence" script="THOH2017_Scripts:UpdateBeastIDIndex" />
		<Action type="if">
			<If expression="CurrentBeastID==184008">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureKearneymon" />
				</Then>
			</If>
			<ElseIf expression="CurrentBeastID==184012">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureWiggops" />
				</Then>
			</ElseIf>
			<ElseIf expression="CurrentBeastID==184009">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureLewd" />
				</Then>
			</ElseIf>
			<ElseIf expression="CurrentBeastID==184010">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureCrawl" />
				</Then>
			</ElseIf>
			<ElseIf expression="CurrentBeastID==184011">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureBarfy" />
				</Then>
			</ElseIf>
			<ElseIf expression="CurrentBeastID==184013">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureBullyVern" />
				</Then>
			</ElseIf>
			<ElseIf expression="CurrentBeastID==184016">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureBurnsDragon" />
				</Then>
			</ElseIf>
			<ElseIf expression="CurrentBeastID==190000">
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:OpenMenu_CaptureTreestache" />
				</Then>
			</ElseIf>
		</Action>
	</GotoSpecificBeastCaptureUI>
	<NextBuildingSelected parallel="true">
		<Action type="sound" sound="UIButton" />
		<Action type="if">
			<If expression="CurrentBeastIDIndex &lt; NumBeastIDs-1">
				<Then>
					<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
						<FormatToken key="thisCharacterCounter" value="_[CurrentBeastIDIndex+1]_" />
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
						<FormatToken key="thisCharacterCounter" value="_[0]_" />
					</Action>
				</Then>
			</Else>
		</Action>
		<Action type="actionSequence" script="THOH2017_Scripts:SelectBeastMenu" parseOnDemand="true" />
	</NextBuildingSelected>
	<PreviousBuildingSelected parallel="true">
		<Action type="sound" sound="UIButton" />
		<Action type="if">
			<If expression="CurrentBeastIDIndex==0">
				<Then>
					<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
						<FormatToken key="thisCharacterCounter" value="_[NumBeastIDs-1]_" />
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="actionSequence" script="THOH2017_Scripts:SetSpecificBeast" waitUntilComplete="true" parseOnDemand="true">
						<FormatToken key="thisCharacterCounter" value="_[CurrentBeastIDIndex-1]_" />
					</Action>
				</Then>
			</Else>
		</Action>
		<Action type="actionSequence" script="THOH2017_Scripts:SelectBeastMenu" parseOnDemand="true" />
	</PreviousBuildingSelected>
	<UpdateBeastIDIndex cache="true">
		<Action type="updateVariable" variable="CurrentBeastIDIndex" value="#program;             var currentBeastID = User::getVariable('CurrentBeastID');             var currentBeastIDAsString = toString(currentBeastID);             var beastIndex = ObjectVars::getVariableInt('Obj_BeastIDIndices', currentBeastIDAsString);             return beastIndex;" asObjectExpression="true"></Action>
	</UpdateBeastIDIndex>
	<SetSpecificBeast parallel="true" cache="true">
		<Action type="updateVariable" variable="CurrentBeastID" value="Object::{thisCharacterCounter}" asObjectExpression="true" formatMe="true">
			<Objects>
				<ObjectByName name="Obj_BeastIDs" />
			</Objects>
		</Action>
	</SetSpecificBeast>
	<ReleaseKearneymon_JobDone ignoreHUD="true" otherScriptsCanRunOnObject="true">
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="KearneymonRelease_NextPrize==0" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="KearneymonPrize1" />
					</Action>
					<Action type="setVariable" intVariable="KearneymonRelease_NextPrize" intValue="1" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Kearneymon" param2Type="Enumeration" param2="KearneymonPrize1" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="KearneymonRelease_NextPrize==1" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="KearneymonPrize2" />
					</Action>
					<Action type="setVariable" intVariable="KearneymonRelease_NextPrize" intValue="2" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Kearneymon" param2Type="Enumeration" param2="KearneymonPrize2" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="KearneymonRelease_NextPrize==2" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="KearneymonPrize3" />
					</Action>
					<Action type="setVariable" intVariable="KearneymonRelease_NextPrize" intValue="0" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Kearneymon" param2Type="Enumeration" param2="KearneymonPrize3" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
		</Action>
	</ReleaseKearneymon_JobDone>
	<LordMontymortBossfightDecoration_Touched ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_LordMontymort', 'state') == 3" />
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="LordMontymortBossfightDecoration" />
						</Extras>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="actionSequence" script="THOH2017_Scripts:Tab_BossFight" parseOnDemand="true" />
				</Then>
			</Else>
		</Action>
	</LordMontymortBossfightDecoration_Touched>
	<Kearneymon_Tapped>
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_KearneymonBeast', 'state') == 0" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="if">
						<If expression="__THOH2017_GameConfig:Lair_Touched:Kearneymon_LairTapped__">
							<Then>
								<Action type="gotoState" state="GameState_QuestProgress" forceState="true">
									<Extras>
										<Attribute name="questNameToShow" value="THOH2017_CaptureKearneymon" />
									</Extras>
								</Action>
							</Then>
						</If>
					</Action>
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_KearneymonBeast', 'state') == 1" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_QuestProgress">
						<Extras>
							<Attribute name="questNameToShow" value="THOH2017_EnchantKearneymon" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_KearneymonBeast', 'state') == 2" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="KearneymonLair" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
		</Action>
	</Kearneymon_Tapped>
	<Wiggops_Tapped>
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_WiggopsBeast', 'state') == 0" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="if">
						<If expression="__THOH2017_GameConfig:Lair_Touched:Wiggops_LairTapped__">
							<Then>
								<Action type="gotoState" state="GameState_QuestProgress" forceState="true">
									<Extras>
										<Attribute name="questNameToShow" value="ZeroClopsThirty_1" />
									</Extras>
								</Action>
							</Then>
						</If>
					</Action>
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_WiggopsBeast', 'state') == 1" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_QuestProgress">
						<Extras>
							<Attribute name="questNameToShow" value="ZeroClopsThirty_2" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_WiggopsBeast', 'state') == 2" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="WiggopsLair" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
		</Action>
	</Wiggops_Tapped>
	<ReleaseWiggops_JobDone ignoreHUD="true" otherScriptsCanRunOnObject="true">
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="WiggopsRelease_NextPrize==0" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="WiggopsPrize1" />
					</Action>
					<Action type="setVariable" intVariable="WiggopsRelease_NextPrize" intValue="1" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Wiggops" param2Type="Enumeration" param2="WiggopsPrize1" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:PremiumBeastSummonRewardAmount__" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="WiggopsRelease_NextPrize==1" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="WiggopsPrize2" />
					</Action>
					<Action type="setVariable" intVariable="WiggopsRelease_NextPrize" intValue="2" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Wiggops" param2Type="Enumeration" param2="WiggopsPrize2" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:PremiumBeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="WiggopsRelease_NextPrize==2" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="WiggopsPrize3" />
					</Action>
					<Action type="setVariable" intVariable="WiggopsRelease_NextPrize" intValue="0" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Wiggops" param2Type="Enumeration" param2="WiggopsPrize3" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:PremiumBeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
		</Action>
	</ReleaseWiggops_JobDone>
	<ReleaseLewd_JobDone ignoreHUD="true" otherScriptsCanRunOnObject="true">
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="BarTrollRelease_NextPrize==0" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BarTrollPrize1" />
					</Action>
					<Action type="setVariable" intVariable="BarTrollRelease_NextPrize" intValue="1" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Lewd" param2Type="Enumeration" param2="BarTrollPrize1" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="BarTrollRelease_NextPrize==1" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BarTrollPrize2" />
					</Action>
					<Action type="setVariable" intVariable="BarTrollRelease_NextPrize" intValue="2" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Lewd" param2Type="Enumeration" param2="BarTrollPrize2" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="BarTrollRelease_NextPrize==2" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BarTrollPrize3" />
					</Action>
					<Action type="setVariable" intVariable="BarTrollRelease_NextPrize" intValue="0" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Lewd" param2Type="Enumeration" param2="BarTrollPrize3" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
		</Action>
	</ReleaseLewd_JobDone>
	<Lewd_Tapped>
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_LewdBeast', 'state') == 0" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="if">
						<If expression="__THOH2017_GameConfig:Lair_Touched:Lewd_LairTapped__">
							<Then>
								<Action type="gotoState" state="GameState_QuestProgress" forceState="true">
									<Extras>
										<Attribute name="questNameToShow" value="PubStomp_1" />
									</Extras>
								</Action>
							</Then>
						</If>
					</Action>
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_LewdBeast', 'state') == 1" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_QuestProgress">
						<Extras>
							<Attribute name="questNameToShow" value="PubStomp_2" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_LewdBeast', 'state') == 2" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="LewdBarTrollLair" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
		</Action>
	</Lewd_Tapped>
	<ReleaseCrawl_JobDone ignoreHUD="true" otherScriptsCanRunOnObject="true">
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="BarTrollRelease_NextPrize==0" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BarTrollPrize1" />
					</Action>
					<Action type="setVariable" intVariable="BarTrollRelease_NextPrize" intValue="1" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Crawl" param2Type="Enumeration" param2="BarTrollPrize1" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="BarTrollRelease_NextPrize==1" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BarTrollPrize2" />
					</Action>
					<Action type="setVariable" intVariable="BarTrollRelease_NextPrize" intValue="2" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Crawl" param2Type="Enumeration" param2="BarTrollPrize2" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="BarTrollRelease_NextPrize==2" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BarTrollPrize3" />
					</Action>
					<Action type="setVariable" intVariable="BarTrollRelease_NextPrize" intValue="0" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Crawl" param2Type="Enumeration" param2="BarTrollPrize3" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
		</Action>
	</ReleaseCrawl_JobDone>
	<Crawl_Tapped>
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_CrawlBeast', 'state') == 0" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="if">
						<If expression="__THOH2017_GameConfig:Lair_Touched:Crawl_LairTapped__">
							<Then>
								<Action type="gotoState" state="GameState_QuestProgress" forceState="true">
									<Extras>
										<Attribute name="questNameToShow" value="RockAndTroll_1" />
									</Extras>
								</Action>
							</Then>
						</If>
					</Action>
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_CrawlBeast', 'state') == 1" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_QuestProgress">
						<Extras>
							<Attribute name="questNameToShow" value="RockAndTroll_2" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_CrawlBeast', 'state') == 2" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="CrawlBarTrollLair" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
		</Action>
	</Crawl_Tapped>
	<ReleaseBarfy_JobDone ignoreHUD="true" otherScriptsCanRunOnObject="true">
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="BarTrollRelease_NextPrize==0" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BarTrollPrize1" />
					</Action>
					<Action type="setVariable" intVariable="BarTrollRelease_NextPrize" intValue="1" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Barfy" param2Type="Enumeration" param2="BarTrollPrize1" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="BarTrollRelease_NextPrize==1" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BarTrollPrize2" />
					</Action>
					<Action type="setVariable" intVariable="BarTrollRelease_NextPrize" intValue="2" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Barfy" param2Type="Enumeration" param2="BarTrollPrize2" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="BarTrollRelease_NextPrize==2" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BarTrollPrize3" />
					</Action>
					<Action type="setVariable" intVariable="BarTrollRelease_NextPrize" intValue="0" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Barfy" param2Type="Enumeration" param2="BarTrollPrize3" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
		</Action>
	</ReleaseBarfy_JobDone>
	<Barfy_Tapped>
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_BarfyBeast', 'state') == 0" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="if">
						<If expression="__THOH2017_GameConfig:Lair_Touched:Barfy_LairTapped__">
							<Then>
								<Action type="gotoState" state="GameState_QuestProgress" forceState="true">
									<Extras>
										<Attribute name="questNameToShow" value="ThePartyTroll_1" />
									</Extras>
								</Action>
							</Then>
						</If>
					</Action>
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_BarfyBeast', 'state') == 1" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_QuestProgress">
						<Extras>
							<Attribute name="questNameToShow" value="ThePartyTroll_2" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_BarfyBeast', 'state') == 2" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="BarfyBarTrollLair" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
		</Action>
	</Barfy_Tapped>
	<ReleaseBullyVern_JobDone ignoreHUD="true" otherScriptsCanRunOnObject="true">
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="BullyVernRelease_NextPrize==0" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BullyVernPrize1" />
					</Action>
					<Action type="setVariable" intVariable="BullyVernRelease_NextPrize" intValue="1" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="BullyVern" param2Type="Enumeration" param2="BullyVernPrize1" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="BullyVernRelease_NextPrize==1" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BullyVernPrize2" />
					</Action>
					<Action type="setVariable" intVariable="BullyVernRelease_NextPrize" intValue="2" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="BullyVern" param2Type="Enumeration" param2="BullyVernPrize2" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="BullyVernRelease_NextPrize==2" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BullyVernPrize3" />
					</Action>
					<Action type="setVariable" intVariable="BullyVernRelease_NextPrize" intValue="0" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="BullyVern" param2Type="Enumeration" param2="BullyVernPrize3" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:BeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
		</Action>
	</ReleaseBullyVern_JobDone>
	<BullyVern_Tapped>
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_BullyVernBeast', 'state') == 0" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="if">
						<If expression="__THOH2017_GameConfig:Lair_Touched:BullyVern_LairTapped__">
							<Then>
								<Action type="gotoState" state="GameState_QuestProgress" forceState="true">
									<Extras>
										<Attribute name="questNameToShow" value="ThreeHeadsNoBrain_1_Permanent" />
									</Extras>
								</Action>
							</Then>
						</If>
					</Action>
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_BullyVernBeast', 'state') == 1" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_QuestProgress">
						<Extras>
							<Attribute name="questNameToShow" value="ThreeHeadsNoBrain_2" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_BullyVernBeast', 'state') == 2" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="BullyVernLair" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
		</Action>
	</BullyVern_Tapped>
	<ReleaseBurnsDragon_JobDone ignoreHUD="true" otherScriptsCanRunOnObject="true">
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="BurnsDragonRelease_NextPrize==0" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BurnsDragonPrize1" />
					</Action>
					<Action type="setVariable" intVariable="BurnsDragonRelease_NextPrize" intValue="1" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="BurnsDragon" param2Type="Enumeration" param2="BurnsDragonPrize1" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:PremiumBeastSummonRewardAmount__" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="BurnsDragonRelease_NextPrize==1" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BurnsDragonPrize2" />
					</Action>
					<Action type="setVariable" intVariable="BurnsDragonRelease_NextPrize" intValue="2" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="BurnsDragon" param2Type="Enumeration" param2="BurnsDragonPrize2" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:PremiumBeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="BurnsDragonRelease_NextPrize==2" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="BurnsDragonPrize3" />
					</Action>
					<Action type="setVariable" intVariable="BurnsDragonRelease_NextPrize" intValue="0" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="BurnsDragon" param2Type="Enumeration" param2="BurnsDragonPrize3" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:PremiumBeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
		</Action>
	</ReleaseBurnsDragon_JobDone>
	<BurnsDragon_Tapped>
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_BurnsDragonBeast', 'state') == 0" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="if">
						<If expression="__THOH2017_GameConfig:Lair_Touched:BurnsDragon_LairTapped__">
							<Then>
								<Action type="gotoState" state="GameState_QuestProgress" forceState="true">
									<Extras>
										<Attribute name="questNameToShow" value="TheVeryWellOffDragon_1" />
									</Extras>
								</Action>
							</Then>
						</If>
					</Action>
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_BurnsDragonBeast', 'state') == 1" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_QuestProgress">
						<Extras>
							<Attribute name="questNameToShow" value="TheVeryWellOffDragon_2" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_BurnsDragonBeast', 'state') == 2" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="BurnsDragonLair" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
		</Action>
	</BurnsDragon_Tapped>
	<ReleaseTreestache_JobDone ignoreHUD="true" otherScriptsCanRunOnObject="true">
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="TreestacheRelease_NextPrize==0" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="Tree00" />
					</Action>
					<Action type="setVariable" intVariable="TreestacheRelease_NextPrize" intValue="1" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Treestache" param2Type="Enumeration" param2="Tree00" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:PremiumBeastSummonRewardAmount__" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="TreestacheRelease_NextPrize==1" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="Shrub00" />
					</Action>
					<Action type="setVariable" intVariable="TreestacheRelease_NextPrize" intValue="2" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Treestache" param2Type="Enumeration" param2="Shrub00" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:PremiumBeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="TreestacheRelease_NextPrize==2" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="MapleTree" />
					</Action>
					<Action type="setVariable" intVariable="TreestacheRelease_NextPrize" intValue="3" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Treestache" param2Type="Enumeration" param2="MapleTree" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:PremiumBeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="TreestacheRelease_NextPrize==3" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="WillowTree" />
					</Action>
					<Action type="setVariable" intVariable="TreestacheRelease_NextPrize" intValue="4" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Treestache" param2Type="Enumeration" param2="WillowTree" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:PremiumBeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="TreestacheRelease_NextPrize==4" />
				</Requirements>
				<Then>
					<Action type="rewardWithPlaceStore" attributes="Casino_MenuConfig:RewardWithPlaceStore">
						<Item type="building" name="SmallIsland1" />
					</Action>
					<Action type="setVariable" intVariable="TreestacheRelease_NextPrize" intValue="0" />
					<Action type="logevent" eventId="9708" param1Type="Enumeration" param1="Treestache" param2Type="Enumeration" param2="SmallIsland1" param3Type="Enumeration" param3AsFormula="__THOH2017_Config:Jobs:PremiumBeastSummonRewardAmount__" />
				</Then>
			</ElseIf>
		</Action>
	</ReleaseTreestache_JobDone>
	<Treestache_Tapped>
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="quest started" quest="AllBarkAndBite_1" />
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_TreestacheBeast', 'state') == 0" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="if">
						<If expression="__THOH2017_GameConfig:Lair_Touched:Treestache_LairTapped__">
							<Then>
								<Action type="gotoState" state="GameState_QuestProgress" forceState="true">
									<Extras>
										<Attribute name="questNameToShow" value="AllBarkAndBite_1" />
									</Extras>
								</Action>
							</Then>
						</If>
					</Action>
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_TreestacheBeast', 'state') == 1" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_QuestProgress">
						<Extras>
							<Attribute name="questNameToShow" value="AllBarkAndBite_2" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_TreestacheBeast', 'state') == 2" />
					<Requirement type="players land" />
				</Requirements>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="TreestachesLair" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
		</Action>
	</Treestache_Tapped>
	<MagicTower_Start parallel="true">
		<Action type="if">
			<If expression="#program;                 if(User::getVariable('BankedFantasticalPests') &gt; 0)                 {                     return true;                 }                 else                 {                     var character = Character::find('FantasticalPest');                     var characterInstanceList = Land::getAllInstancesOfObject(character);                     foreach(characterInstanceList as instance)                     {                        if(!Object::getDelete(instance))                         {                             return true;                         }                     }                 }                 return false;">
				<Then>
					<Action type="actionSequence" script="MiscScripts:GoToInGameWithSound" />
					<Action type="setMiniGameState" building="MagicTower" name="MagicTower" state="Playing" />
					<Action type="setMiniGameState" building="MagicTower" name="MagicTower" state="Ready" />
					<Action type="anim-play" onBuilding="MagicTower" animation="ActiveNoLoop" nowait="true" />
					<Action type="actionSequence" script="THOH2017_Scripts:DestroyAllTappables" />
					<Action type="runScript" script="THOH2017_Scripts:MagicTower_AllTappablesCollected" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="actionSequence" script="MiscScripts:GoToInGameWithSound" />
					<Action type="runScript" script="THOH2017_Scripts:MagicTower_NoTappables" />
				</Then>
			</Else>
		</Action>
	</MagicTower_Start>
	<MagicTower_AllTappablesCollected>
		<Action type="hudTip" text="UI_THOH2017_MT_AllTappablesCleared" time="10s" requiresActiveHUD="false" />
	</MagicTower_AllTappablesCollected>
	<MagicTower_NoTappables>
		<Action type="message" text="UI_THOH2017_MT_NoTappables" />
	</MagicTower_NoTappables>
	<MagicTower_Rush parallel="true">
		<Action type="sound" sound="UIButton" />
		<Action type="rushMinigame" minigame="MagicTower" />
	</MagicTower_Rush>
	<DestroyAllTappables parallel="true">
		<Action type="delay" time="0.2" />
		<Action type="program">
			<Program><![CDATA[#program;
                  var character = Character::find('FantasticalPest');
                  var characterInstanceList = Land::getAllInstancesOfObject(character);
                  var numCharactersTapped = User::getVariable('BankedFantasticalPests');

                  User::setVariable('BankedFantasticalPests', 0, true);
                  
                  foreach(characterInstanceList as instance)
                  {
                    if( !Object::getDelete(instance) && Object::getVariable(instance, 'TAPPED')!=1)
                    {
                        numCharactersTapped++;
                    
                        Object::setVariable(instance, 'TAPPED', '1', 0, false);
                        Object::setDelete(instance, true);
                        
                        Script::runOnObjectInstance('THOH2017_Scripts:Tappable_AnimateAndDie', instance);
                    }
                  }
                  
                  var eventCurrencyPerTappable = toDouble(System::getConfigValue('__THOH2017_Config:Tappables:Award_PTCurrency__'));
                  var craftingCurrencyPerTappable = toDouble(System::getConfigValue('__THOH2017_GameConfig:TappableCraftReward:Amount__'));
                  
                  Global::setVariable('THOH_MTRewards_EventCurrency', numCharactersTapped*eventCurrencyPerTappable);
                  Global::setVariable('THOH_MTRewards_CraftCurrency', numCharactersTapped*craftingCurrencyPerTappable);
                  
              ]]></Program>
		</Action>
		<Action type="runActionSequenceOnAll" building="MagicTower" script="THOH2017_Scripts:DestroyAllTappables_RewardOnBuilding" />
	</DestroyAllTappables>
	<DestroyAllTappables_RewardOnBuilding>
		<Action type="playflyby" flybyName="BlastEffect" radius="15" unitScale="0.13" centerOnObject="true" playbackFPS="18" />
		<Action type="reward" save="true" THOH2017_ActivePrizeTrackCurrency="Global::getVariable('THOH_MTRewards_EventCurrency')" suppress_sound="true" />
		<Action type="checkRequirements">
			<Requirement type="reqList" location="THOH2017_Requirements:Tappables_Unlocked" />
			<True>
				<Action type="reward" save="true" THOH2017_CraftingCurrency="Global::getVariable('THOH_MTRewards_CraftCurrency')" suppress_sound="true" />
			</True>
		</Action>
	</DestroyAllTappables_RewardOnBuilding>
	<GuidePanel_Event>
		<Action type="updateVariable" variable="THOH2017_EventHubTabValue" value="0" />
		<Action type="updateVariable" variable="THOH2017_EventGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="THOH2017_GuidePanelsConfig:EventGuide_Config" />
	</GuidePanel_Event>
	<GuidePanel_Crafting>
		<Action type="updateVariable" variable="THOH2017_EventHubTabValue" value="2" />
		<Action type="updateVariable" variable="THOH2017_CraftingGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="THOH2017_GuidePanelsConfig:CraftingGuide_Config" />
	</GuidePanel_Crafting>
	<GuidePanel_Crafting_Center>
		<Action type="updateVariable" variable="THOH2017_CraftingGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="THOH2017_GuidePanelsConfig:CraftingGuide_Config">
			<Extras>
				<Attribute name="ExitButtonScript" value="MiscScripts:ReturnToGameState" />
				<Attribute name="Center" value="true" />
			</Extras>
		</Action>
	</GuidePanel_Crafting_Center>
	<GuidePanel_BeastTamer ignoreHUD="true">
		<Action type="sound" sound="UIButton" />
		<Action type="runScript" script="THOH2017_Scripts:GuidePanel_BeastTamer_NoSound" />
	</GuidePanel_BeastTamer>
	<GuidePanel_BeastTamer_NoSound ignoreHUD="true">
		<Action type="updateVariable" variable="THOH2017_EventHubTabValue" value="1" />
		<Action type="updateVariable" variable="THOH2017_BeastTamerGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="THOH2017_GuidePanelsConfig:BeastTamerGuide_Config" />
	</GuidePanel_BeastTamer_NoSound>
	<GuidePanel_BeastTamer_Center>
		<Action type="updateVariable" variable="THOH2017_BeastTamerGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="THOH2017_GuidePanelsConfig:BeastTamerGuide_Config">
			<Extras>
				<Attribute name="ExitButtonScript" value="MiscScripts:ReturnToGameState" />
				<Attribute name="Center" value="true" />
			</Extras>
		</Action>
	</GuidePanel_BeastTamer_Center>
	<GuidePanel_BossFight ignoreHUD="true">
		<Action type="sound" sound="UIButton" />
		<Action type="runScript" script="THOH2017_Scripts:GuidePanel_BossFight_NoSound" />
	</GuidePanel_BossFight>
	<GuidePanel_BossFight_NoSound ignoreHUD="true">
		<Action type="updateVariable" variable="THOH2017_EventHubTabValue" value="3" />
		<Action type="updateVariable" variable="THOH2017_BossFightGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="THOH2017_GuidePanelsConfig:BossFightGuide_Config" />
	</GuidePanel_BossFight_NoSound>
	<GuidePanel_BossFight_Center>
		<Action type="updateVariable" variable="THOH2017_BossFightGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="THOH2017_GuidePanelsConfig:BossFightGuide_Config">
			<Extras>
				<Attribute name="ExitButtonScript" value="MiscScripts:ReturnToGameState" />
				<Attribute name="Center" value="true" />
			</Extras>
		</Action>
	</GuidePanel_BossFight_Center>
	<PromoteMagicalMysteryBox_Start parallel="true">
		<Action type="recommendation" recType="Promoted" name="THOH2017_Magical_MysteryBox" />
	</PromoteMagicalMysteryBox_Start>
	<PromoteJackOLanternMysteryBox_Start parallel="true">
		<Action type="recommendation" recType="Promoted" name="JackOLantern_MysteryBox" />
	</PromoteJackOLanternMysteryBox_Start>
	<CompleteMontymortRespawn>
		<Action type="completeJob" name="MontymortRespawn" jobLimit="none" />
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    Object::setVariableForAdHoc('Obj_LordMontymort', 'state', 0, 0, false);
                ]]></Program>
		</Action>
		<Action type="gotoState" state="GameState_InGame" />
		<Action type="pantoobject" time="0" building="LordMontymortBossfightDecoration" fakeTouch="false" />
	</CompleteMontymortRespawn>
	<RushBossFightCooldown parallel="true">
		<Action type="sound" sound="UIButton" />
		<Action type="checkRequirements">
			<Requirement type="formula" formula="System::evaluate('Job::MontymortRespawn::Active')" />
			<True>
				<Action type="rushJob" name="MontymortRespawn" jobLimit="none" />
			</True>
			<False>
				<Action type="runScript" script="THOH2017_Scripts:CompleteMontymortRespawn" />
			</False>
		</Action>
	</RushBossFightCooldown>
	<CharmersMarket_Tapped>
		<Action type="if">
			<If>
				<Requirement type="reqList" location="THOH2017_Requirements:Crafting_Unlocked" />
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:Tab_Crafting" />
				</Then>
			</If>
		</Action>
	</CharmersMarket_Tapped>
	<Spellementary_Tapped>
		<Action type="if">
			<If>
				<Requirement type="reqList" location="THOH2017_Requirements:PrizeTrack_Unlocked" />
				<Then>
					<Action type="runScript" script="THOH2017_Scripts:Tab_PrizeTrack" />
				</Then>
			</If>
		</Action>
	</Spellementary_Tapped>
	<GoTo_CatBus parallel="true">
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="CatBus" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="CatBus" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="CatBus" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoTo_CatBus>
	<GoTo_SuffoclockOfSandyDoom>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="SuffoclockOfSandyDoom" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="SuffoclockOfSandyDoom" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="SuffoclockOfSandyDoom" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoTo_SuffoclockOfSandyDoom>
	<GoTo_RoyalMyPod>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="RoyalMyPod" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="RoyalMyPod" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="RoyalMyPod" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoTo_RoyalMyPod>
	<GoTo_FairyFields>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="FairyFields" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="FairyFields" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="FairyFields" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoTo_FairyFields>
	<GoTo_MusicAutomaton>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="MusicAutomaton" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="MusicAutomaton" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="MusicAutomaton" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoTo_MusicAutomaton>
	<GoTo_GiantCrystalBall>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="GiantCrystalBall" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="GiantCrystalBall" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="GiantCrystalBall" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoTo_GiantCrystalBall>
	<GoTo_MagicTower>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="MagicTower" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="MagicTower" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="MagicTower" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoTo_MagicTower>
	<GoTo_Crawl>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="CrawlBarTrollLair" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="CrawlBarTrollLair" inventory="true" />
					</True>
					<False>
						<Action type="checkRequirements">
							<Requirement type="building owned" building="CrawlBarTrollLair" />
							<True>
								<Action type="pantoobject" building="CrawlBarTrollLair" />
							</True>
							<False>
								<Action type="runScript" script="THOH2017_Scripts:Tab_PrizeTrack" />
							</False>
						</Action>
					</False>
				</Action>
			</True>
			<False>
				<Action type="gotoState" state="GameState_InGame" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_Crawl>
	<GoTo_FantasticalBeastarium>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="FantasticalBeastarium" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="FantasticalBeastarium" inventory="true" />
					</True>
					<False>
						<Action type="checkRequirements">
							<Requirement type="building owned" building="FantasticalBeastarium" />
							<True>
								<Action type="pantoobject" building="FantasticalBeastarium" />
							</True>
							<False>
								<Action type="runScript" script="THOH2017_Scripts:Tab_PrizeTrack" />
							</False>
						</Action>
					</False>
				</Action>
			</True>
			<False>
				<Action type="gotoState" state="GameState_InGame" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_FantasticalBeastarium>
	<GoTo_SpellementaryDormitoryTower>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="SpellementaryDormitoryTower" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="SpellementaryDormitoryTower" inventory="true" />
					</True>
					<False>
						<Action type="checkRequirements">
							<Requirement type="building owned" building="SpellementaryDormitoryTower" />
							<True>
								<Action type="pantoobject" building="SpellementaryDormitoryTower" />
							</True>
							<False>
								<Action type="actionSequence" script="THOH2017_Scripts:Tab_Crafting_ScrollTo">
									<FormatToken key="ItemToScrollTo" value="BLD_SpellementaryDormitoryTower_name" />
								</Action>
							</False>
						</Action>
					</False>
				</Action>
			</True>
			<False>
				<Action type="gotoState" state="GameState_InGame" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_SpellementaryDormitoryTower>
	<GoTo_KearneymonLair>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="KearneymonLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="KearneymonLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="KearneymonLair" />
						</Extras>
					</Action>
				</Then>
			</Else>
		</Action>
	</GoTo_KearneymonLair>
	<GoTo_BurnsDragonLair>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="BurnsDragonLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="BurnsDragonLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="BurnsDragonLair" />
						</Extras>
					</Action>
				</Then>
			</Else>
		</Action>
	</GoTo_BurnsDragonLair>
	<GoTo_WiggopsLair>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="WiggopsLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="WiggopsLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="WiggopsLair" />
						</Extras>
					</Action>
				</Then>
			</Else>
		</Action>
	</GoTo_WiggopsLair>
	<GoTo_CrawlBarTrollLair>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="CrawlBarTrollLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="CrawlBarTrollLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="CrawlBarTrollLair" />
						</Extras>
					</Action>
				</Then>
			</Else>
		</Action>
	</GoTo_CrawlBarTrollLair>
	<GoTo_LewdBarTrollLair>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="LewdBarTrollLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="LewdBarTrollLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="LewdBarTrollLair" />
						</Extras>
					</Action>
				</Then>
			</Else>
		</Action>
	</GoTo_LewdBarTrollLair>
	<GoTo_BarfyBarTrollLair>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="BarfyBarTrollLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="BarfyBarTrollLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="BarfyBarTrollLair" />
						</Extras>
					</Action>
				</Then>
			</Else>
		</Action>
	</GoTo_BarfyBarTrollLair>
	<GoTo_BullyVernLair>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="BullyVernLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="BullyVernLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="BullyVernLair" />
						</Extras>
					</Action>
				</Then>
			</Else>
		</Action>
	</GoTo_BullyVernLair>
	<GoTo_TreestacheLair>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="TreestachesLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="TreestachesLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="TreestachesLair" />
						</Extras>
					</Action>
				</Then>
			</Else>
		</Action>
	</GoTo_TreestacheLair>
	<GoTo_Barfy>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="BarfyBarTrollLair" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="BarfyBarTrollLair" inventory="true" />
					</True>
					<False>
						<Action type="checkRequirements">
							<Requirement type="building owned" building="BarfyBarTrollLair" />
							<True>
								<Action type="pantoobject" character="Barfy" />
							</True>
							<False>
								<Action type="runScript" script="THOH2017_Scripts:Tab_PrizeTrack" />
							</False>
						</Action>
					</False>
				</Action>
			</True>
			<False>
				<Action type="gotoState" state="GameState_InGame" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_Barfy>
	<GoToWiggopsLairInStore>
		<Action type="focusOnMenuItem" itemName="WiggopsLair" />
	</GoToWiggopsLairInStore>
	<GoToTreestachesLairInStore>
		<Action type="focusOnMenuItem" itemName="TreestachesLair" />
	</GoToTreestachesLairInStore>
	<THOH2017_Prestige_Act1>
		<Action type="reward">
			<Item type="consumable" name="THOH2017_Prestige_Act1" useImmediately="true" />
		</Action>
	</THOH2017_Prestige_Act1>
	<THOH2017_Prestige_Act2>
		<Action type="reward">
			<Item type="consumable" name="THOH2017_Prestige_Act2" useImmediately="true" />
		</Action>
	</THOH2017_Prestige_Act2>
	<THOH2017_Prestige_Act3>
		<Action type="reward">
			<Item type="consumable" name="THOH2017_Prestige_Act3" useImmediately="true" />
		</Action>
	</THOH2017_Prestige_Act3>
	<FakeLordMontymort_Tapped ignoreHUD="true">
		<Action type="actionSequence" script="THOH2017_Scripts:Tab_BossFight" />
	</FakeLordMontymort_Tapped>
	<SayHisNameSayHisName3Obj1Done ignoreHUD="true">
		<Action type="runScript" script="MiscScripts:ReturnToGameState" />
		<Action type="if">
			<If>
				<Requirement type="character" name="FakeLordMontymort" not="true" />
				<Then>
					<Action type="createobject" name="FakeLordMontymort" save="true" showUnlock="false" panCamera="true" building="LordMontymortBossfightDecoration" spawnLocator="LordMontymortIdlePos" />
				</Then>
			</If>
		</Action>
	</SayHisNameSayHisName3Obj1Done>
	<Tab_SessionsGuidePanel>
		<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
		<Action type="actionSequence" script="THOH2017_Scripts:GuidePanel_Event" />
	</Tab_SessionsGuidePanel>
	<GoTo_SummonKearneymon ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_KearneymonBeast', 'state') == 2" />
				<Then>
					<Action type="if">
						<If>
							<Requirement type="formula" formula="#program;                             var characterInstance = Land::getFirstInstanceOfObject(Character::find('Kearneymon'));                             if(isNULL(characterInstance))                             {                                 return false;                             }                                                          var currentJob = Character::getCurrentJobInstance(characterInstance);                             if(isNULL(currentJob))                             {                                 return true;                             }                                                          return false;                             " />
							<Then>
								<Action type="startJob" name="ReleaseKearneymon" farmBuilding="KearneymonLair" />
							</Then>
						</If>
					</Action>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="KearneymonLair" />
							<Attribute name="GoToFarmMode" value="true" />
						</Extras>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184008" />
					<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
					<Action type="actionSequence" script="THOH2017_Scripts:GotoSpecificBeastCaptureUI" parseOnDemand="true" />
				</Then>
			</Else>
		</Action>
	</GoTo_SummonKearneymon>
	<GoTo_SummonWiggops ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_WiggopsBeast', 'state') == 2" />
				<Then>
					<Action type="if">
						<If>
							<Requirement type="formula" formula="#program;                             var characterInstance = Land::getFirstInstanceOfObject(Character::find('Wiggops'));                             if(isNULL(characterInstance))                             {                                 return false;                             }                                                          var currentJob = Character::getCurrentJobInstance(characterInstance);                             if(isNULL(currentJob))                             {                                 return true;                             }                                                          return false;                             " />
							<Then>
								<Action type="startJob" name="ReleaseWiggops" farmBuilding="WiggopsLair" />
							</Then>
						</If>
					</Action>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="WiggopsLair" />
							<Attribute name="GoToFarmMode" value="true" />
						</Extras>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184012" />
					<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
					<Action type="actionSequence" script="THOH2017_Scripts:GotoSpecificBeastCaptureUI" parseOnDemand="true" />
				</Then>
			</Else>
		</Action>
	</GoTo_SummonWiggops>
	<GoTo_SummonCrawl ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_CrawlBeast', 'state') == 2" />
				<Then>
					<Action type="if">
						<If>
							<Requirement type="formula" formula="#program;                             var characterInstance = Land::getFirstInstanceOfObject(Character::find('Crawl'));                             if(isNULL(characterInstance))                             {                                 return false;                             }                                                          var currentJob = Character::getCurrentJobInstance(characterInstance);                             if(isNULL(currentJob))                             {                                 return true;                             }                                                          return false;                             " />
							<Then>
								<Action type="startJob" name="ReleaseCrawl" farmBuilding="CrawlBarTrollLair" />
							</Then>
						</If>
					</Action>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="CrawlBarTrollLair" />
							<Attribute name="GoToFarmMode" value="true" />
						</Extras>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184010" />
					<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
					<Action type="actionSequence" script="THOH2017_Scripts:GotoSpecificBeastCaptureUI" parseOnDemand="true" />
				</Then>
			</Else>
		</Action>
	</GoTo_SummonCrawl>
	<GoTo_SummonLewd ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_LewdBeast', 'state') == 2" />
				<Then>
					<Action type="if">
						<If>
							<Requirement type="formula" formula="#program;                             var characterInstance = Land::getFirstInstanceOfObject(Character::find('Lewd'));                             if(isNULL(characterInstance))                             {                                 return false;                             }                                                          var currentJob = Character::getCurrentJobInstance(characterInstance);                             if(isNULL(currentJob))                             {                                 return true;                             }                                                          return false;                             " />
							<Then>
								<Action type="startJob" name="ReleaseLewd" farmBuilding="LewdBarTrollLair" />
							</Then>
						</If>
					</Action>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="LewdBarTrollLair" />
							<Attribute name="GoToFarmMode" value="true" />
						</Extras>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184009" />
					<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
					<Action type="actionSequence" script="THOH2017_Scripts:GotoSpecificBeastCaptureUI" parseOnDemand="true" />
				</Then>
			</Else>
		</Action>
	</GoTo_SummonLewd>
	<GoTo_SummonBarfy ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_BarfyBeast', 'state') == 2" />
				<Then>
					<Action type="if">
						<If>
							<Requirement type="formula" formula="#program;                             var characterInstance = Land::getFirstInstanceOfObject(Character::find('Barfy'));                             if(isNULL(characterInstance))                             {                                 return false;                             }                                                          var currentJob = Character::getCurrentJobInstance(characterInstance);                             if(isNULL(currentJob))                             {                                 return true;                             }                                                          return false;                             " />
							<Then>
								<Action type="startJob" name="ReleaseBarfy" farmBuilding="BarfyBarTrollLair" />
							</Then>
						</If>
					</Action>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="BarfyBarTrollLair" />
							<Attribute name="GoToFarmMode" value="true" />
						</Extras>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184011" />
					<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
					<Action type="actionSequence" script="THOH2017_Scripts:GotoSpecificBeastCaptureUI" parseOnDemand="true" />
				</Then>
			</Else>
		</Action>
	</GoTo_SummonBarfy>
	<GoTo_SummonBullyVern ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_BullyVernBeast', 'state') == 2" />
				<Then>
					<Action type="if">
						<If>
							<Requirement type="formula" formula="#program;                             var characterInstance = Land::getFirstInstanceOfObject(Character::find('BullyVern'));                             if(isNULL(characterInstance))                             {                                 return false;                             }                                                          var currentJob = Character::getCurrentJobInstance(characterInstance);                             if(isNULL(currentJob))                             {                                 return true;                             }                                                          return false;                             " />
							<Then>
								<Action type="startJob" name="ReleaseBullyVern" farmBuilding="BullyVernLair" />
							</Then>
						</If>
					</Action>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="BullyVernLair" />
							<Attribute name="GoToFarmMode" value="true" />
						</Extras>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184013" />
					<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
					<Action type="actionSequence" script="THOH2017_Scripts:GotoSpecificBeastCaptureUI" parseOnDemand="true" />
				</Then>
			</Else>
		</Action>
	</GoTo_SummonBullyVern>
	<GoTo_SummonBurnsDragon ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_BurnsDragonBeast', 'state') == 2" />
				<Then>
					<Action type="if">
						<If>
							<Requirement type="formula" formula="#program;                             var characterInstance = Land::getFirstInstanceOfObject(Character::find('BurnsDragon'));                             if(isNULL(characterInstance))                             {                                 return false;                             }                                                          var currentJob = Character::getCurrentJobInstance(characterInstance);                             if(isNULL(currentJob))                             {                                 return true;                             }                                                          return false;                             " />
							<Then>
								<Action type="startJob" name="ReleaseBurnsDragon" farmBuilding="BurnsDragonLair" />
							</Then>
						</If>
					</Action>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="BurnsDragonLair" />
							<Attribute name="GoToFarmMode" value="true" />
						</Extras>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="184016" />
					<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
					<Action type="actionSequence" script="THOH2017_Scripts:GotoSpecificBeastCaptureUI" parseOnDemand="true" />
				</Then>
			</Else>
		</Action>
	</GoTo_SummonBurnsDragon>
	<GoTo_SummonTreestache ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="formula" formula="ObjectVars::getVariableInt('Obj_TreestacheBeast', 'state') == 2" />
				<Then>
					<Action type="if">
						<If>
							<Requirement type="formula" formula="#program;                             var characterInstance = Land::getFirstInstanceOfObject(Character::find('Treestache'));                             if(isNULL(characterInstance))                             {                             return false;                             }                                                          var currentJob = Character::getCurrentJobInstance(characterInstance);                             if(isNULL(currentJob))                             {                             return true;                             }                                                          return false;                             " />
							<Then>
								<Action type="startJob" name="ReleaseTreestache" farmBuilding="TreestachesLair" />
							</Then>
						</If>
					</Action>
					<Action type="gotoState" state="GameState_BuildingSelected">
						<Extras>
							<Attribute name="BuildingName" value="TreestachesLair" />
							<Attribute name="GoToFarmMode" value="true" />
						</Extras>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="updateVariable" disableEvents="true" variable="CurrentBeastID" value="190000" />
					<Action type="setVariable" intVariable="THOH2017_EventHubTabValue" intValue="1" />
					<Action type="actionSequence" script="THOH2017_Scripts:GotoSpecificBeastCaptureUI" parseOnDemand="true" />
				</Then>
			</Else>
		</Action>
	</GoTo_SummonTreestache>
	<DCS_Reset_MysticalPests>
		<Action type="updateVariable" variable="THOH2017_DCS_MysticalPests" value="0" />
	</DCS_Reset_MysticalPests>
	<DCS_Reset_MysticalPests_Friends>
		<Action type="updateVariable" variable="THOH2017_DCS_MysticalPests_Friends" value="0" />
	</DCS_Reset_MysticalPests_Friends>
	<StoreNotification_SqueakyVoicePeasant>
		<Action type="checkRequirements">
			<Requirement type="character" name="SqueakyVoiceTeen" unlockedskin="SqueakyVoicePeasant" />
			<False>
				<Action type="notificationLarge" title="CHA_SqueakyVoicePeasant_name" text="CHA_SqueakyVoicePeasant_upsell_desc" icon="ICO_PRIZ_THOH2017_SVP_LG" button="UI_OK" />
				<Action type="checkRequirements">
					<Requirement type="characterunlocked" name="SqueakyVoiceTeen" />
					<True>
						<Action type="focusOnMenuItem" itemName="75DonutsSqueakyVoicedTeenSkinManaged" menuCategory="Currency" />
					</True>
					<False>
						<Action type="focusOnMenuItem" itemName="300DonutsSqueakyVoicedTeenManaged" menuCategory="Currency" />
					</False>
				</Action>
			</False>
		</Action>
	</StoreNotification_SqueakyVoicePeasant>
	<StoreNotification_WalkingKwikEMart>
		<Action type="checkRequirements">
			<Requirement type="building" building="WalkingKwikEMart" />
			<False>
				<Action type="notificationLarge" title="BLD_WalkingKwikEMart_name" text="BLD_WalkingKwikEMart_upsell_desc" icon="ICO_STOR_Single_THOH2017_WalkingKwikEMart" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="WalkingKwikEMart" menuCategory="THOH2017" />
			</False>
		</Action>
	</StoreNotification_WalkingKwikEMart>
	<StoreNotification_SpellementaryMessHall>
		<Action type="checkRequirements">
			<Requirement type="building" building="SpellementaryMessHall" />
			<False>
				<Action type="notificationLarge" title="BLD_SpellementaryMessHall_name" text="BLD_SpellementaryMessHall_upsell_desc" icon="SpellementaryMessHall_Menu" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="SpellementaryMessHall" menuCategory="THOH2017" />
			</False>
		</Action>
	</StoreNotification_SpellementaryMessHall>
	<StoreNotification_MysticalSelfDefense>
		<Action type="checkRequirements">
			<Requirement type="building" building="MysticalSelfDefense" />
			<False>
				<Action type="notificationLarge" title="BLD_MysticalSelfDefense_name" text="BLD_MysticalSelfDefense_upsell_desc" icon="ICO_PRIZ_THOH2017_BlackMagicHall_LG" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="MysticalSelfDefense" menuCategory="THOH2017" />
			</False>
		</Action>
	</StoreNotification_MysticalSelfDefense>
	<StoreNotification_ElfHotel>
		<Action type="checkRequirements">
			<Requirement type="building" building="ElfHotel" />
			<False>
				<Action type="notificationLarge" title="BLD_ElfHotel_name" text="BLD_ElfHotel_upsell_desc" icon="ElfHotel_Menu" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="ElfHotel" menuCategory="THOH2017" />
			</False>
		</Action>
	</StoreNotification_ElfHotel>
	<StoreNotification_EvilShopkeeper>
		<Action type="checkRequirements">
			<Requirement type="characterunlocked" name="EvilShopkeeper" />
			<False>
				<Action type="notificationLarge" title="CHA_EvilShopkeeper_name" text="CHA_EvilShopkeeper_upsell_desc" icon="ICO_PRIZ_THOH2017_EvilShopKeeper_LG" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="EvilShopkeeper" menuCategory="THOH2017" />
			</False>
		</Action>
	</StoreNotification_EvilShopkeeper>
	<StoreNotification_JackOLanternMysteryBox>
		<Action type="checkRequirements">
			<Requirement type="conditional" logic="AND" not="true">
				<Requirement type="conditional" logic="OR">
					<Requirement type="character" name="Milhouse" unlockedskin="RadioactiveMilhouse" />
					<Requirement type="consumableCount" name="RadioactiveMilhouse" requireCountMin="1" />
				</Requirement>
				<Requirement type="conditional" logic="OR">
					<Requirement type="character" name="Luann" unlockedskin="SquirrelLuann" />
					<Requirement type="consumableCount" name="SquirrelLuann" requireCountMin="1" />
				</Requirement>
				<Requirement type="conditional" logic="OR">
					<Requirement type="character" name="Kirk" unlockedskin="AcornKirk" />
					<Requirement type="consumableCount" name="AcornKirk" requireCountMin="1" />
				</Requirement>
				<Requirement type="conditional" logic="OR">
					<Requirement type="character" name="Ned" unlockedskin="DevilFlanders" />
					<Requirement type="consumableCount" name="DevilFlanders" requireCountMin="1" />
				</Requirement>
				<Requirement type="building owned" building="SpiderWillie" />
				<Requirement type="building owned" building="NightmarePile" />
				<Requirement type="building owned" building="SepulchreOfEvil" />
				<Requirement type="building owned" building="DonutTortureDevice" />
				<Requirement type="building owned" building="TheGrandPumpkin" />
				<Requirement type="building owned" building="MeteorEgg" />
			</Requirement>
			<True>
				<Action type="notificationLarge" title="CON_JackOLantern_MysteryBox_name" text="CON_JackOLantern_MysteryBox_upsell_desc" icon="ICO_STOR_Single_THOH2017_MysteryBox_Halloween" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="JackOLantern_MysteryBox" menuCategory="THOH2017" />
			</True>
		</Action>
	</StoreNotification_JackOLanternMysteryBox>
	<StoreNotification_MagicPalace>
		<Action type="checkRequirements">
			<Requirement type="building" building="MagicPalace" />
			<False>
				<Action type="notificationLarge" title="BLD_MagicPalace_name" text="BLD_MagicPalace_upsell_desc" icon="ICO_PRIZ_THOH2017_MagicPalace_LG" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="MagicPalace" menuCategory="THOH2017" />
			</False>
		</Action>
	</StoreNotification_MagicPalace>
	<StoreNotification_DepartmentOfMagicalVehicles>
		<Action type="checkRequirements">
			<Requirement type="building" building="DepartmentOfMagicalVehicles" />
			<False>
				<Action type="notificationLarge" title="BLD_DepartmentOfMagicalVehicles_name" text="BLD_DepartmentOfMagicalVehicles_upsell_desc" icon="DeptOfMagicalVehicles_Menu" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="DepartmentOfMagicalVehicles" menuCategory="THOH2017" />
			</False>
		</Action>
	</StoreNotification_DepartmentOfMagicalVehicles>
	<StoreNotification_CatBus>
		<Action type="checkRequirements">
			<Requirement type="building" building="CatBus" />
			<False>
				<Action type="notificationLarge" title="BLD_CatBus_name" text="BLD_CatBus_upsell_desc" icon="OttoCatBus_Menu" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="CatBus" menuCategory="THOH2017" />
			</False>
		</Action>
	</StoreNotification_CatBus>
	<StoreNotification_MysticalPests>
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="characterunlocked" name="RedGoblin" />
				<Requirement type="characterunlocked" name="BlueGoblin" />
			</Requirements>
			<False>
				<Action type="notificationLarge" title="CON_MysticalPestsBundle_name" text="CON_MysticalPestsBundle_upsell_desc" icon="ICO_THOH2017_PopupMysticalPests" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="MysticalPestsBundle" />
			</False>
		</Action>
	</StoreNotification_MysticalPests>
	<RewardSorcererFrink>
		<Action type="checkRequirements">
			<Requirement type="character" name="Frink" unlockedskin="SorcererFrink" not="true" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="Frink" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="rewardWithPlaceStore" attributes="PinPals_MenuConfig:RewardWithPlaceStore">
							<Item type="consumable" name="SorcererFrink" />
						</Action>
					</True>
					<False>
						<Action type="reward">
							<Item type="consumable" name="SorcererFrink" useImmediately="true" />
						</Action>
					</False>
				</Action>
			</True>
		</Action>
	</RewardSorcererFrink>
	<RoyalMyPodAnimation_Toggle>
		<Action type="setObjectVariable" variable="State" value="mod(Object::State+1, 3)" asExpression="true" allowOrphan="false" />
		<Action type="if">
			<If expression="Object::State == 0">
				<Then>
					<Action type="setObjectVariable" variable="ActiveOut" value="1" asExpression="true" allowOrphan="false" />
				</Then>
			</If>
			<ElseIf expression="Object::State == 2">
				<Then>
					<Action type="setObjectVariable" variable="Active01" value="1" asExpression="true" allowOrphan="false" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="setObjectVariable" variable="ActiveIn" value="1" asExpression="true" allowOrphan="false" />
				</Then>
			</Else>
		</Action>
	</RoyalMyPodAnimation_Toggle>
	<RoyalMyPodAnimation_Active02_Done parallel="true" ignoreHUD="true">
		<Action type="setObjectVariable" variable="Active01" value="0" asExpression="true" allowOrphan="false" />
	</RoyalMyPodAnimation_Active02_Done>
	<AutoConsumeWizardBartSkin_End parallel="true">
		<Action type="scheduleScript" mode="create" script="THOH2017_Scripts:AutoConsumeWizardBartSkin_Delayed" relativeTime="2s" localLandOnly="true" shouldSave="true" />
	</AutoConsumeWizardBartSkin_End>
	<AutoConsumeWizardBartSkin_Delayed parallel="true">
		<Action type="consumable" consumable="WizardBart" fromInventory="true" />
	</AutoConsumeWizardBartSkin_Delayed>
	<AutoConsumeMagicActMilhouseSkin_End parallel="true">
		<Action type="scheduleScript" mode="create" script="THOH2017_Scripts:AutoConsumeMagicActMilhouseSkin_Delayed" relativeTime="2s" localLandOnly="true" shouldSave="true" />
	</AutoConsumeMagicActMilhouseSkin_End>
	<AutoConsumeMagicActMilhouseSkin_Delayed parallel="true">
		<Action type="consumable" consumable="MagicActMilhouse" fromInventory="true" />
	</AutoConsumeMagicActMilhouseSkin_Delayed>
	<CompleteJobKearneymon>
		<Action type="completeJob" name="KearneymonGetCaptured" jobLimit="none" />
		<Action type="completeJob" name="KearneymonGetEnchanted" jobLimit="none" />
	</CompleteJobKearneymon>
	<CompleteJobWiggops>
		<Action type="completeJob" name="WiggopsGetCaptured" jobLimit="none" />
		<Action type="completeJob" name="WiggopsGetEnchanted" jobLimit="none" />
	</CompleteJobWiggops>
	<CompleteJobLewd>
		<Action type="completeJob" name="LewdGetCaptured" jobLimit="none" />
		<Action type="completeJob" name="LewdGetEnchanted" jobLimit="none" />
	</CompleteJobLewd>
	<CompleteJobCrawl>
		<Action type="completeJob" name="CrawlGetCaptured" jobLimit="none" />
		<Action type="completeJob" name="CrawlGetEnchanted" jobLimit="none" />
	</CompleteJobCrawl>
	<CompleteJobBarfy>
		<Action type="completeJob" name="BarfyGetCaptured" jobLimit="none" />
		<Action type="completeJob" name="BarfyGetEnchanted" jobLimit="none" />
	</CompleteJobBarfy>
	<CompleteJobBullyVern>
		<Action type="completeJob" name="BullyVernGetCaptured" jobLimit="none" />
		<Action type="completeJob" name="BullyVernGetEnchanted" jobLimit="none" />
	</CompleteJobBullyVern>
	<CompleteJobBurnsDragon>
		<Action type="completeJob" name="BurnsDragonGetCaptured" jobLimit="none" />
		<Action type="completeJob" name="BurnsDragonGetEnchanted" jobLimit="none" />
	</CompleteJobBurnsDragon>
	<CompleteJobTreestache>
		<Action type="completeJob" name="TreestacheGetCaptured" jobLimit="none" />
		<Action type="completeJob" name="TreestacheGetEnchanted" jobLimit="none" />
	</CompleteJobTreestache>
	<CompleteJobLordMontymort>
		<Action type="completeJob" name="MontymortGetBattledCharacter" jobLimit="none" />
	</CompleteJobLordMontymort>
	<OnAngelicaButtonLost parallel="true">
		<Action type="program">
			<Program><![CDATA[#program;
                    var scriptCharacterName = 'AngelicaButton';
                    var characterDamage = ObjectVars::getVariableDouble('Obj_AngelicaButtonBeastHunter', 'bossDamage');
                    var characterEnchantMana = ObjectVars::getVariableDouble('Obj_AngelicaButtonBeastHunter', 'enchantManaDamage');
                    var characterCaptureMana = ObjectVars::getVariableDouble('Obj_AngelicaButtonBeastHunter', 'captureManaDamage');
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':UpdateBeastRewardFromCharacterLost'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</OnAngelicaButtonLost>
	<OnTheGreatRaymondoLost>
		<Action type="program">
			<Program><![CDATA[#program;
                    var scriptCharacterName = 'TheGreatRaymondo';
                    var characterDamage = ObjectVars::getVariableDouble('Obj_TheGreatRaymondoBeastHunter', 'bossDamage');
                    var characterEnchantMana = ObjectVars::getVariableDouble('Obj_TheGreatRaymondoBeastHunter', 'enchantManaDamage');
                    var characterCaptureMana = ObjectVars::getVariableDouble('Obj_TheGreatRaymondoBeastHunter', 'captureManaDamage');
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':UpdateBeastRewardFromCharacterLost'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</OnTheGreatRaymondoLost>
	<OnGreystashLost>
		<Action type="program">
			<Program><![CDATA[#program;
                    var scriptCharacterName = 'Greystash';
                    var characterDamage = ObjectVars::getVariableDouble('Obj_GreystashBeastHunter', 'bossDamage');
                    var characterEnchantMana = ObjectVars::getVariableDouble('Obj_GreystashBeastHunter', 'enchantManaDamage');
                    var characterCaptureMana = ObjectVars::getVariableDouble('Obj_GreystashBeastHunter', 'captureManaDamage');
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':UpdateBeastRewardFromCharacterLost'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</OnGreystashLost>
	<OnFrinkLost>
		<Action type="program">
			<Program><![CDATA[#program;
                    var scriptCharacterName = 'Frink';
                    var characterDamage = ObjectVars::getVariableDouble('Obj_SorcererFrinkBeastHunter', 'bossDamage');
                    var characterEnchantMana = ObjectVars::getVariableDouble('Obj_SorcererFrinkBeastHunter', 'enchantManaDamage');
                    var characterCaptureMana = ObjectVars::getVariableDouble('Obj_SorcererFrinkBeastHunter', 'captureManaDamage');
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':UpdateBeastRewardFromCharacterLost'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</OnFrinkLost>
	<OnBartLost>
		<Action type="program">
			<Program><![CDATA[#program;
                    var scriptCharacterName = 'Bart';
                    var characterDamage = ObjectVars::getVariableDouble('Obj_WizardBartBeastHunter', 'bossDamage');
                    var characterEnchantMana = ObjectVars::getVariableDouble('Obj_WizardBartBeastHunter', 'enchantManaDamage');
                    var characterCaptureMana = ObjectVars::getVariableDouble('Obj_WizardBartBeastHunter', 'captureManaDamage');
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':UpdateBeastRewardFromCharacterLost'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</OnBartLost>
	<OnLisaLost>
		<Action type="program">
			<Program><![CDATA[#program;
                    var scriptCharacterName = 'Lisa';
                    var characterDamage = ObjectVars::getVariableDouble('Obj_WizardLisaBeastHunter', 'bossDamage');
                    var characterEnchantMana = ObjectVars::getVariableDouble('Obj_WizardLisaBeastHunter', 'enchantManaDamage');
                    var characterCaptureMana = ObjectVars::getVariableDouble('Obj_WizardLisaBeastHunter', 'captureManaDamage');
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':UpdateBeastRewardFromCharacterLost'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</OnLisaLost>
	<OnMilhouseLost>
		<Action type="program">
			<Program><![CDATA[#program;
                    var scriptCharacterName = 'Milhouse';
                    var characterDamage = ObjectVars::getVariableDouble('Obj_MagicMilhouseBeastHunter', 'bossDamage');
                    var characterEnchantMana = ObjectVars::getVariableDouble('Obj_MagicMilhouseBeastHunter', 'enchantManaDamage');
                    var characterCaptureMana = ObjectVars::getVariableDouble('Obj_MagicMilhouseBeastHunter', 'captureManaDamage');
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':UpdateBeastRewardFromCharacterLost'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</OnMilhouseLost>
	<OnMartinLost>
		<Action type="program">
			<Program><![CDATA[#program;
                    var scriptCharacterName = 'Martin';
                    var characterDamage = ObjectVars::getVariableDouble('Obj_WizardMartinBeastHunter', 'bossDamage');
                    var characterEnchantMana = ObjectVars::getVariableDouble('Obj_WizardMartinBeastHunter', 'enchantManaDamage');
                    var characterCaptureMana = ObjectVars::getVariableDouble('Obj_WizardMartinBeastHunter', 'captureManaDamage');
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':UpdateBeastRewardFromCharacterLost'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</OnMartinLost>
	<OnUnicornWizardLost>
		<Action type="program">
			<Program><![CDATA[#program;
                    var scriptCharacterName = 'UnicornWizard';
                    var characterDamage = ObjectVars::getVariableDouble('Obj_UnicornWizardBeastHunter', 'bossDamage');
                    var characterEnchantMana = ObjectVars::getVariableDouble('Obj_UnicornWizardBeastHunter', 'enchantManaDamage');
                    var characterCaptureMana = ObjectVars::getVariableDouble('Obj_UnicornWizardBeastHunter', 'captureManaDamage');
                    
                    var hook = 'THOH2017_Hooks';
                    Hook::load(hook,false);
                    var compiledHook = Parser::compile(Hook::toString(hook+':UpdateBeastRewardFromCharacterLost'));
                    Hook::unload(hook,false);
                    
                    Parser::evaluate(compiledHook);
                ]]></Program>
		</Action>
	</OnUnicornWizardLost>
	<GoToHomer>
		<Action type="gotoState" state="GameState_InGame" />
		<Action type="pantoobject" character="Homer" checkOtherLands="true" fakeTouch="true" time="0" />
	</GoToHomer>
	<OldEnglishStation_Tapped>
		<Action type="sound" sound="MagicStation_Tap" />
	</OldEnglishStation_Tapped>
	<ShowPuertoRicoPopup>
		<Action type="miniEventPanel">
			<Attribute name="config">
				<AttributeSet name="playButtonText">
					<Attribute name="text" value="UI_CLOSE" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonTextHL">
					<Attribute name="text" value="UI_CLOSE" localise="true" />
				</AttributeSet>
				<AttributeSet name="panel">
					<Attribute name="image" value="BSE_Unido" />
				</AttributeSet>
				<AttributeSet name="playButton">
					<Attribute name="color" value="0091F1FF" />
				</AttributeSet>
			</Attribute>
		</Action>
		<Action type="setVariable" boolVariable="PuertoRico_Complete" boolValue="true" />
	</ShowPuertoRicoPopup>
	<SwitchAnimKearneymon>
		<Action type="setVariable" intVariable="KearneymonAnimToggle" intValue="mod(KearneymonAnimToggle+1,2)" />
	</SwitchAnimKearneymon>
	<SwitchAnimLewd>
		<Action type="setVariable" intVariable="LewdAnimToggle" intValue="mod(LewdAnimToggle+1,2)" />
	</SwitchAnimLewd>
	<SwitchAnimCrawl>
		<Action type="setVariable" intVariable="CrawlAnimToggle" intValue="mod(CrawlAnimToggle+1,2)" />
	</SwitchAnimCrawl>
	<SwitchAnimBarfy>
		<Action type="setVariable" intVariable="BarfyAnimToggle" intValue="mod(BarfyAnimToggle+1,2)" />
	</SwitchAnimBarfy>
	<SwitchAnimWiggops>
		<Action type="setVariable" intVariable="WiggopsAnimToggle" intValue="mod(WiggopsAnimToggle+1,2)" />
	</SwitchAnimWiggops>
	<SwitchAnimBullyVern>
		<Action type="setVariable" intVariable="BullyVernAnimToggle" intValue="mod(BullyVernAnimToggle+1,2)" />
	</SwitchAnimBullyVern>
	<SwitchAnimTreestache>
		<Action type="setVariable" intVariable="TreestacheAnimToggle" intValue="mod(TreestacheAnimToggle+1,2)" />
	</SwitchAnimTreestache>
	<SwitchAnimBurnsDragon>
		<Action type="setVariable" intVariable="BurnsDragonAnimToggle" intValue="mod(BurnsDragonAnimToggle+1,2)" />
	</SwitchAnimBurnsDragon>
	<CauldronMessage>
		<Action type="setVariable" boolVariable="THOH2017_CauldronMessage" boolValue="false" />
		<Action type="message" text="UI_THOH2017_CauldronMessage" />
	</CauldronMessage>
	<MysticalPest_Tapped parallel="true">
		<Action type="anim-play" animation="Tap_2" />
	</MysticalPest_Tapped>
	<Kearneymon_CapturePermJobStart>
		<Action type="program">
			<Program><![CDATA[#program;
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    Object::setVariableForAdHoc('Obj_KearneymonCharacterJobs', name, name, 0, false);
                ]]></Program>
		</Action>
	</Kearneymon_CapturePermJobStart>
	<Wiggops_CapturePermJobStart>
		<Action type="program">
			<Program><![CDATA[#program;
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    Object::setVariableForAdHoc('Obj_WiggopsCharacterJobs', name, name, 0, false);
                ]]></Program>
		</Action>
	</Wiggops_CapturePermJobStart>
	<Lewd_CapturePermJobStart>
		<Action type="program">
			<Program><![CDATA[#program;
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    Object::setVariableForAdHoc('Obj_LewdCharacterJobs', name, name, 0, false);
                ]]></Program>
		</Action>
	</Lewd_CapturePermJobStart>
	<Crawl_CapturePermJobStart>
		<Action type="program">
			<Program><![CDATA[#program;
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    Object::setVariableForAdHoc('Obj_CrawlCharacterJobs', name, name, 0, false);
                ]]></Program>
		</Action>
	</Crawl_CapturePermJobStart>
	<Barfy_CapturePermJobStart>
		<Action type="program">
			<Program><![CDATA[#program;
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    Object::setVariableForAdHoc('Obj_BarfyCharacterJobs', name, name, 0, false);
                ]]></Program>
		</Action>
	</Barfy_CapturePermJobStart>
	<BullyVern_CapturePermJobStart>
		<Action type="program">
			<Program><![CDATA[#program;
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    Object::setVariableForAdHoc('Obj_BullyVernCharacterJobs', name, name, 0, false);
                ]]></Program>
		</Action>
	</BullyVern_CapturePermJobStart>
	<BurnsDragon_CapturePermJobStart>
		<Action type="program">
			<Program><![CDATA[#program;
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    Object::setVariableForAdHoc('Obj_BurnsDragonCharacterJobs', name, name, 0, false);
                ]]></Program>
		</Action>
	</BurnsDragon_CapturePermJobStart>
	<Treestache_CapturePermJobStart>
		<Action type="program">
			<Program><![CDATA[#program;
                    var object = Script::getObjectInstance();
                    var name = Object::getProperty(object, 'Name');
                    Object::setVariableForAdHoc('Obj_TreestacheCharacterJobs', name, name, 0, false);
                ]]></Program>
		</Action>
	</Treestache_CapturePermJobStart>
	<EmulateTouched_Bart>
		<Action type="pantoobject" time="0" character="Bart" follow="true" fakeTouch="true" />
	</EmulateTouched_Bart>
	<EmulateTouched_Lisa>
		<Action type="pantoobject" time="0" character="Lisa" follow="true" fakeTouch="true" />
	</EmulateTouched_Lisa>
	<EmulateTouched_Milhouse>
		<Action type="pantoobject" time="0" character="Milhouse" follow="true" fakeTouch="true" />
	</EmulateTouched_Milhouse>
	<EmulateTouched_Martin>
		<Action type="pantoobject" time="0" character="Martin" follow="true" fakeTouch="true" />
	</EmulateTouched_Martin>
	<EmulateTouched_AngelicaButton>
		<Action type="pantoobject" time="0" character="AngelicaButton" follow="true" fakeTouch="true" />
	</EmulateTouched_AngelicaButton>
	<EmulateTouched_Greystash>
		<Action type="pantoobject" time="0" character="Greystash" follow="true" fakeTouch="true" />
	</EmulateTouched_Greystash>
	<EmulateTouched_TheGreatRaymondo>
		<Action type="pantoobject" time="0" character="TheGreatRaymondo" follow="true" fakeTouch="true" />
	</EmulateTouched_TheGreatRaymondo>
	<EmulateTouched_UnicornWizard>
		<Action type="pantoobject" time="0" character="UnicornWizard" follow="true" fakeTouch="true" />
	</EmulateTouched_UnicornWizard>
	<EmulateTouched_Frink>
		<Action type="pantoobject" time="0" character="Frink" follow="true" fakeTouch="true" />
	</EmulateTouched_Frink>
	<CaptureJobList_Kearneymon>
		<Action type="if">
			<If>
				<Requirement type="conditional" logic="AND">
					<Requirement type="quest started" quest="THOH2017_CaptureKearneymon" />
					<Requirement type="formula" formula="System::evaluate('Job::CaptureKearneymonPermanent::Waiting')" />
				</Requirement>
				<Then>
					<Action type="pantoobject" time="0" character="Kearneymon" follow="true" fakeTouch="false" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="KearneymonLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="KearneymonLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_JobList" extras="THOH2017_MenuConfig_Misc:Capture_JobList_Kearneymon" />
				</Then>
			</Else>
		</Action>
	</CaptureJobList_Kearneymon>
	<CaptureJobList_Wiggops>
		<Action type="if">
			<If>
				<Requirement type="conditional" logic="AND">
					<Requirement type="quest started" quest="ZeroClopsThirty_1" />
					<Requirement type="formula" formula="System::evaluate('Job::CaptureWiggopsPermanent::Waiting')" />
				</Requirement>
				<Then>
					<Action type="pantoobject" time="0" character="Wiggops" follow="true" fakeTouch="false" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="WiggopsLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="WiggopsLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_JobList" extras="THOH2017_MenuConfig_Misc:Capture_JobList_Wiggops" />
				</Then>
			</Else>
		</Action>
	</CaptureJobList_Wiggops>
	<CaptureJobList_Lewd>
		<Action type="if">
			<If>
				<Requirement type="conditional" logic="AND">
					<Requirement type="quest started" quest="PubStomp_1" />
					<Requirement type="formula" formula="System::evaluate('Job::CaptureLewdPermanent::Waiting')" />
				</Requirement>
				<Then>
					<Action type="pantoobject" time="0" character="Lewd" follow="true" fakeTouch="false" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="LewdBarTrollLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="LewdBarTrollLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_JobList" extras="THOH2017_MenuConfig_Misc:Capture_JobList_Lewd" />
				</Then>
			</Else>
		</Action>
	</CaptureJobList_Lewd>
	<CaptureJobList_Crawl>
		<Action type="if">
			<If>
				<Requirement type="conditional" logic="AND">
					<Requirement type="quest started" quest="RockAndTroll_1" />
					<Requirement type="formula" formula="System::evaluate('Job::CaptureCrawlPermanent::Waiting')" />
				</Requirement>
				<Then>
					<Action type="pantoobject" time="0" character="Crawl" follow="true" fakeTouch="false" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="CrawlBarTrollLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="CrawlBarTrollLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_JobList" extras="THOH2017_MenuConfig_Misc:Capture_JobList_Crawl" />
				</Then>
			</Else>
		</Action>
	</CaptureJobList_Crawl>
	<CaptureJobList_Barfy>
		<Action type="if">
			<If>
				<Requirement type="conditional" logic="AND">
					<Requirement type="quest started" quest="ThePartyTroll_1" />
					<Requirement type="formula" formula="System::evaluate('Job::CaptureBarfyPermanent::Waiting')" />
				</Requirement>
				<Then>
					<Action type="pantoobject" time="0" character="Barfy" follow="true" fakeTouch="false" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="BarfyBarTrollLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="BarfyBarTrollLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_JobList" extras="THOH2017_MenuConfig_Misc:Capture_JobList_Barfy" />
				</Then>
			</Else>
		</Action>
	</CaptureJobList_Barfy>
	<CaptureJobList_BullyVern>
		<Action type="if">
			<If>
				<Requirement type="conditional" logic="AND">
					<Requirement type="quest started" quest="ThreeHeadsNoBrain_1" />
					<Requirement type="formula" formula="System::evaluate('Job::CaptureBullyVernPermanent::Waiting')" />
				</Requirement>
				<Then>
					<Action type="pantoobject" time="0" character="BullyVern" follow="true" fakeTouch="false" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="BullyVernLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="BullyVernLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_JobList" extras="THOH2017_MenuConfig_Misc:Capture_JobList_BullyVern" />
				</Then>
			</Else>
		</Action>
	</CaptureJobList_BullyVern>
	<CaptureJobList_BurnsDragon>
		<Action type="if">
			<If>
				<Requirement type="conditional" logic="AND">
					<Requirement type="quest started" quest="TheVeryWellOffDragon_1" />
					<Requirement type="formula" formula="System::evaluate('Job::CaptureBurnsDragonPermanent::Waiting')" />
				</Requirement>
				<Then>
					<Action type="pantoobject" time="0" character="BurnsDragon" follow="true" fakeTouch="false" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="BurnsDragonLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="BurnsDragonLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_JobList" extras="THOH2017_MenuConfig_Misc:Capture_JobList_BurnsDragon" />
				</Then>
			</Else>
		</Action>
	</CaptureJobList_BurnsDragon>
	<CaptureJobList_Treestache>
		<Action type="if">
			<If>
				<Requirement type="conditional" logic="AND">
					<Requirement type="quest started" quest="AllBarkAndBite_1" />
					<Requirement type="formula" formula="System::evaluate('Job::CaptureTreestachePermanent::Waiting')" />
				</Requirement>
				<Then>
					<Action type="pantoobject" time="0" character="Treestache" follow="true" fakeTouch="false" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="TreestachesLair" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="TreestachesLair" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="GameState_JobList" extras="THOH2017_MenuConfig_Misc:Capture_JobList_Treestache" />
				</Then>
			</Else>
		</Action>
	</CaptureJobList_Treestache>
</ScriptPackage>