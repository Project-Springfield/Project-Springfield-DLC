<ScriptPackage>
	<UpdateCrafting>
		<Action type="program">
			<Program><![CDATA[#program;
                    while (User::getVariable('Homergeddon_CraftingLevel') < User::getVariable('Homergeddon_MaxCraftingLevel') && Homergeddon_CraftingXP >= toDouble(System::getConfigValue('__Homergeddon_GameConfig:Crafting_Targets:CurrentLevel_Target__')))
                    
                    User::setVariable('Homergeddon_CraftingLevel', User::getVariable('Homergeddon_CraftingLevel') + 1, true);
                    }
                    
                    var previousTarget = toDouble(System::getConfigValue('__Homergeddon_GameConfig:Crafting_Targets:PreviousLevel_Target__'));
                    User::setVariable('Homergeddon_MaxCraftProgress', toDouble(System::getConfigValue('__Homergeddon_GameConfig:Crafting_Targets:CurrentLevel_Target__')) - previousTarget, true);
                    User::setVariable('Homergeddon_CraftProgress', System::evaluate('Spendable::Homergeddon_CraftingXP') - previousTarget, true);
                ]]></Program>
		</Action>
	</UpdateCrafting>
	<IncreaseStoreLevel>
		<Action type="if">
			<If expression="Homergeddon_CraftingLevel &lt; Homergeddon_MaxCraftingLevel">
				<Then>
					<Action type="reward" Homergeddon_CraftingXP="toDouble(System::getConfigValue('__Homergeddon_GameConfig:Crafting_Targets:CurrentLevel_Target__')) - Homergeddon_CraftingXP" />
				</Then>
			</If>
		</Action>
		<Action type="returnToInGameState" />
	</IncreaseStoreLevel>
	<Crafting_Level02>
		<Action type="notification" title="UI_AtW_Crafting_LevelUp02" button="UI_OK" text="UI_Homergeddon_Crafting_LevelUp" icon="ICO_CUR_Homergeddon_CurrencyCrafting_LG" />
		<Action type="if">
			<If expression="lessThan(Homergeddon_CraftingXP, toDouble(System::getConfigValue('__Homergeddon_Spreadsheet_Config:CraftLevels:Level03_Target__')))">
				<Then>
					<Action type="actionSequence" script="Homergeddon_Scripts:Tab_Crafting_ScrollTo">
						<FormatToken key="ItemToScrollTo" value="BLD_PlayscapeBarrier_name" />
					</Action>
				</Then>
			</If>
		</Action>
	</Crafting_Level02>
	<Crafting_Level03>
		<Action type="notification" title="UI_AtW_Crafting_LevelUp03" button="UI_OK" text="UI_Homergeddon_Crafting_LevelUp" icon="ICO_CUR_Homergeddon_CurrencyCrafting_LG" />
		<Action type="if">
			<If expression="lessThan(Homergeddon_CraftingXP, toDouble(System::getConfigValue('__Homergeddon_Spreadsheet_Config:CraftLevels:Level04_Target__')))">
				<Then>
					<Action type="actionSequence" script="Homergeddon_Scripts:Tab_Crafting_ScrollTo">
						<FormatToken key="ItemToScrollTo" value="BLD_PlayscapeLookout_name" />
					</Action>
				</Then>
			</If>
		</Action>
	</Crafting_Level03>
	<Crafting_Level04>
		<Action type="notification" title="UI_AtW_Crafting_LevelUp04" button="UI_OK" text="UI_Homergeddon_Crafting_LevelUp" icon="ICO_CUR_Homergeddon_CurrencyCrafting_LG" />
		<Action type="if">
			<If expression="lessThan(Homergeddon_CraftingXP, toDouble(System::getConfigValue('__Homergeddon_Spreadsheet_Config:CraftLevels:Level05_Target__')))">
				<Then>
					<Action type="actionSequence" script="Homergeddon_Scripts:Tab_Crafting_ScrollTo">
						<FormatToken key="ItemToScrollTo" value="BLD_Skylight_name" />
					</Action>
				</Then>
			</If>
		</Action>
	</Crafting_Level04>
	<Crafting_Level05>
		<Action type="notification" title="UI_AtW_Crafting_LevelUp05" button="UI_OK" text="UI_Homergeddon_Crafting_LevelUp" icon="ICO_CUR_Homergeddon_CurrencyCrafting_LG" />
		<Action type="if">
			<If expression="lessThan(Homergeddon_CraftingXP, toDouble(System::getConfigValue('__Homergeddon_Spreadsheet_Config:CraftLevels:Level06_Target__')))">
				<Then>
					<Action type="actionSequence" script="Homergeddon_Scripts:Tab_Crafting_ScrollTo">
						<FormatToken key="ItemToScrollTo" value="BLD_Battlescape_name" />
					</Action>
				</Then>
			</If>
		</Action>
	</Crafting_Level05>
	<Crafting_Level06>
		<Action type="notification" title="UI_AtW_Crafting_LevelUp06" button="UI_OK" text="UI_Homergeddon_Crafting_LevelUp" icon="ICO_CUR_Homergeddon_CurrencyCrafting_LG" />
		<Action type="if">
			<If expression="lessThan(Homergeddon_CraftingXP, toDouble(System::getConfigValue('__Homergeddon_Spreadsheet_Config:CraftLevels:Level07_Target__')))">
				<Then>
					<Action type="actionSequence" script="Homergeddon_Scripts:Tab_Crafting_ScrollTo">
						<FormatToken key="ItemToScrollTo" value="BLD_HouseFrame_name" />
					</Action>
				</Then>
			</If>
		</Action>
	</Crafting_Level06>
	<Crafting_Level07>
		<Action type="notification" title="UI_AtW_Crafting_LevelUp07" button="UI_OK" text="UI_Homergeddon_Crafting_LevelUp" icon="ICO_CUR_Homergeddon_CurrencyCrafting_LG" />
		<Action type="if">
			<If>
				<Requirement type="conditional" logic="AND">
					<Requirement type="formula" formula="lessThan(Homergeddon_CraftingXP, toDouble(System::getConfigValue('__Homergeddon_Spreadsheet_Config:CraftLevels:Level08_Target__')))" />
					<Requirement type="building" building="JunkBase" />
				</Requirement>
				<Then>
					<Action type="actionSequence" script="Homergeddon_Scripts:Tab_Crafting_ScrollTo">
						<FormatToken key="ItemToScrollTo" value="BLD_JunkBarrier_name" />
					</Action>
				</Then>
			</If>
		</Action>
	</Crafting_Level07>
	<Crafting_Level08>
		<Action type="notification" title="UI_AtW_Crafting_LevelUp08" button="UI_OK" text="UI_Homergeddon_Crafting_LevelUp" icon="ICO_CUR_Homergeddon_CurrencyCrafting_LG" />
		<Action type="if">
			<If>
				<Requirement type="conditional" logic="AND">
					<Requirement type="formula" formula="lessThan(Homergeddon_CraftingXP, toDouble(System::getConfigValue('__Homergeddon_Spreadsheet_Config:CraftLevels:Level09_Target__')))" />
					<Requirement type="building" building="JunkBase" />
				</Requirement>
				<Then>
					<Action type="actionSequence" script="Homergeddon_Scripts:Tab_Crafting_ScrollTo">
						<FormatToken key="ItemToScrollTo" value="BLD_JunkLookout_name" />
					</Action>
				</Then>
			</If>
		</Action>
	</Crafting_Level08>
	<Crafting_Level09>
		<Action type="notification" title="UI_AtW_Crafting_LevelUp09" button="UI_OK" text="UI_Homergeddon_Crafting_LevelUp" icon="ICO_CUR_Homergeddon_CurrencyCrafting_LG" />
		<Action type="if">
			<If expression="lessThan(Homergeddon_CraftingXP, toDouble(System::getConfigValue('__Homergeddon_Spreadsheet_Config:CraftLevels:Level10_Target__')))">
				<Then>
					<Action type="actionSequence" script="Homergeddon_Scripts:Tab_Crafting_ScrollTo">
						<FormatToken key="ItemToScrollTo" value="BLD_TruckShack_name" />
					</Action>
				</Then>
			</If>
		</Action>
	</Crafting_Level09>
	<Crafting_Level10>
		<Action type="notification" title="UI_AtW_Crafting_LevelUp10" button="UI_OK" text="UI_Homergeddon_Crafting_LevelUp" icon="ICO_CUR_Homergeddon_CurrencyCrafting_LG" />
		<Action type="if">
			<If expression="lessThan(Homergeddon_CraftingXP, toDouble(System::getConfigValue('__Homergeddon_Spreadsheet_Config:CraftLevels:Level11_Target__')))">
				<Then>
					<Action type="actionSequence" script="Homergeddon_Scripts:Tab_Crafting_ScrollTo">
						<FormatToken key="ItemToScrollTo" value="BLD_HorseDrawnSUV_name" />
					</Action>
				</Then>
			</If>
		</Action>
	</Crafting_Level10>
</ScriptPackage>