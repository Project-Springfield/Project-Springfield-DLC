<ScriptPackage>
	<StonecutterTunnel_Tapped parallel="true">
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="players land" />
			</Requirements>
			<True>
				<Action type="gotoState" state="GameState_BuildingSelected">
					<Extras>
						<Attribute name="BuildingName" value="StonecutterTunnelEntry" />
						<Attribute name="GoToFarmMode" value="true" />
					</Extras>
				</Action>
			</True>
		</Action>
	</StonecutterTunnel_Tapped>
	<StonecutterTunnelCreated parallel="true">
		<Action type="hudTip" text="UI_StonecutterTunnel_Created" time="10s" />
	</StonecutterTunnelCreated>
	<OpenMasterQuest>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="gotoState" state="GameState_QuestProgress">
					<Extras>
						<Attribute name="questParentDelegate" value="NYME2018MasterQuest" />
					</Extras>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</OpenMasterQuest>
	<ShowJobList ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="active quest" quest="WelScareState_1" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="NYME2018_Event" />
									<Attribute name="JobList" value="NYME2018_JL_01" />
								</Extras>
							</Action>
						</Then>
					</If>
					<ElseIf>
						<Requirement type="active quest" quest="WelScareState_2" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="NYME2018_Event" />
									<Attribute name="JobList" value="NYME2018_JL_02" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="active quest" quest="WelScareState_3" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="NYME2018_Event" />
									<Attribute name="JobList" value="NYME2018_JL_03" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="active quest" quest="WelScareState_4" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="NYME2018_Event" />
									<Attribute name="JobList" value="NYME2018_JL_04" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="active quest" quest="WelScareState_5" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="NYME2018_Event" />
									<Attribute name="JobList" value="NYME2018_JL_05" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</ShowJobList>
	<ShowMiniEventIntro>
		<Action type="miniEventPanel">
			<Attribute name="config">
				<AttributeSet name="source">
					<Attribute name="file" value="NYMEMiniEventPopUp" />
				</AttributeSet>
				<AttributeSet name="playButtonText">
					<Requirement type="variable" variable="NYME2018_IntroSeen" not="true" />
					<Attribute name="text" value="UI_MiniEvents_PlayButton" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonTextHL">
					<Requirement type="variable" variable="NYME2018_IntroSeen" not="true" />
					<Attribute name="text" value="UI_MiniEvents_PlayButton" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonText">
					<Requirement type="variable" variable="NYME2018_IntroSeen" />
					<Attribute name="text" value="UI_DoIt" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonTextHL">
					<Requirement type="variable" variable="NYME2018_IntroSeen" />
					<Attribute name="text" value="UI_DoIt" localise="true" />
				</AttributeSet>
				<AttributeSet name="titleText">
					<Attribute name="text" value="UI_NYME2018_EventTitle" localise="true" />
					<Attribute name="color" value="ffcb1bff" />
				</AttributeSet>
				<AttributeSet name="timeLeft">
					<Attribute name="text" value="UI_NYME2018_IntroPanel_Timer" localise="true" />
					<Attribute name="color" value="FFFFFFFF" />
				</AttributeSet>
				<AttributeSet name="textColumn1">
					<Attribute name="text" value="UI_NYME2018_IntroPanel_BottomLeft" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="textColumn2">
					<Attribute name="text" value="UI_NYME2018_IntroPanel_TopRight" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="textColumn3">
					<Attribute name="text" value="UI_NYME2018_IntroPanel_TopLeft" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="panel">
					<Attribute name="image" value="BSE_NYME_MiniEventPanel_Intro" />
				</AttributeSet>
				<AttributeSet name="playButton">
					<Attribute name="color" value="0091F1FF" />
				</AttributeSet>
			</Attribute>
		</Action>
		<Action type="setVariable" boolVariable="NYME2018_IntroSeen" boolValue="true" />
		<Action type="reparseBuildMenu" />
	</ShowMiniEventIntro>
	<ShowMiniEventOutro>
		<Action type="miniEventPanel">
			<Attribute name="config">
				<AttributeSet name="source">
					<Attribute name="file" value="NYMEMiniEventPopUp" />
				</AttributeSet>
				<AttributeSet name="playButtonText">
					<Attribute name="text" value="UI_OK" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonTextHL">
					<Attribute name="text" value="UI_OK" localise="true" />
				</AttributeSet>
				<AttributeSet name="titleText">
					<Attribute name="text" value="UI_NYME2018_EventTitle" localise="true" />
					<Attribute name="color" value="ffcb1bff" />
				</AttributeSet>
				<AttributeSet name="textColumn4">
					<Attribute name="text" value="UI_NYME2018_OutroPanel_TopRight" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="textColumn5">
					<Attribute name="text" value="UI_NYME2018_OutroPanel_BottomLeft" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="panel">
					<Attribute name="image" value="BSE_NYME_MiniEventPanel_Outro" />
				</AttributeSet>
				<AttributeSet name="playButton">
					<Attribute name="color" value="0091F1FF" />
				</AttributeSet>
			</Attribute>
		</Action>
		<Action type="setVariable" boolVariable="NYME2018_Complete" boolValue="true" />
	</ShowMiniEventOutro>
	<ExpiryWarning_72hr>
		<Action type="message" text="UI_NYME2018_72HourExpiry_text" />
		<Action type="setVariable" boolVariable="NYME2018_PreExpiryDisplayed72" boolValue="true" />
		<Action type="runScript" script="NYME2018_Scripts:OpenMasterQuest" waitUntilComplete="true" />
	</ExpiryWarning_72hr>
	<ExpiryWarning_24hr>
		<Action type="message" text="{FormattedExpiration24}" formatMe="root">
			<FormattingConfig path="NYME2018_GameConfig:ExpirationFormattedText" />
		</Action>
		<Action type="setVariable" boolVariable="NYME2018_PreExpiryDisplayed24" boolValue="true" />
		<Action type="runScript" script="NYME2018_Scripts:OpenMasterQuest" waitUntilComplete="true" />
	</ExpiryWarning_24hr>
	<DisplayExpiry>
		<Action type="message" text="UI_NYME2018_Expired_text" />
		<Action type="setVariable" boolVariable="NYME2018_ExpiryDisplayed" boolValue="true" />
		<Action type="runScript" script="NYME2018_Scripts:OpenMasterQuest" waitUntilComplete="true" />
	</DisplayExpiry>
	<CheckIfEnd ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="variable" variable="NYME2018_ExpiryDisplayed" />
			<True>
				<Action type="setVariable" boolVariable="NYME2018_Expired" boolValue="true" />
			</True>
		</Action>
	</CheckIfEnd>
	<ForceExpire ignoreHUD="true">
		<Action type="setVariable" boolVariable="NYME2018_ExpiryDisplayed" boolValue="true" />
		<Action type="setVariable" boolVariable="NYME2018_Expired" boolValue="true" />
	</ForceExpire>
	<RecommendNYME2018 ignoreHUD="true">
		<Action type="recommendation" recType="Event" eventName="SET_TheBuckStopsHere_name" name="NYME2018_OnePanel" />
	</RecommendNYME2018>
	<EnterStoreCategory>
		<Action type="focusOnMenuItem" menuCategory="NYME2018" />
	</EnterStoreCategory>
	<GoTo_InfoBores_PlazaOrBuilding>
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="building" building="CapitalCityCapitolBuilding" not="true" />
					<Requirement type="building" building="CapitalCityPlazaHotel" not="true" />
				</Requirements>
				<Then>
					<Action type="if">
						<If>
							<Requirements>
								<Requirement type="conditional" logic="AND">
									<Requirement type="building owned" building="CapitalCityCapitolBuilding" />
									<Requirement type="building" building="CapitalCityCapitolBuilding" not="true" />
								</Requirement>
							</Requirements>
							<Then>
								<Action type="focusOnMenuItem" itemName="CapitalCityPlazaHotel" inventory="true" />
							</Then>
						</If>
						<ElseIf>
							<Requirements>
								<Requirement type="conditional" logic="AND">
									<Requirement type="building owned" building="CapitalCityPlazaHotel" />
									<Requirement type="building" building="CapitalCityPlazaHotel" not="true" />
								</Requirement>
							</Requirements>
							<Then>
								<Action type="focusOnMenuItem" itemName="CapitalCityPlazaHotel" inventory="true" />
							</Then>
						</ElseIf>
					</Action>
				</Then>
			</If>
		</Action>
		<Action type="checkRequirements">
			<Requirement type="character" name="BirchBarlow" />
			<True>
				<Action type="gotoState" state="GameState_InGame" waitForState="true" forceState="true" />
				<Action type="pantoobject" character="BirchBarlow" time="0" fakeTouch="true" />
			</True>
			<False>
				<Action type="checkRequirements">
					<Requirement type="characterunlocked" name="BirchBarlow" />
					<True>
						<Action type="focusOnMenuItem" itemName="BirchBarlow" inventory="true" />
					</True>
				</Action>
			</False>
		</Action>
	</GoTo_InfoBores_PlazaOrBuilding>
	<GoTo_InfoBores_Plaza>
		<Action type="if">
			<If>
				<Requirement type="building" building="CapitalCityPlazaHotel" not="true" />
				<Then>
					<Action type="if">
						<If>
							<Requirements>
								<Requirement type="conditional" logic="AND">
									<Requirement type="building owned" building="CapitalCityPlazaHotel" />
									<Requirement type="building" building="CapitalCityPlazaHotel" not="true" />
								</Requirement>
							</Requirements>
							<Then>
								<Action type="focusOnMenuItem" itemName="CapitalCityPlazaHotel" inventory="true" />
							</Then>
						</If>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="checkRequirements">
						<Requirement type="character" name="BirchBarlow" />
						<True>
							<Action type="gotoState" state="GameState_InGame" waitForState="true" forceState="true" />
							<Action type="pantoobject" character="BirchBarlow" time="0" fakeTouch="true" />
						</True>
						<False>
							<Action type="checkRequirements">
								<Requirement type="characterunlocked" name="BirchBarlow" />
								<True>
									<Action type="focusOnMenuItem" itemName="BirchBarlow" inventory="true" />
								</True>
							</Action>
						</False>
					</Action>
				</Then>
			</Else>
		</Action>
	</GoTo_InfoBores_Plaza>
</ScriptPackage>