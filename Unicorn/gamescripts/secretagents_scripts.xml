<ScriptPackage>
	<RecommendSecretAgentsCategory>
		<Action type="recommendation" recType="Event" eventName="UI_SecretAgents_Title" name="SecretAgents_ThreePanel" />
	</RecommendSecretAgentsCategory>
	<EnterSecretAgentsCategory>
		<Action type="focusOnMenuItem" menuCategory="SecretAgents" />
	</EnterSecretAgentsCategory>
	<EnterEaster2017Category>
		<Action type="focusOnMenuItem" menuCategory="Easter2017" />
	</EnterEaster2017Category>
	<PrizeListButtonPressed runQueueState="RunInAnyState">
		<Action type="checkExpression" expression="SecretAgents_EventHubTabValue">
			<ExpressionCase value="0">
				<Action type="runScript" script="SecretAgents_Scripts:Tab_PrizeTrack" />
			</ExpressionCase>
			<ExpressionCase value="1">
				<Action type="runScript" script="SecretAgents_Scripts:Tab_BuildingHUB" />
			</ExpressionCase>
			<ExpressionCase value="2">
				<Action type="runScript" script="SecretAgents_Scripts:Tab_SituationRoom" />
			</ExpressionCase>
			<ExpressionCase value="3">
				<Action type="runScript" script="SecretAgents_Scripts:Tab_Crafting" />
			</ExpressionCase>
			<ExpressionCase value="4">
				<Action type="runScript" script="SecretAgents_Scripts:Tab_DroneScan" />
			</ExpressionCase>
		</Action>
	</PrizeListButtonPressed>
	<Tab_PrizeTrack>
		<Action type="if">
			<If expression="SecretAgents_EventGuideSeen">
				<Then>
					<Action type="updateVariable" variable="SecretAgents_EventHubTabValue" value="0" />
					<Action type="gotoState" state="GameState_HubPrizeTrack" forceState="true">
						<Extras>
							<Attribute name="helpButtonScript" value="SecretAgents_Scripts:GuidePanel_Event" />
							<Attribute name="specialEvent" value="SecretAgents_Event" />
							<Attribute name="exitButtonScript" value="MiscScripts:GoToInGame" />
						</Extras>
					</Action>
					<Action type="markBadgeViewed" badgeName="SecretAgents_PrizeTrackBadge" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="actionSequence" script="SecretAgents_Scripts:GuidePanel_Event" />
				</Then>
			</Else>
		</Action>
	</Tab_PrizeTrack>
	<Tab_BuildingHUB>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="updateVariable" variable="SecretAgents_EventHubTabValue" value="1" />
				<Action type="gotoState" state="GameState_BuildingHUB">
					<Extras>
						<Attribute name="menu" value="SecretAgentsBuildingHUB" />
						<Attribute name="scriptResProvider" value="SecretAgentsBuildingHUB.mns" />
						<Attribute name="menuConfig" value="SecretAgents_MenuConfig_BuildingHUB:MenuConfig" />
						<Attribute name="buttonsConfig" value="SecretAgents_MenuConfig_BuildingHUB:ButtonConfig" />
						<Attribute name="generalConfig" value="SecretAgents_MenuConfig_BuildingHUB:GeneralConfig" />
						<Attribute name="building" value="AgencyHeadquarters" />
						<Attribute name="specialEvent" value="SecretAgents_Event" />
					</Extras>
				</Action>
			</True>
		</Action>
	</Tab_BuildingHUB>
	<Tab_SituationRoom>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="updateVariable" variable="SecretAgents_EventHubTabValue" value="2" />
				<Action type="if">
					<If expression="SecretAgents_PlotGuideSeen">
						<Then>
							<Action type="updateVariable" variable="DossierUnlocked_Show" value="0" />
							<Action type="gotoState" state="GameState_DynamicQuestTrack" forceState="false" extras="SecretAgents_Plots_MenuConfig:StateConfig" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="actionSequence" script="SecretAgents_Scripts:GuidePanel_Plot_NoSound" />
						</Then>
					</Else>
				</Action>
			</True>
		</Action>
	</Tab_SituationRoom>
	<Tab_SituationRoom_ResetIndex>
		<Action type="updateVariable" variable="SecretAgents_EventHubTabValue" value="2" />
		<Action type="gotoState" state="GameState_DynamicQuestTrack" forceState="false" extras="SecretAgents_Plots_MenuConfig:StateConfig_ResetIndex" />
	</Tab_SituationRoom_ResetIndex>
	<Tab_SituationRoom_Exit>
		<Action type="sound" sound="UIClose" />
		<Action type="showMenu" clearShownMenu="true" />
		<Action type="runScript" script="ReturnToGameState" package="MiscScripts" />
	</Tab_SituationRoom_Exit>
	<Tab_DroneScan ignoreHUD="true">
		<Action type="setVariable" intVariable="SecretAgents_EventHubTabValue" intValue="4" />
		<Action type="gotoState" state="GameState_HubDataDrivenMenu" forceState="false">
			<Extras>
				<Attribute name="menuName" value="DroneScanMinigameHUB" />
				<Attribute name="scriptResProvider" value="DroneScanMinigameHUB.mns" />
				<Attribute name="menuConfig" value="SecretAgents_MenuConfig_DroneScan:DroneScanEventHubMenuConfig" />
				<Attribute name="buttonsConfig" value="SecretAgents_MenuConfig_DroneScan:DroneScanEventHubButtonsConfig" />
				<Attribute name="progressBarsConfig" value="SecretAgents_MenuConfig_DroneScan:DroneScanEventHubProgressBarConfig" />
				<Attribute name="specialEvent" value="SecretAgents_Event" />
			</Extras>
		</Action>
	</Tab_DroneScan>
	<Tab_Crafting>
		<Action type="if">
			<If expression="SecretAgents_CraftingGuideSeen">
				<Then>
					<Action type="updateVariable" variable="SecretAgents_EventHubTabValue" value="3" />
					<Action type="gotoState" state="GameState_HubCraftingMenu" forceState="false">
						<Extras>
							<Attribute name="MenuConfig" value="SecretAgents_CraftingConfig:CraftingMenu" />
							<Attribute name="ExitButtonScript" value="MiscScripts:GoToInGame" />
							<Attribute name="onLoadScript" value="SecretAgents_Scripts_Crafting:UpdateCrafting" />
							<Attribute name="specialEvent" value="SecretAgents_Event" />
						</Extras>
					</Action>
					<Action type="markBadgeViewed" badgeName="SecretAgents_CraftingBadge" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="actionSequence" script="SecretAgents_Scripts:GuidePanel_Crafting" />
				</Then>
			</Else>
		</Action>
	</Tab_Crafting>
	<Tab_Crafting_ScrollTo>
		<Action type="updateVariable" variable="SecretAgents_EventHubTabValue" value="3" />
		<Action type="gotoState" state="GameState_HubCraftingMenu" forceState="false" formatMe="deep">
			<Extras>
				<Attribute name="MenuConfig" value="SecretAgents_CraftingConfig:CraftingMenu" />
				<Attribute name="ExitButtonScript" value="MiscScripts:GoToInGame" />
				<Attribute name="onLoadScript" value="SecretAgents_Scripts_Crafting:UpdateCrafting" />
				<Attribute name="specialEvent" value="SecretAgents_Event" />
				<Attribute name="ItemToScrollTo" value="{ItemToScrollTo}" />
			</Extras>
		</Action>
		<Action type="markBadgeViewed" badgeName="SecretAgents_CraftingBadge" />
	</Tab_Crafting_ScrollTo>
	<GuidePanel_Event>
		<Action type="updateVariable" variable="SecretAgents_EventHubTabValue" value="0" />
		<Action type="updateVariable" variable="SecretAgents_EventGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="SecretAgents_GuidePanelsConfig:EventGuide_Config" />
	</GuidePanel_Event>
	<GuidePanel_Crafting>
		<Action type="updateVariable" variable="SecretAgents_EventHubTabValue" value="3" />
		<Action type="updateVariable" variable="SecretAgents_CraftingGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="SecretAgents_GuidePanelsConfig:CraftingGuide_Config" />
	</GuidePanel_Crafting>
	<GuidePanel_Crafting_Center>
		<Action type="updateVariable" variable="SecretAgents_CraftingGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="SecretAgents_GuidePanelsConfig:CraftingGuide_Config">
			<Extras>
				<Attribute name="ExitButtonScript" value="MiscScripts:ReturnToGameState" />
				<Attribute name="Center" value="true" />
			</Extras>
		</Action>
	</GuidePanel_Crafting_Center>
	<GuidePanel_Plot>
		<Action type="sound" sound="UIButton" />
		<Action type="updateVariable" variable="SecretAgents_EventHubTabValue" value="2" />
		<Action type="updateVariable" variable="SecretAgents_PlotGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="SecretAgents_GuidePanelsConfig:PlotGuide_Config" />
	</GuidePanel_Plot>
	<GuidePanel_Plot_NoSound>
		<Action type="updateVariable" variable="SecretAgents_EventHubTabValue" value="2" />
		<Action type="updateVariable" variable="SecretAgents_PlotGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="SecretAgents_GuidePanelsConfig:PlotGuide_Config" />
	</GuidePanel_Plot_NoSound>
	<GuidePanel_Plot_Center>
		<Action type="updateVariable" variable="SecretAgents_PlotGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="SecretAgents_GuidePanelsConfig:PlotGuide_Config">
			<Extras>
				<Attribute name="ExitButtonScript" value="MiscScripts:ReturnToGameState" />
				<Attribute name="Center" value="true" />
			</Extras>
		</Action>
	</GuidePanel_Plot_Center>
	<AgencyHQ_DossierCheck>
		<Action type="if">
			<If expression="DossierUnlocked_Show">
				<Then>
					<Action type="updateVariable" variable="DossierUnlocked_Show" value="0" />
					<Action type="showMenu" menu="notificationimage2button" scriptResProvider="notificationimage2button.mns" menuConfig="SecretAgents_Plots_MenuConfig:PlotDiscoveredMenuConfig" buttonsConfig="SecretAgents_Plots_MenuConfig:PlotDiscoveredButtonConfig" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="runScript" script="SecretAgents_Scripts:Tab_BuildingHUB" />
				</Then>
			</Else>
		</Action>
	</AgencyHQ_DossierCheck>
	<ActOnePrizeTrackTab ignoreHUD="true">
		<Action type="notification" title="UI_SecretAgents_PrizeTrack_title" button="UI_OK" text="UI_Superheroes2_PrizeTrack_Future_text" tooltip="UI_Superheroes2_PrizeTrack_Future_toolTip" icon="ICO_Priz_SecretAgents_WayneSlater_LG" darken="true" />
	</ActOnePrizeTrackTab>
	<ActTwoPrizeTrackTab ignoreHUD="true">
		<Action type="notification" title="UI_SecretAgents_PrizeTrack_title" button="UI_OK" text="UI_Superheroes2_PrizeTrack_Future_text" tooltip="UI_Superheroes2_PrizeTrack_Future_toolTip" icon="ICO_Priz_SecretAgents_StradivariusCain_LG" darken="true" />
	</ActTwoPrizeTrackTab>
	<GoTo_SurveillancePost>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="building owned" building="SurveillancePost" />
					</Requirements>
					<True>
						<Action type="returnToInGameState" waitForState="true" />
						<Action type="pantoobject" time="0" building="SurveillancePost" fakeTouch="true" fakeTouchAvoidsIndicators="true" />
					</True>
					<False>
						<Action type="focusOnMenuItem" itemName="SurveillancePost" />
					</False>
				</Action>
			</True>
		</Action>
	</GoTo_SurveillancePost>
	<GoTo_HiddenResearchFacility>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="building owned" building="HiddenResearchFacility" />
					</Requirements>
					<True>
						<Action type="returnToInGameState" waitForState="true" />
						<Action type="pantoobject" time="0" building="HiddenResearchFacility" fakeTouch="true" fakeTouchAvoidsIndicators="true" />
					</True>
					<False>
						<Action type="focusOnMenuItem" itemName="HiddenResearchFacility" />
					</False>
				</Action>
			</True>
		</Action>
	</GoTo_HiddenResearchFacility>
	<GoTo_AgencyHeadquarters>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="building owned" building="AgencyHeadquarters" />
					</Requirements>
					<True>
						<Action type="returnToInGameState" waitForState="true" />
						<Action type="pantoobject" time="0" building="AgencyHeadquarters" fakeTouch="false" />
					</True>
					<False>
						<Action type="focusOnMenuItem" itemName="AgencyHeadquarters" />
					</False>
				</Action>
			</True>
		</Action>
	</GoTo_AgencyHeadquarters>
	<GoTo_Tappables ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="if">
					<If expression="#program;       if(User::getVariable('BankedManInTan') &gt; 0)       {        return false;       }       else       {        var character = Character::find('ManInTan');        var characterInstanceList = Land::getAllInstancesOfObject(character);        foreach(characterInstanceList as instance)        {         if(!Object::getDelete(instance))         {          return false;         }        }       }       return true;">
						<Then>
							<Action type="hudTip" text="UI_MenInTan_Cleared" time="10s" requiresActiveHUD="false" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="pantoobject" time="0" character="ManInTan" flagsToAvoid="delete" />
						</Then>
					</Else>
				</Action>
			</True>
		</Action>
	</GoTo_Tappables>
	<GoTo_TappableOrAgencyHeadquarters ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="if">
					<If expression="#program;       if(User::getVariable('BankedManInTan') &gt; 0)       {        return false;       }       else       {        var character = Character::find('ManInTan');        var characterInstanceList = Land::getAllInstancesOfObject(character);        foreach(characterInstanceList as instance)        {         if(!Object::getDelete(instance))         {          return false;         }        }       }       return true;">
						<Then>
							<Action type="actionSequence" script="SecretAgents_Scripts:GoTo_AgencyHeadquarters" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="actionSequence" script="SecretAgents_Scripts:GoTo_Tappables" />
						</Then>
					</Else>
				</Action>
			</True>
		</Action>
	</GoTo_TappableOrAgencyHeadquarters>
	<ManInTan_Tapped_Radius parallel="true" cache="true">
		<Action type="checkRequirements">
			<Requirement type="variable" variable="SecretAgents" />
			<True>
				<Action type="playflyby" flybyName="BlastEffect" radius="5" unitScale="0.13" playbackFPS="50" />
				<Action type="runScriptOnAll" character="ManInTan" in_radius="5" radius_delay="0.3" script="SecretAgents_Scripts:ManInTan_Tapped_Local" />
				<Action type="runScript" script="SecretAgents_Scripts:ManInTan_Tapped_Local" />
			</True>
		</Action>
	</ManInTan_Tapped_Radius>
	<ManInTan_Tapped_Local parallel="true" cache="true">
		<Action type="setVariable" intVariable="SecretAgents_TappablesTapped" intValue="SecretAgents_TappablesTapped+1" />
		<Action type="if">
			<If expression="bitwiseAnd([Object::ObjectFlags], 1) == 0" asObjectExpression="true">
				<Then>
					<Action type="actionSequence" script="SecretAgents_Scripts:ManInTan_Reward" />
					<Action type="setObjectFlag" flags="delete" />
					<Action type="anim-play" animation="Tap" />
					<Action type="anim-waitforend" />
					<Action type="deletecharacter" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="setObjectFlag" flags="delete" />
					<Action type="deletecharacter" />
				</Then>
			</Else>
		</Action>
		<Action type="if">
			<If expression="#program;        if(User::getVariable('BankedManInTan') &gt; 0)        {         return false;        }        else        {         var character = Character::find('ManInTan');         var characterInstanceList = Land::getAllInstancesOfObject(character);         foreach(characterInstanceList as instance)         {          if(!Object::getDelete(instance))          {           return false;          }         }        }        return true;">
				<Then>
					<Action type="hudTip" text="UI_MenInTan_Cleared" time="10s" requiresActiveHUD="false" />
				</Then>
			</If>
		</Action>
	</ManInTan_Tapped_Local>
	<ManInTan_AnimateAndKill parallel="true" cache="true" runQueueState="RunInAnyState">
		<Action type="anim-play" animation="Tap" />
		<Action type="anim-waitforend" />
		<Action type="deletecharacter" />
	</ManInTan_AnimateAndKill>
	<ManInTan_Reward parallel="true" cache="true">
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="active quest" quest="SecretAgents_DCS_ManInTan" />
			</Requirements>
			<True>
				<Action type="updateVariable" variable="DCS_MIT" value="DCS_MIT + 1" />
			</True>
		</Action>
		<Action type="reward" save="true" SecretAgents_ActivePrizeTrackCurrency="toDouble(System::getConfigValue('__SecretAgents_Spreadsheet_Config:Tappables:Award_PTCurrency__'))" suppress_sound="true" />
		<Action type="setVariable" intVariable="SecretAgents_CraftChance" intValue="rand(100)" disableEvents="true" addTempIfNotExisting="true" />
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="formula" formula="SecretAgents_CraftChance &lt; (toDouble(System::getConfigValue('__SecretAgents_Spreadsheet_Config:Tappables:DropChance_Craft1__'))*100)" />
					<Requirement type="reqList" location="SecretAgents_Requirements:ActOne" />
				</Requirements>
				<Then>
					<Action type="reward" save="true" SecretAgents_Schematics="toDouble(System::getConfigValue('__SecretAgents_Spreadsheet_Config:Tappables:Award_Craft1__'))" suppress_sound="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="SecretAgents_CraftChance &lt; (toDouble(System::getConfigValue('__SecretAgents_Spreadsheet_Config:Tappables:DropChance_Craft2__'))*100)" />
					<Requirement type="reqList" location="SecretAgents_Requirements:ActTwo" />
				</Requirements>
				<Then>
					<Action type="reward" save="true" SecretAgents_Schematics="toDouble(System::getConfigValue('__SecretAgents_Spreadsheet_Config:Tappables:Award_Craft2__'))" suppress_sound="true" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="formula" formula="SecretAgents_CraftChance &lt; (toDouble(System::getConfigValue('__SecretAgents_Spreadsheet_Config:Tappables:DropChance_Craft3__'))*100)" />
					<Requirement type="reqList" location="SecretAgents_Requirements:ActThree" />
				</Requirements>
				<Then>
					<Action type="reward" save="true" SecretAgents_Schematics="toDouble(System::getConfigValue('__SecretAgents_Spreadsheet_Config:Tappables:Award_Craft3__'))" suppress_sound="true" />
				</Then>
			</ElseIf>
		</Action>
	</ManInTan_Reward>
	<ManInTan_TapAnimation>
		<Action type="anim-play" animation="Tap" />
	</ManInTan_TapAnimation>
	<Find_GatherIntel_ExitMenu_WithSound>
		<Action type="sound" sound="UIButton" />
		<Action type="returnToInGameState" />
		<Action type="runScript" script="SecretAgents_Scripts:Find_GatherIntel" />
	</Find_GatherIntel_ExitMenu_WithSound>
	<Find_GatherIntel_ExitMenu>
		<Action type="returnToInGameState" />
		<Action type="runScript" script="SecretAgents_Scripts:Find_GatherIntel" />
	</Find_GatherIntel_ExitMenu>
	<Find_GatherIntel ignoreHUD="true" cache="true">
		<Action type="pantoobject" time="0" building="AgencyHeadquarters" fakeTouch="true" fakeTouchAvoidsIndicators="true" />
	</Find_GatherIntel>
	<ScorpioBundle_V1>
		<Action type="notificationLarge" icon="ICO_STOR_Single_Bundle_Mastermind1" title="CON_ScorpioBundle_V1_name" text="UI_AtW_ItemPurchased" button="UI_OK" />
		<Action type="scheduleScript" mode="replace" script="SecretAgents_Scripts:ScorpioBundle_V1_Focus" shouldSave="true" relativeTime="1s" />
	</ScorpioBundle_V1>
	<ScorpioBundle_V1_Focus ignoreHUD="true">
		<Action type="if">
			<If expression="System::evaluate('Game::State::GameState_CustomTouch')">
				<Then>
					<Action type="scheduleScript" mode="replace" script="SecretAgents_Scripts:ScorpioBundle_V1_Focus" shouldSave="true" relativeTime="1s" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="focusOnMenuItem" itemName="VolcanoLair" inventory="true" />
				</Then>
			</Else>
		</Action>
	</ScorpioBundle_V1_Focus>
	<ScorpioBundle_V2>
		<Action type="notificationLarge" icon="ICO_STOR_Single_Bundle_Mastermind2" title="CON_ScorpioBundle_V1_name" text="UI_AtW_ItemPurchased" button="UI_OK" />
		<Action type="scheduleScript" mode="replace" script="SecretAgents_Scripts:ScorpioBundle_V2_Focus" shouldSave="true" relativeTime="1s" />
	</ScorpioBundle_V2>
	<ScorpioBundle_V2_Focus ignoreHUD="true">
		<Action type="if">
			<If expression="System::evaluate('Game::State::GameState_CustomTouch')">
				<Then>
					<Action type="scheduleScript" mode="replace" script="SecretAgents_Scripts:ScorpioBundle_V2_Focus" shouldSave="true" relativeTime="1s" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="focusOnMenuItem" itemName="MastermindHankScorpio" inventory="true" />
				</Then>
			</Else>
		</Action>
	</ScorpioBundle_V2_Focus>
	<RelaxBundle>
		<Action type="notificationLarge" icon="ICO_STOR_Single_Bundle_FourTwenty" title="CON_RelaxBundle_name" text="UI_AtW_ItemPurchased" button="UI_OK" />
		<Action type="focusOnMenuItem" itemName="SchoolBus" inventory="true" />
	</RelaxBundle>
	<GlobexCompound_Purchased>
		<Action type="notificationLarge" icon="ICO_STOR_Single_Bundle_GlobexCompound" title="BLD_GlobexCompound_name" text="UI_AtW_ItemPurchased" button="UI_OK" />
		<Action type="focusOnMenuItem" itemName="GlobexCompound" inventory="true" />
	</GlobexCompound_Purchased>
	<PurchaseLicense>
		<Action type="setVariable" intVariable="SecretAgents_SocialUpgrade_Purchased" intValue="1" />
		<Action type="notification" title="CON_HackersUpgradeKit_1_name" button="UI_OK" text="UI_HackersUpgradeKit_Purchased" icon="ICO_MHUD_SecretAgents_HackersUpgradeKit_MD" />
	</PurchaseLicense>
	<CameraReward parallel="true" cache="true">
		<Action type="setVariable" intVariable="SecretAgents_SocialCount" intValue="SecretAgents_SocialCount+1" />
		<Action type="reward" save="true" SecretAgents_ActivePrizeTrackCurrency="selector SecretAgents_PTCurrencyPerFriendAction" suppress_sound="true" />
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="reward" FriendPoint="selector friendPointsReward" money="selector socialMoneyReward" xp="1" donuts="1" chance="selector socialDonutChanceReward" chanceType="d" />
			</True>
			<False>
				<Action type="reward" FriendPoint="selector friendPointsReward" Krustyland_Tickets="selector socialTicketReward" xp="1" donuts="1" chance="selector socialDonutChanceReward" chanceType="d" />
			</False>
		</Action>
		<Action type="checkRequirements">
			<Requirement type="config" key="SecretAgents_GameConfig:EnabledNotifications:Social" value="1" />
			<True>
				<Action type="sendPeerNotification" blueprint="SecretAgents_Social" />
			</True>
		</Action>
	</CameraReward>
	<CleanCameraReward parallel="true">
		<Action type="reward" SecretAgents_ActivePrizeTrackCurrency="toDouble(System::getConfigValue('__SecretAgents_Spreadsheet_Config:Social:CurrencyPerCleanAction__'))" suppress_sound="true" FriendPoint="selector friendPointsRewardOwner" />
	</CleanCameraReward>
	<SecretAgentsFriendsHUDInfo parallel="true">
		<Action type="triggerevent" name="ScriptEvent" data="SecretAgents_UpdateFriendActionHelpVariables" />
		<Action type="runScript" script="SecretAgents_Scripts:SecretAgentsFriendsHUDInfoAux" />
	</SecretAgentsFriendsHUDInfo>
	<SecretAgentsFriendsHUDInfoAux>
		<Action type="checkRequirements">
			<Requirement type="reqList" location="SecretAgents_Requirements:ActOne" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="variable" variable="FriendActionsCount" count="91" not="true" />
					<True>
						<Action type="checkRequirements">
							<Requirement type="variable" variable="SecretAgents_SocialUpgrade_Purchased" />
							<True>
								<Action type="notification" title="RES_SecretAgents_PT1_Plural" button="UI_OK" text="GEN_ResourceListing_SecretAgents_PT1_Upgrade" icon="ICO_CUR_SecretAgents_CheapIntel_LG">
									<Variable name="SecretAgents_PT1_FOR_NEXT_FRIEND_ACTION" type="int" />
									<Variable name="SecretAgents_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
								</Action>
							</True>
							<False>
								<Action type="notification" title="RES_SecretAgents_PT1_Plural" button="UI_OK" text="GEN_ResourceListing_SecretAgents_PT1" icon="ICO_CUR_SecretAgents_CheapIntel_LG">
									<Variable name="SecretAgents_PT1_FOR_NEXT_FRIEND_ACTION" type="int" />
									<Variable name="SecretAgents_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
								</Action>
							</False>
						</Action>
					</True>
					<False>
						<Action type="notification" title="RES_SecretAgents_PT1_Plural" button="UI_OK" text="UI_SecretAgents_OutOfFriendActions" icon="ICO_CUR_SecretAgents_CheapIntel_LG"></Action>
					</False>
				</Action>
			</True>
		</Action>
		<Action type="checkRequirements">
			<Requirement type="reqList" location="SecretAgents_Requirements:ActTwo" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="variable" variable="FriendActionsCount" count="91" not="true" />
					<True>
						<Action type="checkRequirements">
							<Requirement type="variable" variable="SecretAgents_SocialUpgrade_Purchased" />
							<True>
								<Action type="notification" title="RES_SecretAgents_PT2_Plural" button="UI_OK" text="GEN_ResourceListing_SecretAgents_PT2_Upgrade" icon="ICO_CUR_SecretAgents_PersonalIntel_LG">
									<Variable name="SecretAgents_PT2_FOR_NEXT_FRIEND_ACTION" type="int" />
									<Variable name="SecretAgents_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
								</Action>
							</True>
							<False>
								<Action type="notification" title="RES_SecretAgents_PT2_Plural" button="UI_OK" text="GEN_ResourceListing_SecretAgents_PT2" icon="ICO_CUR_SecretAgents_PersonalIntel_LG">
									<Variable name="SecretAgents_PT2_FOR_NEXT_FRIEND_ACTION" type="int" />
									<Variable name="SecretAgents_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
								</Action>
							</False>
						</Action>
					</True>
					<False>
						<Action type="notification" title="RES_SecretAgents_PT2_Plural" button="UI_OK" text="UI_SecretAgents_OutOfFriendActions" icon="ICO_CUR_SecretAgents_PersonalIntel_LG"></Action>
					</False>
				</Action>
			</True>
		</Action>
		<Action type="checkRequirements">
			<Requirement type="reqList" location="SecretAgents_Requirements:ActThree" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="variable" variable="FriendActionsCount" count="91" not="true" />
					<True>
						<Action type="checkRequirements">
							<Requirement type="variable" variable="SecretAgents_SocialUpgrade_Purchased" />
							<True>
								<Action type="notification" title="RES_SecretAgents_PT3_Plural" button="UI_OK" text="GEN_ResourceListing_SecretAgents_PT3_Upgrade" icon="ICO_CUR_SecretAgents_CorporateIntel_LG">
									<Variable name="SecretAgents_PT3_FOR_NEXT_FRIEND_ACTION" type="int" />
									<Variable name="SecretAgents_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
								</Action>
							</True>
							<False>
								<Action type="notification" title="RES_SecretAgents_PT3_Plural" button="UI_OK" text="GEN_ResourceListing_SecretAgents_PT3" icon="ICO_CUR_SecretAgents_CorporateIntel_LG">
									<Variable name="SecretAgents_PT3_FOR_NEXT_FRIEND_ACTION" type="int" />
									<Variable name="SecretAgents_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
								</Action>
							</False>
						</Action>
					</True>
					<False>
						<Action type="notification" title="RES_SecretAgents_PT3_Plural" button="UI_OK" text="UI_SecretAgents_OutOfFriendActions" icon="ICO_CUR_SecretAgents_CorporateIntel_LG"></Action>
					</False>
				</Action>
			</True>
		</Action>
	</SecretAgentsFriendsHUDInfoAux>
	<ResetDCS_MIT>
		<Action type="setVariable" intVariable="DCS_MIT" intValue="0" />
	</ResetDCS_MIT>
	<ResetDCS1_Dossiers>
		<Action type="setVariable" intVariable="Plot_DCS1_CompleteCMs" intValue="0" />
	</ResetDCS1_Dossiers>
	<ResetDCS2_Dossiers>
		<Action type="setVariable" intVariable="Plot_DCS2_CompleteCMs" intValue="0" />
	</ResetDCS2_Dossiers>
	<EspionageMode_Switch>
		<Action type="runScript" script="ReturnToGameState" package="MiscScripts" />
		<Action type="checkExpression" expression="EspionageMode">
			<ExpressionCase value="1">
				<Action type="message" title="UI_EspionageMode_Toggle_Title_Off" text="UI_EspionageMode_Toggle_Text" />
			</ExpressionCase>
			<ExpressionCase value="0">
				<Action type="message" title="UI_EspionageMode_Toggle_Title_On" text="UI_EspionageMode_Toggle_Text" />
			</ExpressionCase>
		</Action>
		<Action type="updateVariable" variable="EspionageMode" value="1 - EspionageMode" />
		<Action type="runScript" script="ReturnToGameState" package="MiscScripts" />
	</EspionageMode_Switch>
	<EspionageModeFlippedOn parallel="true">
		<Action type="setObjectVariable" variable="EspionageModeJustFlipped" value="1" allowOrphan="false" asExpression="true" />
	</EspionageModeFlippedOn>
	<EspionageModeFlippedOff parallel="true">
		<Action type="setObjectVariable" variable="EspionageModeJustFlipped" value="0" allowOrphan="false" asExpression="true" />
	</EspionageModeFlippedOff>
	<EspionageModeFlippedOn_TownSquare parallel="true">
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var subBuilding = Array::getValueForKey(System::script, 'ObjectInstance');
                    var masterBuilding = Object::getProperty(subBuilding, 'MasterBuilding');
                    Object::setVariable(masterBuilding, 'EspionageModeJustFlipped', '1', 0, false);
                ]]></Program>
		</Action>
	</EspionageModeFlippedOn_TownSquare>
	<EspionageModeFlippedOff_TownSquare parallel="true">
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var subBuilding = Array::getValueForKey(System::script, 'ObjectInstance');
                    var masterBuilding = Object::getProperty(subBuilding, 'MasterBuilding');
                    Object::setVariable(masterBuilding, 'EspionageModeJustFlipped', '0', 0, false);
                ]]></Program>
		</Action>
	</EspionageModeFlippedOff_TownSquare>
	<EPATruck_Tapped parallel="true">
		<Action type="anim-play" animation="ActiveNoLoop" />
	</EPATruck_Tapped>
	<GrindhouseAssassin_Tapped parallel="true">
		<Action type="anim-play" animation="Tap" />
	</GrindhouseAssassin_Tapped>
	<GHOSTEnforcer_Tapped parallel="true">
		<Action type="anim-play" animation="Tap" />
	</GHOSTEnforcer_Tapped>
	<LavaMachine_Tapped parallel="true">
		<Action type="addBuildingOverlay" building="LavaMachine" order="1" maxAtOnce="1" waitForAnimComplete="true">
			<EffectOverlay bsv3="LavaMachineActiveOverlay02" anim="Active" randomStartFrame="false" rooted="true" allowInNormal="true" allowInWrecked="false" animLoop="false" />
		</Action>
	</LavaMachine_Tapped>
	<SecretAgentCar_Tapped parallel="true">
		<Action type="checkExpression" expression="EspionageMode">
			<ExpressionCase value="0">
				<Action type="anim-play" animation="ActiveNoLoop" />
			</ExpressionCase>
		</Action>
	</SecretAgentCar_Tapped>
	<NotALaserSharkPool_Tapped parallel="true">
		<Action type="anim-play" animation="ActiveNoLoop" />
	</NotALaserSharkPool_Tapped>
	<EPAHoverjet_Tapped parallel="true">
		<Action type="checkExpression" expression="EspionageMode">
			<ExpressionCase value="0">
				<Action type="anim-play" animation="ActiveNoLoop" />
			</ExpressionCase>
		</Action>
	</EPAHoverjet_Tapped>
	<GlobexBalloon_Tapped parallel="true">
		<Action type="checkExpression" expression="EspionageMode">
			<ExpressionCase value="0">
				<Action type="anim-play" animation="ActiveNoLoop" />
			</ExpressionCase>
		</Action>
	</GlobexBalloon_Tapped>
	<NothingToSeeHereSecretFoliage_Tapped parallel="true">
		<Action type="checkExpression" expression="Object::State">
			<ExpressionCase value="0">
				<Action type="setObjectVariable" variable="State" value="1" allowOrphan="false" asExpression="true" />
				<Action type="anim-play" animation="ActiveNoLoop" />
			</ExpressionCase>
			<ExpressionCase value="1">
				<Action type="setObjectVariable" variable="State" value="0" allowOrphan="false" asExpression="true" />
				<Action type="anim-play" animation="Active2" />
			</ExpressionCase>
		</Action>
	</NothingToSeeHereSecretFoliage_Tapped>
	<SecretBusShelter_Tapped parallel="true">
		<Action type="checkExpression" expression="EspionageMode">
			<ExpressionCase value="0">
				<Action type="anim-play" animation="ActiveNoLoop" />
			</ExpressionCase>
		</Action>
	</SecretBusShelter_Tapped>
	<DeadDropMailbox_Tapped parallel="true">
		<Action type="checkExpression" expression="EspionageMode">
			<ExpressionCase value="0">
				<Action type="anim-play" animation="ActiveNoLoop" />
			</ExpressionCase>
		</Action>
	</DeadDropMailbox_Tapped>
	<CheckpointParkBench_Tapped parallel="true">
		<Action type="checkExpression" expression="EspionageMode">
			<ExpressionCase value="0">
				<Action type="anim-play" animation="ActiveNoLoop" />
			</ExpressionCase>
		</Action>
	</CheckpointParkBench_Tapped>
	<ATFVan_Tapped parallel="true">
		<Action type="anim-play" animation="ActiveNoLoop" />
	</ATFVan_Tapped>
	<ManholeStation_Tapped parallel="true">
		<Action type="checkExpression" expression="EspionageMode">
			<ExpressionCase value="0">
				<Action type="anim-play" animation="ActiveNoLoop" />
			</ExpressionCase>
		</Action>
	</ManholeStation_Tapped>
	<WatchfulBillboard_Tapped parallel="true">
		<Action type="checkExpression" expression="EspionageMode">
			<ExpressionCase value="0">
				<Action type="anim-play" animation="ActiveNoLoop" />
			</ExpressionCase>
		</Action>
	</WatchfulBillboard_Tapped>
	<AutomatedTrackingMachineSecretATM_Tapped parallel="true">
		<Action type="checkExpression" expression="EspionageMode">
			<ExpressionCase value="0">
				<Action type="anim-play" animation="ActiveNoLoop" />
			</ExpressionCase>
		</Action>
	</AutomatedTrackingMachineSecretATM_Tapped>
	<SpyCarriage_Tapped parallel="true">
		<Action type="checkExpression" expression="EspionageMode">
			<ExpressionCase value="0">
				<Action type="anim-play" animation="ActiveNoLoop" />
			</ExpressionCase>
		</Action>
	</SpyCarriage_Tapped>
	<DeepDomeDrill_Tapped parallel="true">
		<Action type="anim-play" animation="ActiveNoLoop" />
	</DeepDomeDrill_Tapped>
	<FragrantSpyacinthsSecretFlowerBed_Tapped parallel="true">
		<Action type="anim-play" animation="Tap" />
	</FragrantSpyacinthsSecretFlowerBed_Tapped>
	<VigilantTownSquare_Tapped parallel="true">
		<Action type="checkExpression" expression="EspionageMode">
			<ExpressionCase value="0">
				<Action type="anim-play" animation="active_base">
					<Sub-Building animation="TownSquare_Middle" />
					<Sub-Building animation="TownSquare_West" />
					<Sub-Building animation="TownSquare_South" />
					<Sub-Building animation="TownSquare_East" />
					<Sub-Building animation="TownSquare_North" />
				</Action>
			</ExpressionCase>
		</Action>
	</VigilantTownSquare_Tapped>
	<MaudePraiselandStatue_Tapped parallel="true">
		<Action type="anim-play" animation="ActiveNoLoop" />
	</MaudePraiselandStatue_Tapped>
	<WeinerWall_Tapped parallel="true">
		<Action type="anim-play" animation="ActiveNoLoop" />
	</WeinerWall_Tapped>
	<ParachuteTarget_Tapped parallel="true">
		<Action type="anim-play" animation="ActiveNoLoop" />
	</ParachuteTarget_Tapped>
	<ScreamapillarPond_Tapped parallel="true">
		<Action type="sound" sound="Screamapillar_Tapped" />
		<Action type="anim-play" animation="ActiveNoLoop" />
	</ScreamapillarPond_Tapped>
	<GlobexRnD_Tapped parallel="true">
		<Action type="setObjectVariable" variable="State" value="1 - Object::State" allowOrphan="false" asExpression="true" />
		<Action type="anim-play" animation="ActiveNoLoop" />
	</GlobexRnD_Tapped>
	<GlobexOperations_Tapped parallel="true">
		<Action type="setObjectVariable" variable="State" value="1 - Object::State" allowOrphan="false" asExpression="true" />
		<Action type="anim-play" animation="ActiveNoLoop" />
	</GlobexOperations_Tapped>
	<Enable_EspionageMode>
		<Action type="returnToInGameState" waitForState="true" />
		<Action type="message" text="UI_EspionageMode_Surface" />
		<Action type="pantoobject" time="0" building="SurveillancePost" fakeTouch="true" fakeTouchAvoidsIndicators="true" />
	</Enable_EspionageMode>
	<SecretLandLoad parallel="true">
		<Action type="if">
			<If expression="and(System::evaluate('Game::State::GameState_CustomTouch'), greaterThan(DS_FRAMECNT, 0))">
				<Then>
					<Action type="if">
						<If expression="DroneScan_Active &amp;&amp; DS_PAUSED==0">
							<Then>
								<Action type="runScript" script="SecretAgents_Scripts_DroneScan:ConfirmQuit" />
							</Then>
						</If>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="runScript" script="SecretAgents_Scripts_DroneScan:FinishDroneScan" />
				</Then>
			</Else>
		</Action>
	</SecretLandLoad>
	<GlobexCompound_RnD parallel="true">
		<Action type="hudTip" text="UI_GlobexCompound_PieceCreated" time="10s" />
	</GlobexCompound_RnD>
	<GlobexCompound_Operations parallel="true">
		<Action type="hudTip" text="UI_GlobexCompound_PieceCreated" time="10s" />
	</GlobexCompound_Operations>
	<YakuzaJobEnd parallel="true">
		<Action type="flashScreen" colour="White" speed="3" />
	</YakuzaJobEnd>
	<GoTo_TappablesOrSurveillancePost>
		<Action type="if">
			<If>
				<Requirement type="character count" name="ManInTan" quantity="1" />
				<Then>
					<Action type="actionSequence" script="SecretAgents_Scripts:GoTo_Tappables" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="runScript" script="SecretAgents_Scripts:GoTo_SurveillancePost" />
				</Then>
			</Else>
		</Action>
	</GoTo_TappablesOrSurveillancePost>
	<RecommendEaster parallel="true">
		<Action type="recommendation" recType="Event" eventName="UI_Easter2017_Title" name="Easter2017_OnePanel" />
		<Action type="clearRecommendations" category="Event" name="SecretAgents_ThreePanel" />
		<Action type="recommendation" recType="Event" eventName="UI_SecretAgents_Title" name="SecretAgents_ThreePanel" />
	</RecommendEaster>
	<Facebook_Check parallel="true">
		<Action type="if">
			<If expression="User::isAnonymous() == 1 &amp;&amp; User::isAgeCompliant() == 0 &amp;&amp; Facebook::isLoggedIn() == 1">
				<Then>
					<Action type="program">
						<Program><![CDATA[
								#program;
								Facebook::logout();
							]]></Program>
					</Action>
					<Action type="updateVariable" variable="Facebook_ShowMessage" value="1" />
				</Then>
			</If>
		</Action>
		<Action type="updateVariable" variable="Facebook_Checked" value="1" />
	</Facebook_Check>
	<Facebook_Message>
		<Action type="message" text="UI_FacebookReject" />
	</Facebook_Message>
	<TheManWhoKnewTooLittle_4_Objective2_GoTo>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="active quest" quest="TheManWhoKnewTooLittle_4" objective="1" />
					<True>
						<Action type="actionSequence" script="SecretAgents_Scripts:GoTo_AgencyHeadquarters" />
					</True>
					<False>
						<Action type="actionSequence" script="SecretAgents_Scripts:Find_GatherIntel_ExitMenu" />
					</False>
				</Action>
			</True>
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
		</Action>
	</TheManWhoKnewTooLittle_4_Objective2_GoTo>
	<SecretAgents_Prestige_Act1>
		<Action type="reward">
			<Item type="consumable" name="SecretAgents_Prestige_Act1" useImmediately="true" />
		</Action>
	</SecretAgents_Prestige_Act1>
	<SecretAgents_Prestige_Act2>
		<Action type="reward">
			<Item type="consumable" name="SecretAgents_Prestige_Act2" useImmediately="true" />
		</Action>
	</SecretAgents_Prestige_Act2>
	<SecretAgents_Prestige_Act3>
		<Action type="reward">
			<Item type="consumable" name="SecretAgents_Prestige_Act3" useImmediately="true" />
		</Action>
	</SecretAgents_Prestige_Act3>
	<SecretAgents_PostEvent_PromoNotification>
		<Action type="notification" title="BLD_AuxillaryAgencyHQ_NAME" button="UI_OK" text="UI_AgencyHQ_SurfacingNotification" icon="AgencyHeadquarters_Menu" />
		<Action type="focusOnMenuItem" itemName="AuxillaryAgencyHQ" />
	</SecretAgents_PostEvent_PromoNotification>
</ScriptPackage>