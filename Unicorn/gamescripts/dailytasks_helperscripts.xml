<ScriptPackage>
	<OpenDailyChallengeSystemUI ignoreHUD="true" cache="true">
		<Action type="checkRequirements">
			<Requirement type="gamestate" state="State_DailyChallengeSystemMenu" not="true" />
			<True>
				<Action type="gotoState" state="State_DailyChallengeSystemMenu">
					<Extras>
						<Attribute name="menuConfig" value="DailyTasks_MenusConfig:DailyChallengeSystemMenuConfig" />
					</Extras>
				</Action>
				<Action type="sound" sound="DCS_OpenWindow" />
				<Action type="setVariable" intVariable="EventHubTabValue" intValue="1" />
			</True>
		</Action>
	</OpenDailyChallengeSystemUI>
	<OpenDailyChallengeSystemUINonBlockingFromGameState parallel="true" ignoreHUD="true" cache="true">
		<Action type="gotoState" state="GameState_InGame" waitForState="true" />
		<Action type="gotoState" state="State_DailyChallengeSystemMenu">
			<Extras>
				<Attribute name="menuConfig" value="DailyTasks_MenusConfig:DailyChallengeSystemMenuConfig" />
			</Extras>
		</Action>
		<Action type="sound" sound="DCS_OpenWindow" />
		<Action type="setVariable" intVariable="EventHubTabValue" intValue="1" />
	</OpenDailyChallengeSystemUINonBlockingFromGameState>
	<DismissTutorialTaskGoToPressed>
		<Action type="message" button="UI_OK" text="UI_DailyChallengeSystem_DismissTutorial_GotoPressed" />
		<Action type="gotoState" state="State_DailyChallengeSystemMenu">
			<Extras>
				<Attribute name="menuConfig" value="DailyTasks_MenusConfig:DailyChallengeSystemMenuConfig" />
			</Extras>
		</Action>
		<Action type="sound" sound="DCS_OpenWindow" />
		<Action type="setVariable" intVariable="EventHubTabValue" intValue="1" />
	</DismissTutorialTaskGoToPressed>
	<EndDCSTutorial ignoreHUD="true">
		<Action type="setVariable" boolVariable="DCS_TutorialComplete" boolValue="true" />
	</EndDCSTutorial>
	<WobbleButton ignoreHUD="true" parallel="true" cache="true">
		<Action type="wobbleSpecialEventButton" buttonID="DailyTasksSystem" speed="1.5" angle="10" duration="4s" waitForSpecialEventButtons="true" />
	</WobbleButton>
	<GoToShuttleToKL parallel="true">
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="land" land="Springfield" />
			</Requirements>
			<True>
				<Action type="pantoobject" building="KrustylandShuttleToKrustyland" fakeTouch="false" time="0" />
				<Action type="gotoland" land="Krustyland" showPopup="true" />
			</True>
		</Action>
	</GoToShuttleToKL>
	<TouchKwikeMart parallel="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="building" building="Kwik-E-Mart" />
					<True>
						<Action type="pantoobject" building="Kwik-E-Mart" fakeTouch="true" fakeTouchAvoidsIndicators="false" />
					</True>
					<False>
						<Action type="focusOnMenuItem" itemName="Kwik-E-Mart" inventory="true" />
					</False>
				</Action>
			</True>
			<False>
				<Action type="returnToInGameState" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</TouchKwikeMart>
	<GoToSquidport>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="pantoobject" building="SquidportEntrance" fakeTouch="true" />
			</True>
			<False>
				<Action type="returnToInGameState" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoToSquidport>
	<GoToKLTicketSource>
		<Action type="pantoobject" building="KrustylandEntrance" fakeTouch="false" />
	</GoToKLTicketSource>
	<GoToExclusiveResort>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="ExclusiveResort" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="ExclusiveResort" inventory="true" />
					</True>
					<False>
						<Action type="pantoobject" building="ExclusiveResort" fakeTouch="true" />
					</False>
				</Action>
			</True>
			<False>
				<Action type="returnToInGameState" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoToExclusiveResort>
	<GoToPrivateIsland_1>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="PrivateIsland" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="PrivateIsland" inventory="true" />
					</True>
					<False>
						<Action type="pantoobject" building="PrivateIsland" fakeTouch="true" />
					</False>
				</Action>
			</True>
			<False>
				<Action type="returnToInGameState" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoToPrivateIsland_1>
	<GoToPrivateIsland_2>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="PrivateIsland2" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="PrivateIsland2" inventory="true" />
					</True>
					<False>
						<Action type="pantoobject" building="PrivateIsland2" fakeTouch="true" />
					</False>
				</Action>
			</True>
			<False>
				<Action type="returnToInGameState" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoToPrivateIsland_2>
	<GoToPrivateIsland_3>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="PrivateIsland3" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="PrivateIsland3" inventory="true" />
					</True>
					<False>
						<Action type="pantoobject" building="PrivateIsland3" fakeTouch="true" />
					</False>
				</Action>
			</True>
			<False>
				<Action type="returnToInGameState" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoToPrivateIsland_3>
	<GoToPrivateIsland_4>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="PrivateIsland4" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="PrivateIsland4" inventory="true" />
					</True>
					<False>
						<Action type="pantoobject" building="PrivateIsland4" fakeTouch="true" />
					</False>
				</Action>
			</True>
			<False>
				<Action type="returnToInGameState" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoToPrivateIsland_4>
	<PlayClaimSound parallel="true" runQueueState="RunInAnyState">
		<Action type="sound" sound="DCS_RewardClaimed" />
	</PlayClaimSound>
	<PlayDismissSound parallel="true" runQueueState="RunInAnyState">
		<Action type="sound" sound="DCS_ChallengeDismissed" />
	</PlayDismissSound>
	<PlayCompletedSound parallel="true" runQueueState="RunInAnyState">
		<Action type="sound" sound="DCS_ChallengeCompleted" />
	</PlayCompletedSound>
	<GoTo_KLTappables>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="program">
					<Program><![CDATA[
							#program;
							var character = Character::find('KrustylandNPC');
							var characterInstanceList = Land::getAllInstancesOfObject(character);

							foreach(characterInstanceList as instance)
							{
								var jobInst = Character::getCurrentJobInstance(instance);
								if(jobInst != null)
								{
									var jobName = Job::getProperty(jobInst, 'Name');
									var  jobState = Job::getProperty(jobInst, 'State');
									if(jobName == 'NPCTicketGeneration' && jobState == '2' )
									{
										Script::runOnObjectInstance('DailyTasks_HelperScripts:PanToKLVisitor',instance);
										return;
							
									}
							
								}
							
							}
							Script::run('DailyTasks_HelperScripts:NoKLVisitors');
						]]></Program>
				</Action>
			</True>
		</Action>
	</GoTo_KLTappables>
	<PanToKLVisitor>
		<Action type="pantoobject" useObjectRef="true" />
	</PanToKLVisitor>
	<NoKLVisitors>
		<Action type="hudTip" text="UI_KrustylandVisitors_AllTappablesCleared" time="10s" requiresActiveHUD="false" />
	</NoKLVisitors>
	<GoTo_DC_CollectShatteredTokensFromMonorailTurnstiles_Joblist>
		<Action type="gotoState" state="GameState_JobList" extras="DailyTasks_MenusConfig:DC_CollectShatteredTokensFromMonorailTurnstiles_Joblist" />
	</GoTo_DC_CollectShatteredTokensFromMonorailTurnstiles_Joblist>
	<GoTo_DC_CheckLintTrapsforShatteredTokens>
		<Action type="gotoState" state="GameState_JobList" extras="DailyTasks_MenusConfig:DC_CheckLintTrapsforShatteredTokens_Joblist" />
	</GoTo_DC_CheckLintTrapsforShatteredTokens>
</ScriptPackage>