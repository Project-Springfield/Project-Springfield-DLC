<ScriptPackage>
	<ShowMiniEventIntro>
		<Action type="miniEventPanel">
			<Attribute name="config">
				<AttributeSet name="source">
					<Attribute name="file" value="HomervsThe18thMiniEventPopUp" />
				</AttributeSet>
				<AttributeSet name="playButtonText">
					<Requirement type="variable" variable="HomerVsThe18th_IntroSeen" not="true" />
					<Attribute name="text" value="UI_MiniEvents_PlayButton" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonTextHL">
					<Requirement type="variable" variable="HomerVsThe18th_IntroSeen" not="true" />
					<Attribute name="text" value="UI_MiniEvents_PlayButton" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonText">
					<Requirement type="variable" variable="HomerVsThe18th_IntroSeen" />
					<Attribute name="text" value="UI_OK" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonTextHL">
					<Requirement type="variable" variable="HomerVsThe18th_IntroSeen" />
					<Attribute name="text" value="UI_OK" localise="true" />
				</AttributeSet>
				<AttributeSet name="titleText">
					<Attribute name="text" value="UI_HomerVsThe18th_Panel_Title" localise="true" />
					<Attribute name="color" value="ffcb1bff" />
				</AttributeSet>
				<AttributeSet name="timeLeft">
					<Attribute name="text" value="UI_HomerVsThe18th_IntroPanel_Timer" localise="true" />
					<Attribute name="color" value="FFFFFFFF" />
				</AttributeSet>
				<AttributeSet name="textColumn1">
					<Attribute name="text" value="UI_HomerVsThe18th_IntroPanel_BottomLeft" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="textColumn2">
					<Attribute name="text" value="UI_HomerVsThe18th_IntroPanel_TopRight" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="textColumn3">
					<Attribute name="text" value="UI_HomerVsThe18th_IntroPanel_TopLeft" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="panel">
					<Attribute name="image" value="BSE_HomervsThe18th_MiniEventPanel_Intro" />
				</AttributeSet>
				<AttributeSet name="playButton">
					<Attribute name="color" value="0091F1FF" />
				</AttributeSet>
			</Attribute>
		</Action>
		<Action type="setVariable" boolVariable="HomerVsThe18th_IntroSeen" boolValue="true" />
		<Action type="updateVariable" variable="HomerVsThe18th_Store" value="true" />
		<Action type="recommendation" recType="Event" name="HomerVsThe18th_OnePanel" eventName="UI_HomerVsThe18th_Panel_Title" limitedTime="true" limitedTimeEndDate="HomerVsThe18th_End" />
		<Action type="reparseBuildMenu" />
	</ShowMiniEventIntro>
	<ShowMiniEventOutro>
		<Action type="miniEventPanel">
			<Attribute name="config">
				<AttributeSet name="source">
					<Attribute name="file" value="HomervsThe18thMiniEventPopUp" />
				</AttributeSet>
				<AttributeSet name="playButtonText">
					<Attribute name="text" value="UI_OK" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonTextHL">
					<Attribute name="text" value="UI_OK" localise="true" />
				</AttributeSet>
				<AttributeSet name="titleText">
					<Attribute name="text" value="UI_HomerVsThe18th_Panel_Title" localise="true" />
					<Attribute name="color" value="ffcb1bff" />
				</AttributeSet>
				<AttributeSet name="textColumn4">
					<Attribute name="text" value="UI_HomerVsThe18th_OutroPanel_TopRight" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="textColumn5">
					<Attribute name="text" value="UI_HomerVsThe18th_OutroPanel_BottomLeft" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="panel">
					<Attribute name="image" value="BSE_HomervsThe18th_MiniEventPanel_Outro" />
				</AttributeSet>
				<AttributeSet name="playButton">
					<Attribute name="color" value="0091F1FF" />
				</AttributeSet>
			</Attribute>
		</Action>
		<Action type="setVariable" boolVariable="HomerVsThe18th_Complete" boolValue="true" />
	</ShowMiniEventOutro>
	<OpenMasterQuest>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="gotoState" state="GameState_QuestProgress">
					<Extras>
						<Attribute name="questParentDelegate" value="HomerVsThe18th_MasterQuest" />
					</Extras>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</OpenMasterQuest>
	<ShowJobList ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="active quest" quest="PassPuffPuff_1" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="HomerVsThe18th_Event" />
									<Attribute name="JobList" value="HomerVsThe18th_JL_1" />
								</Extras>
							</Action>
						</Then>
					</If>
					<ElseIf>
						<Requirement type="active quest" quest="PassPuffPuff_2" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="HomerVsThe18th_Event" />
									<Attribute name="JobList" value="HomerVsThe18th_JL_2" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="active quest" quest="PassPuffPuff_3" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="HomerVsThe18th_Event" />
									<Attribute name="JobList" value="HomerVsThe18th_JL_3" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="active quest" quest="PassPuffPuff_4" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="HomerVsThe18th_Event" />
									<Attribute name="JobList" value="HomerVsThe18th_JL_4" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="active quest" quest="PassPuffPuff_5" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="HomerVsThe18th_Event" />
									<Attribute name="JobList" value="HomerVsThe18th_JL_5" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="active quest" quest="PassPuffPuff_6" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="HomerVsThe18th_Event" />
									<Attribute name="JobList" value="HomerVsThe18th_JL_6" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</ShowJobList>
	<CheckIfEnd ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="variable" variable="HomerVsThe18th_ExpiryDisplayed" />
			<True>
				<Action type="setVariable" boolVariable="HomerVsThe18th_Expired" boolValue="true" />
			</True>
		</Action>
	</CheckIfEnd>
	<ExpiryWarning_72hr>
		<Action type="message" text="UI_HomerVsThe18th_72HourExpiry_text" />
		<Action type="setVariable" boolVariable="HomerVsThe18th_PreExpiryDisplayed72" boolValue="true" />
	</ExpiryWarning_72hr>
	<ExpiryWarning_24hr>
		<Action type="message" text="{FormattedExpiration24}" formatMe="root">
			<FormattingConfig path="HomerVsThe18th_GameConfig:ExpirationFormattedText" />
		</Action>
		<Action type="setVariable" boolVariable="HomerVsThe18th_PreExpiryDisplayed24" boolValue="true" />
	</ExpiryWarning_24hr>
	<DisplayExpiry>
		<Action type="message" text="UI_HomerVsThe18th_Expired_text" />
		<Action type="clearRecommendations" category="Event" name="HomerVsThe18th_OnePanel" />
		<Action type="setVariable" boolVariable="HomerVsThe18th_ExpiryDisplayed" boolValue="true" />
	</DisplayExpiry>
	<MiniEventCompleted>
		<Action type="setVariable" boolVariable="HomerVsThe18th_Complete" boolValue="true" />
	</MiniEventCompleted>
	<AwardStPatricksDayBanner>
		<Action type="reward">
			<Item type="building" name="StPatricksDayStreetBanner" useImmediately="true" />
		</Action>
	</AwardStPatricksDayBanner>
	<EnterStoreCategory ignoreHUD="true">
		<Action type="focusOnMenuItem" menuCategory="HomerVsThe18th_Category" />
	</EnterStoreCategory>
	<AutoApplyLadyDuffSkinEnd parallel="true">
		<Action type="scheduleScript" mode="create" script="HomerVsThe18th_Scripts:AutoApplyLadyDuffSkinDelayed" relativeTime="2s" localLandOnly="true" shouldSave="true" />
	</AutoApplyLadyDuffSkinEnd>
	<AutoApplyLadyDuffSkinDelayed ignoreHUD="true">
		<Action type="consumable" consumable="LadyDuff" fromInventory="true" />
	</AutoApplyLadyDuffSkinDelayed>
	<GoToLadyDuffBundle>
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="characterunlocked" name="Duffman" unlockedskin="LadyDuff" not="true" />
				<Requirement type="building owned" building="DuffBrewery" not="true" />
			</Requirements>
			<True>
				<Action type="focusOnMenuItem" menuCategory="HomerVsThe18th_Category" itemName="DuffBreweryandLadyDuffBundle" />
			</True>
			<False>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="characterunlocked" name="Duffman" />
						<Requirement type="characterunlocked" name="Duffman" unlockedskin="LadyDuff" not="true" />
						<Requirement type="building owned" building="DuffBrewery" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" menuCategory="HomerVsThe18th_Category" itemName="LadyDuffandDuffPartyVanBundle" />
					</True>
				</Action>
			</False>
		</Action>
	</GoToLadyDuffBundle>
	<DuffFloat_Tapped>
		<Action type="checkRequirements">
			<Requirement type="conditional" logic="OR">
				<Requirement type="JobState" job="GiveOutSamples" state="Began" />
				<Requirement type="JobState" job="GiveOutSamples" state="WaitingOnAwards" />
			</Requirement>
			<True>
				<Action type="sound" sound="DuffFloat_GiveOutSamples_JobActive_Tap" />
			</True>
			<False>
				<Action type="sound" sound="DuffFloat_Tap" />
			</False>
		</Action>
	</DuffFloat_Tapped>
	<Crowd_Init ignoreHUD="true">
		<Action type="setObjectVariable" variable="CrowdState" value="0" />
	</Crowd_Init>
	<Crowd_Tapped parallel="true">
		<Action type="setObjectVariable" variable="CrowdState" value="mod(Object::CrowdState+1,3)" asExpression="true" />
	</Crowd_Tapped>
	<GoTo_UnrulyCrowd>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="checkRequirements">
					<Requirement type="building" building="UnrulyCrowd" />
					<False>
						<Action type="focusOnMenuItem" itemName="UnrulyCrowd" inventory="true" />
					</False>
					<True>
						<Action type="pantoobject" time="0" building="UnrulyCrowd" fakeTouch="false" />
					</True>
				</Action>
			</True>
		</Action>
	</GoTo_UnrulyCrowd>
	<Ramrod_Cleanup_ForceOverlayUpdate>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var character = Character::find('Ramrod');
                    ObjectVars::pushBackVariable('Ramrod', 'done');
                    ObjectVars::ObjectVars::popBackVariable('Ramrod');
                    return true;
                ]]></Program>
		</Action>
	</Ramrod_Cleanup_ForceOverlayUpdate>
</ScriptPackage>