<ScriptPackage>
	<CoconutBabaloo_Tapped parallel="true">
		<Action type="if">
			<If expression="[Object::SkinID]==0" asObjectExpression="true">
				<Then>
					<Action type="sound" sound="bld_CoconutBabaloo_tap" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="sound" sound="bld_CoconutBabalooRenovated_tap" />
				</Then>
			</Else>
		</Action>
	</CoconutBabaloo_Tapped>
	<StarlineCommander_Tapped parallel="true">
		<Action type="sound" sound="bld_StarlineCommander_tap" />
		<Action type="anim-play" building="StarlineCommander" animation="ActiveNoLoop" />
	</StarlineCommander_Tapped>
	<BundleOfLoveAwarded>
		<Action type="focusOnMenuItem" itemName="FountainOfLove" inventory="true" />
	</BundleOfLoveAwarded>
	<PowerPlant_HeartsSkin_Purchased>
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="building" building="PowerPlant" not="true" />
			</Requirements>
			<True>
				<Action type="reward">
					<Item type="consumable" name="PowerPlant_HeartsSkin" useImmediately="false" />
				</Action>
				<Action type="notification" title="BLD_PowerPlant_Hearts_name" button="UI_OK" text="UI_StoredInInventory_generic" icon="PowerPlant00_Valentines_Menu" />
			</True>
			<False>
				<Action type="reward">
					<Item type="consumable" name="PowerPlant_HeartsSkin" useImmediately="true" />
				</Action>
				<Action type="setBuildingSkin" skinName="PowerPlant_Hearts" />
				<Action type="pantoobject" building="PowerPlant" fakeTouch="false" time="0" />
			</False>
		</Action>
	</PowerPlant_HeartsSkin_Purchased>
	<PowerPlant_HeartsSkin_Start>
		<Action type="anim-play" onBuilding="PowerPlant" animation="Active15Loops" nowait="true" />
		<Action type="dialogue" character="Burns" text="QST_ValentinesCoolingTowersPlacement_3_dlg_Start_1_Burns" revealSpeed="medium" emotion="annoyed" />
		<Action type="dialogue" character="Smithers" text="QST_ValentinesCoolingTowersPlacement_3_dlg_Start_2_Smithers" revealSpeed="medium" />
		<Action type="dialogue" character="Burns" text="QST_ValentinesCoolingTowersPlacement_3_dlg_Start_3_Burns" revealSpeed="medium" />
		<Action type="dialogue" character="Smithers" text="QST_ValentinesCoolingTowersPlacement_3_dlg_Start_4_Smithers" revealSpeed="medium" emotion="surprised" />
		<Action type="dialogue" character="Burns" text="QST_ValentinesCoolingTowersPlacement_3_dlg_Start_5_Burns" revealSpeed="medium" />
		<Action type="dialogue" character="Smithers" text="QST_ValentinesCoolingTowersPlacement_3_dlg_Start_6_Smithers" revealSpeed="medium" emotion="dreamy" />
	</PowerPlant_HeartsSkin_Start>
	<GFTS_Con_Bought>
		<Action type="focusOnMenuItem" itemName="MaudeFlanders" inventory="true" />
	</GFTS_Con_Bought>
	<EnterCategory>
		<Action type="focusOnMenuItem" menuCategory="Valentines2016Category" />
	</EnterCategory>
	<Valentines2016_StoreRec>
		<Action type="recommendation" recType="Event" eventName="UI_Valentines2016_title" name="Valentines2016_OnePanel" />
	</Valentines2016_StoreRec>
	<Valentines2016_OpenResourceMenu ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="active quest" quest="TheGoldenAgeOfSwingers_1" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="Valentines2016_Event" />
									<Attribute name="JobList" value="Valentines2016_JL_01" />
								</Extras>
							</Action>
						</Then>
					</If>
					<ElseIf>
						<Requirement type="active quest" quest="TheGoldenAgeOfSwingers_2" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="Valentines2016_Event" />
									<Attribute name="JobList" value="Valentines2016_JL_02" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="active quest" quest="TheGoldenAgeOfSwingers_3" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="Valentines2016_Event" />
									<Attribute name="JobList" value="Valentines2016_JL_03" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="active quest" quest="TheGoldenAgeOfSwingers_4" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="Valentines2016_Event" />
									<Attribute name="JobList" value="Valentines2016_JL_04" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="active quest" quest="TheGoldenAgeOfSwingers_5" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="Valentines2016_Event" />
									<Attribute name="JobList" value="Valentines2016_JL_05" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</Valentines2016_OpenResourceMenu>
	<OpenMasterQuest>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="gotoState" state="GameState_QuestProgress">
					<Extras>
						<Attribute name="questParentDelegate" value="TheGoldenAgeOfSwingers_Master" />
					</Extras>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</OpenMasterQuest>
	<RegisterTelemetry_Regular parallel="true">
		<Action type="setVariable" intVariable="VD2016_RegularReward" intValue="VD2016_RegularReward + 1" />
		<Action type="setVariable" intVariable="VD2016_TotalHearts" intValue="VD2016_TotalHearts + 1" />
	</RegisterTelemetry_Regular>
	<RegisterTelemetry_Premium parallel="true">
		<Action type="setVariable" intVariable="VD2016_PremiumReward" intValue="VD2016_PremiumReward + 2" />
		<Action type="setVariable" intVariable="VD2016_TotalHearts" intValue="VD2016_TotalHearts + 2" />
	</RegisterTelemetry_Premium>
	<LogTelemetry parallel="true">
		<Action type="logevent" formatMe="true" param1Type="Enumeration" param1="{task}" param2Type="Score" param2="{Total}" param3Type="UserLevel" eventId="3689" />
		<Action type="logevent" formatMe="true" param1Type="Enumeration" param1="RegularReward{task}" param2Type="Score" param2="{Regular}" param3Type="UserLevel" eventId="3648" />
		<Action type="logevent" formatMe="true" param1Type="Enumeration" param1="PremiumReward{task}" param2Type="Score" param2="{Premium}" param3Type="UserLevel" eventId="3648" />
		<Action type="setVariable" intVariable="VD2016_RegularReward" intValue="0" />
		<Action type="setVariable" intVariable="VD2016_PremiumReward" intValue="0" />
	</LogTelemetry>
	<CheckIfEnd ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="variable" variable="Valentines2016_EventExpired" />
			<True>
				<Action type="setVariable" boolVariable="Valentines2016_Expired" boolValue="true" />
			</True>
		</Action>
	</CheckIfEnd>
	<ExpirationMessage72>
		<Action type="message" text="{FormattedExpiration72}" formatMe="true" />
	</ExpirationMessage72>
	<ExpirationMessage24>
		<Action type="message" text="{FormattedExpiration24}" formatMe="true" />
	</ExpirationMessage24>
	<ExpirationMessage0>
		<Action type="message" text="{FormattedExpiration0}" formatMe="true" />
	</ExpirationMessage0>
	<ShowMiniEventIntro>
		<Action type="miniEventPanel">
			<Attribute name="config">
				<AttributeSet name="playButtonText">
					<Attribute name="text" value="UI_MiniEvents_PlayButton" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonTextHL">
					<Attribute name="text" value="UI_MiniEvents_PlayButton" localise="true" />
				</AttributeSet>
				<AttributeSet name="titleText">
					<Attribute name="text" value="UI_Valentines2016_Title" localise="true" />
					<Attribute name="color" value="ffcb1bff" />
				</AttributeSet>
				<AttributeSet name="timeLeft">
					<Attribute name="text" value="UI_Valentines2016_IntroPanel_BottomText_1" localise="true" />
					<Attribute name="color" value="FFFFFFFF" />
				</AttributeSet>
				<AttributeSet name="textColumn4">
					<Attribute name="text" value="UI_Valentines2016_IntroPanel_Body1" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="textColumn5">
					<Attribute name="text" value="UI_Valentines2016_IntroPanel_Body2" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="panel">
					<Attribute name="image" value="BSE_VAL_MiniEventPanel_Intro" />
				</AttributeSet>
				<AttributeSet name="playButton">
					<Attribute name="color" value="0091F1FF" />
				</AttributeSet>
			</Attribute>
		</Action>
	</ShowMiniEventIntro>
	<IntroSeen>
		<Action type="setVariable" boolVariable="Valentines2016_IntroSeen" boolValue="true" />
	</IntroSeen>
	<ShowMiniEventOutro>
		<Action type="miniEventPanel">
			<Attribute name="config">
				<AttributeSet name="playButtonText">
					<Attribute name="text" value="UI_DoIt" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonTextHL">
					<Attribute name="text" value="UI_DoIt" localise="true" />
				</AttributeSet>
				<AttributeSet name="titleText">
					<Attribute name="text" value="UI_Valentines2016_Title" localise="true" />
					<Attribute name="color" value="ffcb1bff" />
				</AttributeSet>
				<AttributeSet name="timeLeft">
					<Attribute name="text" value=" " localise="false" />
					<Attribute name="color" value="FFFFFFFF" />
				</AttributeSet>
				<AttributeSet name="textColumn7">
					<Attribute name="text" value="UI_Valentines2016_OutroPanel_Body1" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="textColumn8">
					<Attribute name="text" value="UI_Valentines2016_OutroPanel_Body2" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="panel">
					<Attribute name="image" value="BSE_VAL_MiniEventPanel_Outro" />
				</AttributeSet>
				<AttributeSet name="playButton">
					<Attribute name="color" value="0091F1FF" />
				</AttributeSet>
			</Attribute>
		</Action>
	</ShowMiniEventOutro>
	<ME_LandLoad ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirements>
							<Requirement type="quest started" quest="TheGoldenAgeOfSwingers_1" />
							<Requirement type="variable" variable="Valentines2016_PreExpiryDisplayed72" not="true" />
							<Requirement type="time" start="_[System::evaluate('Date::Valentines2016_End')-fromHours(72)]_" end="_[System::evaluate('Date::Valentines2016_End')-fromHours(24)]_" />
							<Requirement type="variable" variable="Valentines2016_Complete" not="true" />
						</Requirements>
						<Then>
							<Action type="runScript" script="Valentines2016_Scripts:ExpirationMessage72">
								<FormattingConfig path="Valentines2016_MenuConfig:ExpirationFormattedText" />
							</Action>
							<Action type="setVariable" boolVariable="Valentines2016_PreExpiryDisplayed72" boolValue="true" />
							<Action type="runScript" script="OpenMasterQuest" package="Valentines2016_Scripts" waitUntilComplete="true" />
						</Then>
					</If>
					<ElseIf>
						<Requirements>
							<Requirement type="quest started" quest="TheGoldenAgeOfSwingers_1" />
							<Requirement type="variable" variable="Valentines2016_PreExpiryDisplayed24" not="true" />
							<Requirement type="time" start="_[System::evaluate('Date::Valentines2016_End')-fromHours(24)]_" end="Valentines2016_End" />
							<Requirement type="variable" variable="Valentines2016_Complete" not="true" />
						</Requirements>
						<Then>
							<Action type="runScript" script="Valentines2016_Scripts:ExpirationMessage24">
								<FormattingConfig path="Valentines2016_MenuConfig:ExpirationFormattedText" />
							</Action>
							<Action type="setVariable" boolVariable="Valentines2016_PreExpiryDisplayed24" boolValue="true" />
							<Action type="runScript" script="OpenMasterQuest" package="Valentines2016_Scripts" waitUntilComplete="true" />
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirements>
							<Requirement type="quest started" quest="TheGoldenAgeOfSwingers_1" />
							<Requirement type="variable" variable="Valentines2016_ExpiryDisplayed" not="true" />
							<Requirement type="time" start="Valentines2016_End" />
							<Requirement type="variable" variable="Valentines2016_Complete" not="true" />
						</Requirements>
						<Then>
							<Action type="checkRequirements">
								<Requirement type="active quest" quest="TheGoldenAgeOfSwingers_5" />
								<False>
									<Action type="runScript" script="Valentines2016_Scripts:ExpirationMessage0">
										<FormattingConfig path="Valentines2016_MenuConfig:ExpirationFormattedText" />
									</Action>
								</False>
							</Action>
							<Action type="clearRecommendations" category="Event" />
							<Action type="setVariable" boolVariable="Valentines2016_ExpiryDisplayed" boolValue="true" />
							<Action type="setVariable" boolVariable="Valentines2016_EventExpired" boolValue="true" />
							<Action type="runScript" script="OpenMasterQuest" package="Valentines2016_Scripts" waitUntilComplete="true" />
						</Then>
					</ElseIf>
				</Action>
			</True>
		</Action>
	</ME_LandLoad>
</ScriptPackage>