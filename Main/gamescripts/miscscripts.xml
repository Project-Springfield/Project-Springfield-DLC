<ScriptPackage>
	<LandEntered parallel="true"></LandEntered>
	<LocalLandEntered parallel="true">
		<Action type="runScript" script="LandEntered" package="MiscScripts" />
	</LocalLandEntered>
	<RemoteLandEntered parallel="true">
		<Action type="runScript" script="LandEntered" package="MiscScripts" />
	</RemoteLandEntered>
	<ClassicMiniEventsStarter ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="conditional" logic="AND">
				<Requirement type="formula" formula="DEEP_SPACE_HOMER_ENABLED == 0" />
				<Requirement type="formula" formula="HOMERSCHILIAD_ENABLED == 0" />
				<Requirement type="formula" formula="HOMERTHEHERETIC_ENABLED == 0" />
				<Requirement type="formula" formula="ROMMELWOOD_ENABLED == 0" />
			</Requirement>
			<True>
				<Action type="if">
					<If expression="DSH_Complete == 0">
						<Then>
							<Action type="setVariable" intVariable="DEEP_SPACE_HOMER_ENABLED" intValue="1" />
						</Then>
					</If>
					<ElseIf expression="HomersChiliad_Complete == 0">
						<Then>
							<Action type="setVariable" intVariable="HOMERSCHILIAD_ENABLED" intValue="1" />
						</Then>
					</ElseIf>
					<ElseIf expression="HomerTheHeretic_Complete == 0">
						<Then>
							<Action type="setVariable" intVariable="HOMERTHEHERETIC_ENABLED" intValue="1" />
						</Then>
					</ElseIf>
					<ElseIf expression="Rommelwood_Complete == 0">
						<Then>
							<Action type="setVariable" intVariable="ROMMELWOOD_ENABLED" intValue="1" />
						</Then>
					</ElseIf>
				</Action>
			</True>
		</Action>
	</ClassicMiniEventsStarter>
	<PanToObject>
		<Action type="if">
			<If expression="Object::UID != 0">
				<Then>
					<Action type="pantoobject" time="0" useObjectRef="true" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="if">
						<If>
							<Requirement type="land" land="Krustyland" />
							<Then>
								<Action type="pantoobject" time="0" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
							</Then>
						</If>
						<Else>
							<Then>
								<Action type="pantoobject" time="0" building="KrustylandShuttleToKrustyland" fakeTouch="true" />
							</Then>
						</Else>
					</Action>
				</Then>
			</Else>
		</Action>
	</PanToObject>
	<PanToKrustylandShuttle_Krustyland>
		<Action type="returnToInGameState" />
		<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
	</PanToKrustylandShuttle_Krustyland>
	<PanToKrustylandShuttle_Springfield>
		<Action type="returnToInGameState" />
		<Action type="pantoobject" building="KrustylandShuttleToKrustyland" fakeTouch="true" />
	</PanToKrustylandShuttle_Springfield>
	<OpenPrizeBox>
		<Action type="box" box="PrizeBox" />
	</OpenPrizeBox>
	<OpenPlatinumPrizeBox>
		<Action type="box" box="PlatinumPrizeBox" />
	</OpenPlatinumPrizeBox>
	<OpenWickedTreatBox>
		<Action type="box" box="WickedTreatBox" />
	</OpenWickedTreatBox>
	<OpenSantasSack>
		<Action type="box" box="SantasSack" />
	</OpenSantasSack>
	<OpenMysteryStocking>
		<Action type="box" box="MysteryStocking" />
	</OpenMysteryStocking>
	<TutorialRoadBadFirstPlacement>
		<Action type="dialogue" character="Homer" text="QST_TheNewEvergreenTerrace01_5_err_1_Homer" revealSpeed="medium" />
	</TutorialRoadBadFirstPlacement>
	<TutorialRoadBadSecondPlacement>
		<Action type="dialogue" character="Homer" text="QST_TheNewEvergreenTerrace01_5_err_1_Homer" revealSpeed="medium" />
	</TutorialRoadBadSecondPlacement>
	<TutorialRoadFirstPlaced>
		<Action type="message" text="QST_TheNewEvergreenTerrace01_3_dlg_Obj_1_1_System" />
	</TutorialRoadFirstPlaced>
	<CorruptionBuildingToInventory>
		<Action type="message" text="ERR_CorruptionBuildingToInventory" />
	</CorruptionBuildingToInventory>
	<BuildingToInventory>
		<Action type="message" text="UI_Added_To_Inventory" hasObject="true" />
	</BuildingToInventory>
	<GroupToInventory>
		<Action type="message" text="UI_Group_Added_To_Inventory" hasObject="true" />
	</GroupToInventory>
	<ValentineOwnerCollect parallel="true">
		<Action type="reward" object0="0" Heart2="2" money="15" xp="1" />
		<Action type="anim-play" animation="Victory_Pose" isController="true" />
	</ValentineOwnerCollect>
	<ValentineFriendGift parallel="true">
		<Action type="reward" Heart2="selector HeartsPerFriendAction" money="15" xp="1" />
		<Action type="anim-play" animation="Victory_Pose" isController="true" />
	</ValentineFriendGift>
	<OpenMysteryLoveBox>
		<Action type="box" box="MysteryLoveBox" />
	</OpenMysteryLoveBox>
	<OpenHeartGrinder>
		<Action type="box" box="HeartGrinder" />
	</OpenHeartGrinder>
	<OpenWhackBox>
		<Action type="box" box="WhackBox" />
	</OpenWhackBox>
	<OpenLaffyMeal>
		<Action type="box" box="LaffyMeal" />
	</OpenLaffyMeal>
	<LisaReleaseSnakes>
		<Action type="delay" time="0" />
	</LisaReleaseSnakes>
	<DoNothing>
		<Action type="delay" time="0" />
	</DoNothing>
	<DoNothingIgnoreHud ignoreHUD="true">
		<Action type="delay" time="0" />
	</DoNothingIgnoreHud>
	<Delay2s>
		<Action type="delay" time="2" />
	</Delay2s>
	<ShortDelayWithHud ignoreHUD="true">
		<Action type="delay" time="0.7" />
	</ShortDelayWithHud>
	<UnlockExpertLicense>
		<Action type="reward">
			<Item type="setvariable" name="expertLicense" value="true" />
		</Action>
	</UnlockExpertLicense>
	<AddSnakeEgg parallel="true">
		<Action type="createobject" name="SnakeEgg" save="true" />
		<Action type="setVariable" boolVariable="showNumberOfEggsInLand" boolValue="true" />
	</AddSnakeEgg>
	<HatchSnakeEgg parallel="true">
		<Action type="sound" sound="188_snake_egg_cracked.caf" />
		<Action type="anim-play" Building="SnakeEgg" animation="ActiveIN" />
		<Action type="createobject" name="WhackableSnake" count="1" save="true" panCamera="false" showFadeIn="false" onThisObject="true" />
		<Reward chance="0.01" chanceType="d" donut="1" forceReward="hatchedEgg" forceRewardCount="100" />
		<Action type="anim-play" Building="SnakeEgg" animation="ActiveOUT" />
		<Action type="deletebuilding" building="SnakeEgg" />
	</HatchSnakeEgg>
	<HatchEggError>
		<Action type="message" text="UI_WhackingDay_TooManySnakes_Body" />
	</HatchEggError>
	<TriggerIntroCutscene>
		<Action type="triggerVideo" file="intro" ext="mp4" skippable="yes" />
	</TriggerIntroCutscene>
	<TriggerCutscene01>
		<Action type="triggerVideo" file="cutscene01" ext="mp4" skippable="yes" />
	</TriggerCutscene01>
	<TriggerCutscene02>
		<Action type="triggerVideo" file="cutscene02" ext="mp4" skippable="yes" />
	</TriggerCutscene02>
	<TriggerCutscene03>
		<Action type="triggerVideo" file="cutscene03" ext="mp4" skippable="yes" />
	</TriggerCutscene03>
	<ReturnToGameState>
		<Action type="returnToInGameState" />
	</ReturnToGameState>
	<ReturnToGameStateWithSound>
		<Action type="sound" sound="UIButton" ignoreObject="true" />
		<Action type="returnToInGameState" />
	</ReturnToGameStateWithSound>
	<ReturnToGameStateWithSound_NoHUD ignoreHUD="true">
		<Action type="sound" sound="UIButton" ignoreObject="true" />
		<Action type="returnToInGameState" />
	</ReturnToGameStateWithSound_NoHUD>
	<ForceSpringfield>
		<Action type="if" formatMe="deep">
			<If>
				<Requirement type="land" land="Springfield" />
				<Then>
					<Action type="runScript" script="{script}" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="returnToInGameState" />
					<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
				</Then>
			</Else>
		</Action>
	</ForceSpringfield>
	<ResetSkin parallel="true">
		<Action type="skin-set" skin="{Object::Name}" formatMe="true" />
	</ResetSkin>
	<GoToCharacterForBuildingJob>
		<Action type="checkRequirements" formatMe="deep">
			<Requirements>
				<Requirement type="building" building="{building}" not="true" />
			</Requirements>
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="{building}" not="true" />
					</Requirements>
					<True>
						<Action type="runScript" script="XMAS2015_Scripts:GoToCrafting" />
					</True>
					<False>
						<Action type="focusOnMenuItem" itemName="{building}" inventory="true" />
					</False>
				</Action>
			</True>
			<False>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="building" building="{home_building}" not="true" />
					</Requirements>
					<True>
						<Action type="checkRequirements">
							<Requirements>
								<Requirement type="item" item="{home_building}" not="true" />
							</Requirements>
							<True>
								<Action type="focusOnMenuItem" itemName="{home_building}" />
							</True>
							<False>
								<Action type="focusOnMenuItem" itemName="{home_building}" inventory="true" />
							</False>
						</Action>
					</True>
					<False>
						<Action type="pantoobject" character="{character}" time="0.0" fakeTouch="false" blockTouches="false" />
						<Action type="touchCharacter" character="{character}" />
					</False>
				</Action>
			</False>
		</Action>
	</GoToCharacterForBuildingJob>
	<OpenMysteryLoveBox2>
		<Action type="box" box="MysteryLoveBox2" />
	</OpenMysteryLoveBox2>
	<OpenPinkEasterEggPack>
		<Action type="box" box="PinkEasterEggPack" />
	</OpenPinkEasterEggPack>
	<OpenYellowEasterEggPack>
		<Action type="box" box="YellowEasterEggPack" />
	</OpenYellowEasterEggPack>
	<OpenBlueEasterEggPack>
		<Action type="box" box="BlueEasterEggPack" />
	</OpenBlueEasterEggPack>
	<OpenPinkEasterBox>
		<Action type="box" box="PinkEasterBox" />
	</OpenPinkEasterBox>
	<OpenYellowEasterBox>
		<Action type="box" box="YellowEasterBox" />
	</OpenYellowEasterBox>
	<OpenBlueEasterBox>
		<Action type="box" box="BlueEasterBox" />
	</OpenBlueEasterBox>
	<OpenGymLockerMysteryBox>
		<Action type="box" box="GymLockerMysteryBox" />
	</OpenGymLockerMysteryBox>
	<ShowRareItemReward>
		<Action type="messageBoxWithImages" titleText="BLD_NaturalFabergeEgg_name" tipText="UI_FabergeEggTip" messageText="UI_FabergeEggMessage" bgImage="ICO_PRIZ_AWRD_Easter_MenuBaseImage" prizeImage="ICO_Easter_FabregeEgg_LG" />
	</ShowRareItemReward>
	<OpenPremiumMysteryBoxSummerDonuts>
		<Action type="box" box="PremiumMysteryBoxSummerDonuts" />
	</OpenPremiumMysteryBoxSummerDonuts>
	<OpenUFOReward1>
		<Action type="box" box="UFOReward1" />
	</OpenUFOReward1>
	<OpenUFOReward2>
		<Action type="box" box="UFOReward2" />
	</OpenUFOReward2>
	<OpenUFOReward3>
		<Action type="box" box="UFOReward3" />
	</OpenUFOReward3>
	<OpenFirstUFO>
		<Action type="box" box="FirstUFO" />
	</OpenFirstUFO>
	<GoToFriendMap>
		<Action type="gotoFriendMap" />
	</GoToFriendMap>
	<GoToFrinksTown>
		<Action type="gotoFrinksTown" />
	</GoToFrinksTown>
	<GoToInGame>
		<Action type="if">
			<If>
				<Requirement type="players land" />
				<Then>
					<Action type="gotoState" state="GameState_InGame" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="friend land" />
				<Then>
					<Action type="gotoState" state="FriendState_InGame" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="OpponentState_InGame" />
				</Then>
			</Else>
		</Action>
	</GoToInGame>
	<GoToInGameWithSound>
		<Action type="sound" sound="UIButton" />
		<Action type="if">
			<If>
				<Requirement type="players land" />
				<Then>
					<Action type="gotoState" state="GameState_InGame" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="friend land" />
				<Then>
					<Action type="gotoState" state="FriendState_InGame" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="OpponentState_InGame" />
				</Then>
			</Else>
		</Action>
	</GoToInGameWithSound>
	<GoToInGameWithSoundRunInAnyState runQueueState="RunInAnyState">
		<Action type="sound" sound="UIButton" />
		<Action type="if">
			<If>
				<Requirement type="players land" />
				<Then>
					<Action type="gotoState" state="GameState_InGame" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="friend land" />
				<Then>
					<Action type="gotoState" state="FriendState_InGame" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="gotoState" state="OpponentState_InGame" />
				</Then>
			</Else>
		</Action>
	</GoToInGameWithSoundRunInAnyState>
	<ClearEventRecommendations>
		<Action type="clearRecommendations" category="Event" />
	</ClearEventRecommendations>
	<PrizeBoxOpeningBoxMessage>
		<Action type="message" text="GEN_OpenBox" />
	</PrizeBoxOpeningBoxMessage>
	<GoToFriendInGame>
		<Action type="gotoState" state="FriendState_InGame" parentState="ActiveState" />
	</GoToFriendInGame>
	<GoToFriendMapInGame>
		<Action type="gotoState" state="BaseWorldMapState" />
	</GoToFriendMapInGame>
	<SDownsOnStoreAll>
		<Action type="message" text="CAS_StoreAll_Error_Downs" />
	</SDownsOnStoreAll>
	<GoKartsOnStoreAll>
		<Action type="message" text="CAS_StoreAll_Error_GoKarts" />
	</GoKartsOnStoreAll>
	<SpecialEventButtonInFriendMapPressed>
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="quest started" quest="SpringfieldHeights04" />
			</Requirements>
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="quest started" quest="TheFirstBillionIsTheHardest" />
					</Requirements>
					<True>
						<Action type="setVariable" intVariable="VisitedLeaderboard" intValue="1" />
					</True>
				</Action>
				<Action type="gotoState" state="WorldState_Leaderboard">
					<Extras>
						<Attribute name="MenuConfig0" value="SpringfieldHeights_LeaderboardMenuConfig:LeaderboardMenu" />
					</Extras>
				</Action>
			</True>
		</Action>
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="quest started" quest="SpringfieldHeights04" />
			</Requirements>
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="quest started" quest="TheFirstBillionIsTheHardest" />
					</Requirements>
					<True>
						<Action type="setVariable" intVariable="VisitedLeaderboard" intValue="1" />
						<Action type="gotoState" state="WorldState_Leaderboard">
							<Extras>
								<Attribute name="MenuConfig0" value="SpringfieldHeights_LeaderboardMenuConfig:LeaderboardMenu" />
							</Extras>
						</Action>
					</True>
					<False>
						<Action type="gotoState" state="WorldState_Leaderboard">
							<Extras>
								<Attribute name="MenuConfig0" value="SpringfieldHeights_LeaderboardMenuConfig:LeaderboardMenu" />
							</Extras>
						</Action>
					</False>
				</Action>
			</True>
		</Action>
	</SpecialEventButtonInFriendMapPressed>
	<OpenNewUserBoxCharacters ignoreHUD="true">
		<Action type="box" box="NewUserBoxCharacters" />
	</OpenNewUserBoxCharacters>
	<OpenNewUserBoxBuildings ignoreHUD="true">
		<Action type="box" box="NewUserBoxBuildings" />
	</OpenNewUserBoxBuildings>
	<SpawnGil ignoreHUD="true">
		<Action type="createobject" name="PromoGilPermanent" save="true" showUnlock="false" panCamera="true" />
	</SpawnGil>
	<KillGil parallel="true">
		<Action type="deletecharacter" character="PromoGilPermanent" />
		<Action type="setVariable" boolVariable="PromoActive" boolValue="false" />
	</KillGil>
	<PromoGilPermanentSpawn parallel="true">
		<Action type="setVariable" boolVariable="PromoActive" boolValue="true" />
		<Action type="deletecharacter" character="PromoGilLvl60" ignoreObject="true" />
	</PromoGilPermanentSpawn>
	<ShowArchiveIntroMessage>
		<Action type="notificationLarge" title="UI_ArchivePrompt_Title" text="UI_ArchivePrompt_Text" button="UI_ArchivePrompt_Button" tooltip="UI_ArchivePrompt_Tooltip" icon="ico_crue_archiving" />
		<Action type="setVariable" boolVariable="ArchiveIntroMessageShown" boolValue="true" />
	</ShowArchiveIntroMessage>
	<AskGetMore>
		<Action type="genericConfirmation" formatMe="deep">
			<Attribute name="config">
				<AttributeSet name="onOK">
					<Attribute name="script" value="{mtxStoreScript}" />
				</AttributeSet>
				<AttributeSet name="onCancel">
					<Attribute name="script" value="{cancelScript}" />
				</AttributeSet>
				<AttributeSet name="onBackButton">
					<Attribute name="mapTo" value="onCancel" />
				</AttributeSet>
				<AttributeSet name="title">
					<Attribute name="text" value="{titleText}" localise="true" />
				</AttributeSet>
				<AttributeSet name="message">
					<Attribute name="text" value="RES_InsufficientPremium" localise="true" />
					<Attribute name="font" value="eFont_Small" />
					<Attribute name="color" value="FFFFFFFF" />
				</AttributeSet>
				<AttributeSet name="button_Cancel">
					<Attribute name="button_text">
						<AttributeSet name="text">
							<Attribute name="text" value="GEN_Cancel" localise="true" />
						</AttributeSet>
					</Attribute>
					<Attribute name="button_back">
						<AttributeSet name="button">
							<Attribute name="color" value="BB0310FF" />
						</AttributeSet>
					</Attribute>
				</AttributeSet>
				<AttributeSet name="button_OK">
					<Attribute name="button_text">
						<AttributeSet name="text">
							<Attribute name="text" value="GEN_GetMore" localise="true" />
						</AttributeSet>
					</Attribute>
					<Attribute name="button_back">
						<AttributeSet name="button">
							<Attribute name="color" value="D03484FF" />
						</AttributeSet>
					</Attribute>
				</AttributeSet>
				<AttributeSet name="exitButton">
					<Attribute name="active" value="false" />
				</AttributeSet>
				<AttributeSet name="showTwoButtons">
					<Attribute name="active" value="true" />
				</AttributeSet>
			</Attribute>
		</Action>
	</AskGetMore>
	<OpenMTXStore>
		<Action type="focusOnMenuItem" allowInLand="any" minimalStoreFile="FriendMapStoreMenu.xml" onLeaveStore="{onLeaveScript}" formatMe="true" />
	</OpenMTXStore>
	<ShowQuestBadgeInfoPopup runQueueState="RunInAnyState">
		<Action type="questIconsInfoPopUp">
			<Attribute name="config">
				<AttributeSet name="GotItBase">
					<Attribute name="active" value="true" />
				</AttributeSet>
				<AttributeSet name="ExitButton">
					<Attribute name="active" value="false" />
				</AttributeSet>
				<AttributeSet name="TitleText">
					<Attribute name="text" value="UI_QuestBadges_Title" localise="true" />
				</AttributeSet>
				<AttributeSet name="SummaryText">
					<Attribute name="text" value="UI_QuestBadges_Text" localise="true" />
				</AttributeSet>
				<AttributeSet name="GotItText">
					<Attribute name="text" value="UI_QuestBadges_Button" localise="true" />
				</AttributeSet>
				<AttributeSet name="GotItTextHL">
					<Attribute name="text" value="UI_QuestBadges_Button" localise="true" />
				</AttributeSet>
				<AttributeSet name="Components">
					<Attribute name="ListedBadges">
						<AttributeSet>
							<Attribute name="ListedBadge">
								<AttributeSet name="BadgeDescription">
									<Attribute name="text" value="UI_QuestBadges_Completed_Desc" localise="true" />
								</AttributeSet>
								<AttributeSet name="BadgeIcon">
									<Attribute name="image" value="ico_badge_completed" />
								</AttributeSet>
							</Attribute>
						</AttributeSet>
						<AttributeSet>
							<Attribute name="ListedBadge">
								<AttributeSet name="BadgeDescription">
									<Attribute name="text" value="UI_QuestBadges_InProgress_Desc" localise="true" />
								</AttributeSet>
								<AttributeSet name="BadgeIcon">
									<Attribute name="image" value="ico_badge_inprogress" />
								</AttributeSet>
							</Attribute>
						</AttributeSet>
						<AttributeSet>
							<Attribute name="ListedBadge">
								<AttributeSet name="BadgeDescription">
									<Attribute name="text" value="UI_QuestBadges_Blocked_Desc" localise="true" />
								</AttributeSet>
								<AttributeSet name="BadgeIcon">
									<Attribute name="image" value="ico_badge_blocked" />
								</AttributeSet>
							</Attribute>
						</AttributeSet>
						<AttributeSet>
							<Attribute name="ListedBadge">
								<AttributeSet name="BadgeDescription">
									<Attribute name="text" value="UI_QuestBadges_LimitedTime_Desc" localise="true" />
								</AttributeSet>
								<AttributeSet name="BadgeIcon">
									<Attribute name="image" value="ico_badge_timelimited" />
								</AttributeSet>
							</Attribute>
						</AttributeSet>
					</Attribute>
				</AttributeSet>
			</Attribute>
		</Action>
	</ShowQuestBadgeInfoPopup>
	<ShowCredits>
		<Action type="showDynamicMenu">
			<Attribute name="file" value="creditsmenu" />
			<Attribute name="baseHook" value="creditsmenuhook" />
		</Action>
	</ShowCredits>
	<DismissMenu ignoreHUD="true">
		<Action type="showMenu" clearShownMenu="true" />
	</DismissMenu>
	<LandVisited>
		<Action type="checkRequirements">
			<Requirement type="reqList" location="ClasslessReunion_Requirements:Yearbook_MysteryBox_Available" />
			<True>
				<Action type="recommendation" recType="Special" name="Yearbook_MysteryBox" />
			</True>
			<False>
				<Action type="clearRecommendations" category="Special" name="Yearbook_MysteryBox" />
			</False>
		</Action>
		<Action type="logevent" eventId="2801" param1Type="Enumeration" param1AsFormula="User::getMayhemID()" />
	</LandVisited>
	<OpenStore_FocusOnRiver>
		<Action type="focusOnMenuItem" itemName="RiverDrawing" menuCategory="TownBuilding" />
	</OpenStore_FocusOnRiver>
	<InsufficientTokens>
		<Action type="scheduleScript" mode="create" script="MiscScripts:InsufficientTokens_Script" relativeTime="0.5s" localLandOnly="true" shouldSave="false" />
	</InsufficientTokens>
	<InsufficientTokens_Script>
		<Action type="gotoState" state="GameState_InGame" />
		<Action type="message" text="UI_InsufficientMysteryBoxTokens" />
	</InsufficientTokens_Script>
	<InsufficientSWTickets>
		<Action type="scheduleScript" mode="create" script="MiscScripts:InsufficientSWTickets_Script" relativeTime="0.5s" localLandOnly="true" shouldSave="false" />
	</InsufficientSWTickets>
	<InsufficientSWTickets_Script>
		<Action type="gotoState" state="GameState_InGame" />
		<Action type="message" text="UI_InsufficientTickets" />
	</InsufficientSWTickets_Script>
	<InsufficientGiftCards>
		<Action type="scheduleScript" mode="create" script="MiscScripts:InsufficientGiftCards_Script" relativeTime="0.5s" localLandOnly="true" shouldSave="false" />
	</InsufficientGiftCards>
	<InsufficientGiftCards_Script>
		<Action type="gotoState" state="GameState_InGame" />
		<Action type="message" text="UI_InsufficientGiftCards" />
	</InsufficientGiftCards_Script>
	<DecorationTapped_WithActive parallel="true" ignoreHUD="true">
		<Action type="setObjectVariable" variable="State" value="mod(Object::State+1, 2)" asExpression="true" allowOrphan="false" />
	</DecorationTapped_WithActive>
	<DecorationTapped_WithActiveInOut parallel="true" ignoreHUD="true">
		<Action type="if">
			<If expression="Object::ActiveIn == 0 &amp;&amp; Object::ActiveOut == 0">
				<Then>
					<Action type="setObjectVariable" variable="State" value="mod(Object::State+1, 2)" asExpression="true" allowOrphan="false" />
					<Action type="if">
						<If expression="Object::State == 0">
							<Then>
								<Action type="setObjectVariable" variable="ActiveOut" value="1" asExpression="true" allowOrphan="false" />
							</Then>
						</If>
						<Else>
							<Then>
								<Action type="setObjectVariable" variable="ActiveIn" value="1" asExpression="true" allowOrphan="false" />
							</Then>
						</Else>
					</Action>
				</Then>
			</If>
		</Action>
	</DecorationTapped_WithActiveInOut>
	<Decoration_ActiveIn_Done parallel="true" ignoreHUD="true">
		<Action type="setObjectVariable" variable="ActiveIn" value="0" asExpression="true" allowOrphan="false" />
	</Decoration_ActiveIn_Done>
	<Decoration_ActiveOut_Done parallel="true" ignoreHUD="true">
		<Action type="setObjectVariable" variable="ActiveOut" value="0" asExpression="true" allowOrphan="false" />
	</Decoration_ActiveOut_Done>
	<DecorationTapped_SingleTap parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="Tap" nowait="true" />
	</DecorationTapped_SingleTap>
	<DecorationTapped_SingleTap_Wait parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="Tap" />
	</DecorationTapped_SingleTap_Wait>
	<DecorationTapped_SingleTap_Wait_2Loop parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="Tap" />
		<Action type="anim-play" animation="Tap" />
	</DecorationTapped_SingleTap_Wait_2Loop>
	<DecorationTapped_SingleTap_Wait_3Loop parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="Tap" />
		<Action type="anim-play" animation="Tap" />
		<Action type="anim-play" animation="Tap" />
	</DecorationTapped_SingleTap_Wait_3Loop>
	<DecorationTapped_SingleActive parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="ActiveNoLoop" nowait="true" />
	</DecorationTapped_SingleActive>
	<DecorationTapped_SingleActive_NoWait parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="Active" nowait="true" />
	</DecorationTapped_SingleActive_NoWait>
	<DecorationTapped_SingleActive_Wait parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="ActiveNoLoop" nowait="false" />
	</DecorationTapped_SingleActive_Wait>
	<DecorationTapped_SingleActive3Times_Wait parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="QuickActive" nowait="false" />
	</DecorationTapped_SingleActive3Times_Wait>
	<DecorationTapped_Active_Wait parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="Active" nowait="false" />
	</DecorationTapped_Active_Wait>
	<DecorationTapped_Active01InOut parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="Active01In" />
		<Action type="anim-play" animation="Active01" />
		<Action type="anim-play" animation="Active01Out" />
	</DecorationTapped_Active01InOut>
	<DecorationTapped_ThreeRandom parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="TapThreeRandom" nowait="true" />
	</DecorationTapped_ThreeRandom>
	<DecorationTapped_TwoRandom parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="TapTwoRandom" nowait="true" />
	</DecorationTapped_TwoRandom>
	<DecorationTapped_TwoRandom_Tap1Tap2 parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="TapTwoRandom_Tap1Tap2" nowait="true" />
	</DecorationTapped_TwoRandom_Tap1Tap2>
	<DecorationTapped_TwoRandom_TapTap2 parallel="true" ignoreHUD="true">
		<Action type="anim-play" animation="TapTwoRandom_TapTap2" isController="true" nowait="true" />
	</DecorationTapped_TwoRandom_TapTap2>
	<CancelArrangementBonusHudTips parallel="true" runQueueState="RunInAnyState">
		<Action type="delay" time="1.0" />
		<Action type="hudTip" clear="true" requiresActiveHUD="false" />
	</CancelArrangementBonusHudTips>
	<GoToMasterBuildingSelected>
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var subBuilding = Array::getValueForKey(System::script, 'ObjectInstance');
                    var masterBuilding = Object::getProperty(subBuilding, 'MasterBuilding');
                    GameState_BuildingSelected::setBuilding(masterBuilding);
                    System::setGameState('GameState_BuildingSelected');
                ]]></Program>
		</Action>
	</GoToMasterBuildingSelected>
	<TownPortraitSavedHUDTip ignoreHUD="true" runQueueState="RunInAnyState">
		<Action type="hudTip" text="UI_ScreenshotStitcherSavedSuccessfully" time="10s" requiresActiveHUD="false" />
	</TownPortraitSavedHUDTip>
	<TownPortraitErrorHUDTip>
		<Action type="hudTip" text="UI_ScreenshotStitcherError" time="10s" requiresActiveHUD="false" />
	</TownPortraitErrorHUDTip>
	<Crowd_Three_Way_Toggle_Tapped parallel="true" ignoreHUD="true">
		<Action type="setObjectVariable" variable="CrowdState" value="mod(Object::CrowdState+1,3)" asExpression="true" />
	</Crowd_Three_Way_Toggle_Tapped>
	<Crowd_Three_Way_Toggle_Init ignoreHUD="true">
		<Action type="setObjectVariable" variable="CrowdState" value="0" />
	</Crowd_Three_Way_Toggle_Init>
	<Three_Way_Toggle_Tapped parallel="true" ignoreHUD="true">
		<Action type="setObjectVariable" variable="ToggleState" value="mod(Object::ToggleState+1,3)" asExpression="true" />
	</Three_Way_Toggle_Tapped>
	<Four_Way_Toggle_Tapped parallel="true" ignoreHUD="true">
		<Action type="setObjectVariable" variable="ToggleState" value="mod(Object::ToggleState+1,4)" asExpression="true" />
	</Four_Way_Toggle_Tapped>
	<PeopleCatcherTruckTapped parallel="true" ignoreHUD="true">
		<Action type="delay" time="0.7" />
		<Action type="anim-play" animation="PeopleCatcherTruckController" nowait="true" />
	</PeopleCatcherTruckTapped>
	<Season33PrizeTrack_IntroMessage>
		<Action type="notification" title="UI_Season33PrizeTrack_title" text="UI_Season33PrizeTrack_intro" icon="ICO_PRIZ_Season33_Event_LG" button="UI_OK" />
	</Season33PrizeTrack_IntroMessage>
	<Season33PrizeTrack_OpenMasterQuest>
		<Action type="if">
			<If>
				<Requirement type="time" end="Season33PrizeTrack_StartComingSoon" />
				<Then>
					<Action type="notification" title="UI_Season33PrizeTrack_title" text="UI_Season33PrizeTrack_comingsoonmessage" icon="ICO_PRIZ_Season33_Event_LG" button="UI_OK" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="time" end="Season33PrizeTrack_Start" />
				<Then>
					<Action type="notification" title="UI_Season33PrizeTrack_title" text="UI_Season33PrizeTrack_comingsoonmessagelate" icon="ICO_PRIZ_Season33_Event_LG" button="UI_OK" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="checkRequirements">
						<Requirement type="gamestate" state="GameState_QuestProgress" />
						<True>
							<Action type="changeQuestForProgressState" name="Season33_MasterQuest" />
						</True>
						<False>
							<Action type="gotoState" state="GameState_QuestProgress" forceState="true">
								<Extras>
									<Attribute name="questParentDelegate" value="Season33_MasterQuest" />
								</Extras>
							</Action>
						</False>
					</Action>
				</Then>
			</Else>
		</Action>
	</Season33PrizeTrack_OpenMasterQuest>
	<Season33PrizeTrack_ShowJobList ignoreHUD="true">
		<Action type="if">
			<If>
				<Requirement type="active quest" quest="Season33Prize1" />
				<Then>
					<Action type="gotoState" state="GameState_SpecialEventJobList">
						<Extras>
							<Attribute name="SpecialEvent" value="Season33PrizeTrack" />
							<Attribute name="JobList" value="Season33PrizeTrack_JL_1" />
						</Extras>
					</Action>
				</Then>
			</If>
			<ElseIf>
				<Requirement type="active quest" quest="Season33Prize2" />
				<Then>
					<Action type="gotoState" state="GameState_SpecialEventJobList">
						<Extras>
							<Attribute name="SpecialEvent" value="Season33PrizeTrack" />
							<Attribute name="JobList" value="Season33PrizeTrack_JL_2" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirement type="active quest" quest="Season33Prize3" />
				<Then>
					<Action type="gotoState" state="GameState_SpecialEventJobList">
						<Extras>
							<Attribute name="SpecialEvent" value="Season33PrizeTrack" />
							<Attribute name="JobList" value="Season33PrizeTrack_JL_3" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirement type="active quest" quest="Season33Prize4" />
				<Then>
					<Action type="gotoState" state="GameState_SpecialEventJobList">
						<Extras>
							<Attribute name="SpecialEvent" value="Season33PrizeTrack" />
							<Attribute name="JobList" value="Season33PrizeTrack_JL_4" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirement type="active quest" quest="Season33Prize5" />
				<Then>
					<Action type="gotoState" state="GameState_SpecialEventJobList">
						<Extras>
							<Attribute name="SpecialEvent" value="Season33PrizeTrack" />
							<Attribute name="JobList" value="Season33PrizeTrack_JL_5" />
						</Extras>
					</Action>
				</Then>
			</ElseIf>
		</Action>
	</Season33PrizeTrack_ShowJobList>
	<Season33Prize1_End>
		<Action type="loseResources" SeasonPrizeTrack_HollywoodStars="SeasonPrizeTrack_HollywoodStars" />
		<Action type="reward">
			<Item type="character" name="SashaReed" useImmediately="true" />
		</Action>
	</Season33Prize1_End>
	<GiveShatteredTokens_1>
		<Action type="reward" save="true" ShatteredToken="1" />
		<Action type="notification" title="UI_MysteryBoxToken" text="UI_ShatteredDreams_MysteryBoxToken_1" icon="ICO_STOR_MysteryBoxToken_ShatteredDreams_1" button="UI_OK" />
	</GiveShatteredTokens_1>
	<GiveShatteredTokens_2>
		<Action type="reward" save="true" ShatteredToken="2" />
		<Action type="notification" title="UI_MysteryBoxToken" text="UI_ShatteredDreams_MysteryBoxToken_2" icon="ICO_STOR_MysteryBoxToken_ShatteredDreams_1" button="UI_OK" />
	</GiveShatteredTokens_2>
	<GiveShatteredTokens_3>
		<Action type="reward" save="true" ShatteredToken="3" />
		<Action type="notification" title="UI_MysteryBoxToken" text="UI_ShatteredDreams_MysteryBoxToken_3" icon="ICO_STOR_MysteryBoxToken_ShatteredDreams_1" button="UI_OK" />
	</GiveShatteredTokens_3>
	<GiveShatteredTokens_5>
		<Action type="reward" save="true" ShatteredToken="5" />
		<Action type="notification" title="UI_MysteryBoxToken" text="UI_ShatteredDreams_MysteryBoxToken_5" icon="ICO_STOR_MysteryBoxToken_ShatteredDreams_1" button="UI_OK" />
	</GiveShatteredTokens_5>
	<GiveShatteredTokens_10>
		<Action type="reward" save="true" ShatteredToken="10" />
		<Action type="notification" title="UI_MysteryBoxToken" text="UI_ShatteredDreams_MysteryBoxToken_10" icon="ICO_STOR_MysteryBoxToken_ShatteredDreams_1" button="UI_OK" />
	</GiveShatteredTokens_10>
	<GiveShatteredTokens_15>
		<Action type="reward" save="true" ShatteredToken="15" />
		<Action type="notification" title="UI_MysteryBoxToken" text="UI_ShatteredDreams_MysteryBoxToken_15" icon="ICO_STOR_MysteryBoxToken_ShatteredDreams_1" button="UI_OK" />
	</GiveShatteredTokens_15>
	<DecorationTapped_SingleTap_Wait_GPFrontGate parallel="true" ignoreHUD="true">
		<Action type="delay" time="0.75" />
		<Action type="setObjectVariable" variable="GateTappedToOpen" value="1" />
		<Action type="anim-play" animation="GeriatricParkGateSouthController" onBuilding="GeriatricParkGateSouth" isController="true" nowait="true" />
		<Action type="anim-play" animation="GeriatricParkGateEastController" onBuilding="GeriatricParkGateEast" isController="true" />
	</DecorationTapped_SingleTap_Wait_GPFrontGate>
	<BundlePurchasedInventoryMessage>
		<Action type="message" text="UI_EoS2015_ItemInInventory" />
	</BundlePurchasedInventoryMessage>
	<DecorationTapped_CircusSign parallel="true" ignoreHUD="true">
		<Action type="setObjectVariable" variable="State" value="mod(Object::State+1, 2)" asExpression="true" allowOrphan="false" />
		<Action type="anim-play" animation="CircusSignSouthController" onBuilding="CircusSignSouth" isController="true" nowait="true" />
		<Action type="anim-play" animation="CircusSignEastController" onBuilding="CircusSignEast" isController="true" />
	</DecorationTapped_CircusSign>
	<DecorationTapped_DemoDerbySign parallel="true" ignoreHUD="true">
		<Action type="setObjectVariable" variable="SouthState" value="mod(Object::SouthState+1, 4)" asExpression="true" allowOrphan="false" />
		<Action type="setObjectVariable" variable="EastState" value="mod(Object::EastState+1, 4)" asExpression="true" allowOrphan="false" />
	</DecorationTapped_DemoDerbySign>
	<DevilsDeluge_Tap parallel="true" ignoreHUD="true">
		<Action type="if">
			<If expression="greaterThanEQ(rand(100), 90)">
				<Then>
					<Action type="anim-play" animation="Tap_02" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="anim-play" animation="Tap_01" />
				</Then>
			</Else>
		</Action>
	</DevilsDeluge_Tap>
	<RoadsideCarFootballLauncher_Tap parallel="true" ignoreHUD="true">
		<Action type="if">
			<If expression="greaterThanEQ(rand(100), 80)">
				<Then>
					<Action type="anim-play" animation="Tap02" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="anim-play" animation="Tap01" />
				</Then>
			</Else>
		</Action>
	</RoadsideCarFootballLauncher_Tap>
	<HomerWhale_Tapped parallel="true">
		<Action type="sound" sound="337_whale.caf" />
		<Action type="anim-play" onBuilding="HomerWhaleTop" animation="HomerWhaleController" />
		<Action type="anim-play" onBuilding="HomerWhaleTop" animation="HomerWhaleTop" />
	</HomerWhale_Tapped>
  <WelcomeMessage>
    <Action type="setVariable" intVariable="WelcomeScreenCooldown" intValue="System::evaluate('Calendar::Next::00:00')" />
    <Action type="genericMessage">
      <Attribute name="config">
        <AttributeSet name="title">
          <Attribute name="text" value="UI_PS_WelcomeTitle" localise="true" >
          </Attribute>
          <Attribute name="font" value="eFont_Special" />
          <Attribute name="color" value="F8DB27FF" />
        </AttributeSet>
        <AttributeSet name="message">
          <Attribute name="text" value="UI_PS_WelcomeText" localise="true" />
          <Attribute name="font" value="eFont_Small" />
          <Attribute name="color" value="FFFFFFFF" />
        </AttributeSet>
        <AttributeSet name="left">
          <Attribute name="image" value="newlogo" />
        </AttributeSet>
        <AttributeSet name="button_OK">
          <Attribute name="button_text">
            <AttributeSet name="text">
              <Attribute name="text" value="UI_OK" localise="true" />
            </AttributeSet>
          </Attribute>
        </AttributeSet>
      </Attribute>
    </Action>
  </WelcomeMessage>
  <UnlockGridType>
    <Action type="setVariable" intVariable="Setting_EnforceGridType" intValue="1 - Setting_EnforceGridType" />
		<Action type="checkExpression" expression="Setting_EnforceGridType">
			<ExpressionCase value="0">
        <Action type="returnToInGameState" />
			</ExpressionCase>
			<ExpressionCase value="1">
        <Action type="message" text="UI_RestartApp" />
        <Action type="returnToInGameState" />
			</ExpressionCase>
		</Action>
  </UnlockGridType>
  <DebugButton>
    <!--Action type="message" text="__PS_GameConfig:PrintValues:Value00__"/-->
    <!--Action type="openBrowser" -->
		<!--Action type="createobject" name="Ghost" count="40" save="true" panCamera="false" /-->
		<!--Action type="reward">
			<Item type="consumable" name="GhostBomb" />
			<Item type="consumable" name="GhostBomb" />
			<Item type="consumable" name="GhostBomb" />
			<Item type="consumable" name="GhostBomb" />
			<Item type="consumable" name="GhostBomb" />
		</Action-->
    <!--Action type="random">
      <Action type="anim-play" flyBy="UFO" animation="Attack_Ray_Gun_Level_1" nowait="true" loop="true" />
      <Action type="anim-play" flyBy="UFO" animation="Attack_Ray_Gun_Level_2" nowait="true" loop="true" />
      <Action type="anim-play" flyBy="UFO" animation="Attack_Ray_Gun_Level_3" nowait="true" loop="true" />
    </Action-->
    <Action type="message" text="__PS_GameConfig:PrintValues:Value02__" />
		<!--Action type="setVariable" boolVariable="GhostBombToolUnlocked" boolValue="true" />
		<Action type="reparseBuildMenu" /-->
  </DebugButton>
</ScriptPackage>
