<ScriptPackage>
	<EnterStoreCategory ignoreHUD="true">
		<Action type="focusOnMenuItem" menuCategory="Poochie_Category" />
	</EnterStoreCategory>
	<ShowMiniEventIntro>
		<Action type="miniEventPanel">
			<Attribute name="config">
				<AttributeSet name="source">
					<Attribute name="file" value="PoochieMiniEventPopUp" />
				</AttributeSet>
				<AttributeSet name="playButtonText">
					<Requirement type="variable" variable="Poochie_IntroSeen" not="true" />
					<Attribute name="text" value="UI_MiniEvents_PlayButton" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonTextHL">
					<Requirement type="variable" variable="Poochie_IntroSeen" not="true" />
					<Attribute name="text" value="UI_MiniEvents_PlayButton" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonText">
					<Requirement type="variable" variable="Poochie_IntroSeen" />
					<Attribute name="text" value="UI_OK" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonTextHL">
					<Requirement type="variable" variable="Poochie_IntroSeen" />
					<Attribute name="text" value="UI_OK" localise="true" />
				</AttributeSet>
				<AttributeSet name="titleText">
					<Attribute name="text" value="UI_Poochie_Title" localise="true" />
					<Attribute name="color" value="ffcb1bff" />
				</AttributeSet>
				<AttributeSet name="timeLeft">
					<Attribute name="text" value="UI_Poochie_IntroPanel_Timer" localise="true" />
					<Attribute name="color" value="FFFFFFFF" />
				</AttributeSet>
				<AttributeSet name="textColumn1">
					<Attribute name="text" value="UI_Poochie_IntroPanel_1" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="textColumn2">
					<Attribute name="text" value="UI_Poochie_IntroPanel_2" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="textColumn3">
					<Attribute name="text" value="UI_Poochie_IntroPanel_3" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="panel">
					<Attribute name="image" value="BSE_Poochie_MiniEventPanel_Intro" />
				</AttributeSet>
				<AttributeSet name="playButton">
					<Attribute name="color" value="0091F1FF" />
				</AttributeSet>
			</Attribute>
		</Action>
		<Action type="setVariable" boolVariable="Poochie_IntroSeen" boolValue="true" />
		<Action type="recommendation" recType="Event" name="Poochie_OnePanel" eventName="UI_Poochie_Title" limitedTime="true" limitedTimeEndDate="Poochie_End" />
		<Action type="reparseBuildMenu" />
	</ShowMiniEventIntro>
	<ShowMiniEventOutro>
		<Action type="miniEventPanel">
			<Attribute name="config">
				<AttributeSet name="source">
					<Attribute name="file" value="PoochieMiniEventPopUp" />
				</AttributeSet>
				<AttributeSet name="playButtonText">
					<Attribute name="text" value="UI_OK" localise="true" />
				</AttributeSet>
				<AttributeSet name="playButtonTextHL">
					<Attribute name="text" value="UI_OK" localise="true" />
				</AttributeSet>
				<AttributeSet name="titleText">
					<Attribute name="text" value="UI_Poochie_Title" localise="true" />
					<Attribute name="color" value="ffcb1bff" />
				</AttributeSet>
				<AttributeSet name="textColumn4">
					<Attribute name="text" value="UI_Poochie_OutroPanel_1" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="textColumn5">
					<Attribute name="text" value="UI_Poochie_OutroPanel_2" localise="true" />
					<Attribute name="color" value="000000FF" />
				</AttributeSet>
				<AttributeSet name="panel">
					<Attribute name="image" value="BSE_Poochie_MiniEventPanel_Outro" />
				</AttributeSet>
				<AttributeSet name="playButton">
					<Attribute name="color" value="0091F1FF" />
				</AttributeSet>
			</Attribute>
		</Action>
		<Action type="setVariable" boolVariable="Poochie_Complete" boolValue="true" />
	</ShowMiniEventOutro>
	<OpenMasterQuest>
		<Action type="checkRequirements">
			<Requirement type="active quest" quest="Poochie_MasterQuest" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="land" land="Springfield" />
					<True>
						<Action type="gotoState" state="GameState_QuestProgress">
							<Extras>
								<Attribute name="questParentDelegate" value="Poochie_MasterQuest" />
							</Extras>
						</Action>
					</True>
					<False>
						<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
					</False>
				</Action>
			</True>
		</Action>
		<Action type="checkRequirements">
			<Requirement type="active quest" quest="PoorlyWorkingTitle_6" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="land" land="Springfield" />
					<True>
						<Action type="gotoState" state="GameState_QuestProgress">
							<Extras>
								<Attribute name="questNameToShow" value="PoorlyWorkingTitle_6" />
							</Extras>
						</Action>
					</True>
					<False>
						<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
					</False>
				</Action>
			</True>
		</Action>
		<Action type="checkRequirements">
			<Requirement type="active quest" quest="PoorlyWorkingTitle_7" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="land" land="Springfield" />
					<True>
						<Action type="gotoState" state="GameState_QuestProgress">
							<Extras>
								<Attribute name="questNameToShow" value="PoorlyWorkingTitle_7" />
							</Extras>
						</Action>
					</True>
					<False>
						<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
					</False>
				</Action>
			</True>
		</Action>
	</OpenMasterQuest>
	<ShowJobList ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="active quest" quest="PoorlyWorkingTitle_1" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="Poochie_Event" />
									<Attribute name="JobList" value="Poochie_JL_1" />
								</Extras>
							</Action>
						</Then>
					</If>
					<ElseIf>
						<Requirement type="active quest" quest="PoorlyWorkingTitle_2" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="Poochie_Event" />
									<Attribute name="JobList" value="Poochie_JL_2" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="conditional" logic="OR">
							<Requirement type="active quest" quest="PoorlyWorkingTitle_3" />
							<Requirement type="active quest" quest="PoorlyWorkingTitle_3_NoRogerMyersJr" />
						</Requirement>
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="Poochie_Event" />
									<Attribute name="JobList" value="Poochie_JL_3" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="active quest" quest="PoorlyWorkingTitle_4" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="Poochie_Event" />
									<Attribute name="JobList" value="Poochie_JL_4" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="active quest" quest="PoorlyWorkingTitle_5" />
						<Then>
							<Action type="gotoState" state="GameState_SpecialEventJobList">
								<Extras>
									<Attribute name="SpecialEvent" value="Poochie_Event" />
									<Attribute name="JobList" value="Poochie_JL_5" />
								</Extras>
							</Action>
						</Then>
					</ElseIf>
				</Action>
			</True>
			<False>
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</ShowJobList>
	<CheckIfEnd ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="variable" variable="Poochie_ExpiryDisplayed" />
			<True>
				<Action type="setVariable" boolVariable="Poochie_Expired" boolValue="true" />
			</True>
		</Action>
	</CheckIfEnd>
	<ExpiryWarning_72hr>
		<Action type="message" text="UI_Poochie_72HourExpiry_text" />
		<Action type="setVariable" boolVariable="Poochie_PreExpiryDisplayed72" boolValue="true" />
		<Action type="runScript" script="Poochie_Scripts:OpenMasterQuest" waitUntilComplete="true" />
	</ExpiryWarning_72hr>
	<ExpiryWarning_24hr>
		<Action type="message" text="{FormattedExpiration24}" formatMe="root">
			<FormattingConfig path="Poochie_GameConfig:ExpirationFormattedText" />
		</Action>
		<Action type="setVariable" boolVariable="Poochie_PreExpiryDisplayed24" boolValue="true" />
		<Action type="runScript" script="Poochie_Scripts:OpenMasterQuest" waitUntilComplete="true" />
	</ExpiryWarning_24hr>
	<DisplayExpiry>
		<Action type="message" text="UI_Poochie_Expired_text" />
		<Action type="clearRecommendations" category="Event" name="Poochie_OnePanel" />
		<Action type="setVariable" boolVariable="Poochie_ExpiryDisplayed" boolValue="true" />
		<Action type="runScript" script="Poochie_Scripts:OpenMasterQuest" waitUntilComplete="true" />
	</DisplayExpiry>
	<MiniEventCompleted>
		<Action type="setVariable" boolVariable="Poochie_Complete" boolValue="true" />
	</MiniEventCompleted>
	<Episode636_Notification_Start>
		<Action type="setVariable" boolVariable="ConfettiRainEffect" boolValue="true" />
		<Action type="scheduleScript" mode="create" script="Poochie_Scripts:ConfettiRain_End" shouldSave="true" relativeTime="7s" />
		<Action type="notification" title="UI_Poochie_636Popup_name" button="UI_OK" text="UI_Poochie_636Popup_desc" icon="CharacterSets_Maggie_636" />
		<Action type="setVariable" boolVariable="ConfettiRainEffect" boolValue="false" />
	</Episode636_Notification_Start>
	<ConfettiRain_End parallel="true" runQueueState="RunInAnyState" ignoreHUD="true">
		<Action type="setVariable" boolVariable="ConfettiRainEffect" boolValue="false" ignoreObject="true" />
	</ConfettiRain_End>
	<Episode636_Notification_End>
		<Action type="checkRequirements">
			<Requirement type="characterunlocked" name="Maggie" />
			<False>
				<Action type="reward">
					<Item type="consumable" name="636_MaggieReward" useImmediately="true" />
				</Action>
			</False>
		</Action>
	</Episode636_Notification_End>
	<AudienceResearchTable_Tapped>
		<Action type="sound" sound="AudienceResearchTable_tap" />
		<Action type="gotoState" state="GameState_JobList" extras="Poochie_QuestConfig:AudienceResearchTable_JobList" />
	</AudienceResearchTable_Tapped>
	<BicycleBasketballRamp_Tapped>
		<Action type="sound" sound="BicycleBasketballRamp_tap" />
	</BicycleBasketballRamp_Tapped>
	<PoochiesCar_Tapped parallel="true" ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="formula" formula="System::evaluate('Job::PretendToBeInACarChase::Active')" not="true" />
			</Requirements>
			<True>
				<Action type="sound" sound="PoochiesCar_tap" />
				<Action type="anim-play" animation="ActiveNoLoop" />
			</True>
		</Action>
	</PoochiesCar_Tapped>
	<PicnicSpot_Tapped parallel="true" ignoreHUD="true">
		<Action type="sound" sound="PicnicSpot_tap" />
		<Action type="anim-play" animation="Tap" />
	</PicnicSpot_Tapped>
	<RealityChannelVan_Tapped parallel="true" ignoreHUD="true">
		<Action type="sound" sound="RealityChannelVan_tap" />
		<Action type="anim-play" animation="ActiveNoLoop" />
	</RealityChannelVan_Tapped>
	<NetworkHeadquarters_Tapped>
		<Action type="sound" sound="NetworkHeadquarters_tap" />
	</NetworkHeadquarters_Tapped>
	<CleanUpSpringfieldSpawnDebris>
		<Action type="random">
			<Action type="reward">
				<Item type="building" name="Debris_00" useImmediately="true" />
			</Action>
			<Action type="reward">
				<Item type="building" name="Debris_01" useImmediately="true" />
			</Action>
			<Action type="reward">
				<Item type="building" name="Debris_02" useImmediately="true" />
			</Action>
			<Action type="reward">
				<Item type="building" name="Debris_03" useImmediately="true" />
			</Action>
			<Action type="reward">
				<Item type="building" name="Debris_04" useImmediately="true" />
			</Action>
		</Action>
	</CleanUpSpringfieldSpawnDebris>
	<GoTo_DunkABasketball parallel="true" ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="formula" formula="System::evaluate('Job::DunkABasketball::Active')" />
			<True>
				<Action type="pantoobject" time="0" building="BicycleBasketballRamp" offsetX="_[gridToWorld(3)]_" offsetZ="_[gridToWorld(-4)]_" />
			</True>
			<False>
				<Action type="gotoState" state="GameState_InGame" />
				<Action type="pantoobject" time="0" character="Poochie" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_DunkABasketball>
	<GoTo_PoochieKrustyluStudiosOrBownHouse>
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="conditional" logic="OR">
					<Requirement type="building" building="KrustyluStudios" />
					<Requirement type="building" building="BrownHouse" />
				</Requirement>
			</Requirements>
			<True>
				<Action type="gotoState" state="GameState_InGame" waitForState="true" />
				<Action type="pantoobject" time="0" character="Poochie" fakeTouch="true" />
			</True>
			<False>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="KrustyluStudios" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="KrustyluStudios" inventory="true" />
					</True>
					<False>
						<Action type="checkRequirements">
							<Requirements>
								<Requirement type="item" item="BrownHouse" checkInventoryOnly="true" />
							</Requirements>
							<True>
								<Action type="focusOnMenuItem" itemName="BrownHouse" inventory="true" />
							</True>
							<False>
								<Action type="focusOnMenuItem" itemName="BrownHouse" />
							</False>
						</Action>
					</False>
				</Action>
			</False>
		</Action>
	</GoTo_PoochieKrustyluStudiosOrBownHouse>
	<FireworksFactory_SetEndDialogueVariable>
		<Action type="checkRequirements">
			<Requirement type="active quest" quest="FireworksFactory" />
			<True>
				<Action type="setVariable" boolVariable="FireworksFactoryEndDialogue" boolValue="true" />
			</True>
		</Action>
	</FireworksFactory_SetEndDialogueVariable>
	<BycleRampSetDialogueVariables>
		<Action type="checkRequirements">
			<Requirement type="active quest" quest="RecyclingToTheEXTREME_3" />
			<True>
				<Action type="setVariable" boolVariable="RecycleToTheExtremePt3EndDialogue" boolValue="true" />
			</True>
		</Action>
		<Action type="checkRequirements">
			<Requirement type="active quest" quest="PoorlyWorkingTitle_4" />
			<True>
				<Action type="setVariable" boolVariable="PoorlyWorkingTitlePt4EndDialogue" boolValue="true" />
			</True>
		</Action>
	</BycleRampSetDialogueVariables>
</ScriptPackage>