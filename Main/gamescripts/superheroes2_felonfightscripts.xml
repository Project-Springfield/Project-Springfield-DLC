<ScriptPackage>
	<UpdateBattleTime parallel="true" cache="true">
		<Action type="setObjectVariable" variable="last_battle_time" value="Object::last_battle_time" asExpression="true" disableEvents="true">
			<Objects>
				<CopyObject index="0" />
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
	</UpdateBattleTime>
	<UpdateBattleTimesOnFighters cache="true">
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:UpdateBattleTime">
			<Objects>
				<ObjectByName name="Full_Roster1" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:UpdateBattleTime">
			<Objects>
				<ObjectByName name="Full_Roster2" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
	</UpdateBattleTimesOnFighters>
	<UpdateBattleTimes parallel="true" runQueueState="RunInAnyState" transactional="true" cache="true">
		<Action type="setObjectVariable" variable="last_battle_time" value="serverTime(0)" asExpression="true" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirements>
				<Requirement type="formula" formula="Object::battle_active" asObjectExpression="true" />
				<Requirement type="gamestate" state="GameState_CustomTouch" />
			</Requirements>
			<True>
				<Action type="scheduleScript" relativeTime="1s" script="Superheroes2_FelonFightScripts:UpdateBattleTimes" shouldSave="false" mode="replace" />
			</True>
		</Action>
	</UpdateBattleTimes>
	<FightStateLoaded parallel="true" runQueueState="RunInAnyState" transactional="true">
		<Action type="setObjectVariable" variable="battle_active" value="1">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:UpdateBattleTimes" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableFastForwardButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ConfigureButtonsForVisuals" />
	</FightStateLoaded>
	<FightFromMenu ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ClearAllData" />
		<Action type="deleteAllObjectVariables">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnterFelonFight" />
	</FightFromMenu>
	<ClearAllData cache="true">
		<Action type="setObjectVariable" variable="quick_battle_active" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="battle_active" value="0">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="attackers_lost" value="0">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="defenders_lost" value="0">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="social_battle" value="0">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
	</ClearAllData>
	<HealHeartsBasedOnCooldown>
		<Action type="setObjectVariable" variable="health" value="Object::max_health" asObjectExpression="true" disableEvents="true" />
	</HealHeartsBasedOnCooldown>
	<EnterFelonFight>
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="StartGameMusic" />
		<Action type="pantoobject" building="OrphanAlley" blockTouches="true" time="1.0" />
		<Action type="fitToScreen" targetObject="OrphanAlley" zoomSpeed="0.1">
			<Bounds locator="Left_Edge" />
		</Action>
		<Action type="hideAllBuildings" hide="true" belowPointTarget="OrphanAlley" exceptBuildings="OrphanAlley" />
		<Action type="hideAllCharacters" hide="true" />
		<Action type="runScript" script="Superheroes2_FelonFightScripts:StartFelonFight" />
	</EnterFelonFight>
	<StartFelonFight transactional="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:InitializeGameData" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnterCustomTouch" />
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="ConfigureButtonsForVisuals" />
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="MoveAvatarsToPositions" />
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="SyncAvatarPositions" />
		<Action type="runScript" script="Superheroes2_FelonFightScripts:EnableCharacterOverlays" />
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="ConfigureButtonsForPlayerTurn" />
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="AllowAttack" />
	</StartFelonFight>
	<InitializeGameData ignoreHUD="true">
		<Action type="deleteAllObjectVariables" disableEvents="true">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
		</Action>
		<Action type="deleteAllObjectVariables" disableEvents="true">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
		</Action>
		<Action type="if">
			<If expression="Tutorial_Battle_Active">
				<Then>
					<Action type="deleteAllObjectVariables" disableEvents="true">
						<Objects>
							<ObjectByName name="Full_Roster1" land="local" />
						</Objects>
					</Action>
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AddFighter">
						<Objects>
							<ObjectByName name="Obj_PieMan" land="local" />
						</Objects>
					</Action>
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AddFighter">
						<Objects>
							<ObjectByName name="Obj_FalloutBoy" land="local" />
						</Objects>
					</Action>
				</Then>
			</If>
		</Action>
		<Action type="copyObjectVariables" disableEvents="true">
			<Objects>
				<ObjectByName name="Full_Roster1" land="local" />
				<ObjectByName name="roster1" land="local" />
			</Objects>
		</Action>
		<Action type="copyObjectVariables" disableEvents="true">
			<Objects>
				<ObjectByName name="Full_Roster2" land="local" />
				<ObjectByName name="roster2" land="local" />
			</Objects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:HealHeartsBasedOnCooldown">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:InitializePositions" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:InitializeAttackerAndDefender" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SpawnAvatars" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetupMovementDelays" parseOnDemand="true" />
		<Action type="setObjectVariable" variable="visual_attacker" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="visual_defender" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="attacker_died" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="defender_died" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="total_damage_done" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="total_damage_taken" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="attacker_damage_done" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="defender_damage_done" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="can_attack" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="social_battle" value="!System::evaluate('Land::Local')" asExpression="true" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="tutorial_run_notifications" value="1" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
	</InitializeGameData>
	<InitializePositions cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:InitializePositions1">
			<Objects>
				<ObjectByName name="team1positions" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:InitializePositions2">
			<Objects>
				<ObjectByName name="team2positions" land="local" />
			</Objects>
		</Action>
	</InitializePositions>
	<InitializePositions1 cache="true">
		<Action type="deleteAllObjectVariables" disableEvents="true" />
		<Action type="pushBackObjectVariable" value="Roster1_Primary" disableEvents="true" />
		<Action type="pushBackObjectVariable" value="Roster1_Secondary" disableEvents="true" />
		<Action type="pushBackObjectVariable" value="Roster1_Tertiary" disableEvents="true" />
	</InitializePositions1>
	<InitializePositions2 cache="true">
		<Action type="deleteAllObjectVariables" disableEvents="true" />
		<Action type="pushBackObjectVariable" value="Roster2_Primary" disableEvents="true" />
		<Action type="pushBackObjectVariable" value="Roster2_Secondary" disableEvents="true" />
		<Action type="pushBackObjectVariable" value="Roster2_Tertiary" disableEvents="true" />
	</InitializePositions2>
	<InitializeAttackerAndDefender cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetFirstAsAttacker" parseOnDemand="true">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetFirstAsDefender" parseOnDemand="true">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
		</Action>
	</InitializeAttackerAndDefender>
	<SetFirstAsAttacker cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetAttacker">
			<Objects>
				<ObjectVariable variable="Object::0" interpretation="object" land="local">
					<CopyObject index="0" />
				</ObjectVariable>
			</Objects>
		</Action>
	</SetFirstAsAttacker>
	<SetFirstAsDefender cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetDefender">
			<Objects>
				<ObjectVariable variable="Object::0" interpretation="object" land="local">
					<CopyObject index="0" />
				</ObjectVariable>
			</Objects>
		</Action>
	</SetFirstAsDefender>
	<SetDefender cache="true">
		<Action type="setObjectVariable" asObjectExpression="true" variable="defender" value="Object::UID" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
				<CopyObject index="0" />
			</Objects>
		</Action>
	</SetDefender>
	<SetAttacker cache="true">
		<Action type="setObjectVariable" asObjectExpression="true" variable="attacker" value="Object::UID" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
				<CopyObject index="0" />
			</Objects>
		</Action>
	</SetAttacker>
	<SpawnAvatars cache="true">
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:SpawnTeam1">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="parallelIterateObjectVariables" script="Superheroes2_FelonFightScripts:SetTeamPositions">
			<Objects>
				<ObjectByName name="roster1" land="local" />
				<ObjectByName name="team1positions" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
				<CopyObject index="1" />
			</ScriptObjects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:SpawnTeam2">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="parallelIterateObjectVariables" script="Superheroes2_FelonFightScripts:SetTeamPositions">
			<Objects>
				<ObjectByName name="roster2" land="local" />
				<ObjectByName name="team2positions" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
				<CopyObject index="1" />
			</ScriptObjects>
		</Action>
	</SpawnAvatars>
	<SpawnTeam1 cache="true">
		<Action type="dynamicCreateObject" script="Superheroes2_FelonFightScripts:LinkCharacterAndData">
			<Objects>
				<ObjectVariable variable="Object::skin">
					<CopyObject index="0" />
				</ObjectVariable>
				<ObjectByName name="OrphanAlley" land="current" />
				<String text="Roster1_Spawn" />
				<CopyObject index="0" />
			</Objects>
		</Action>
	</SpawnTeam1>
	<SpawnTeam2 cache="true">
		<Action type="dynamicCreateObject" script="Superheroes2_FelonFightScripts:LinkCharacterAndData">
			<Objects>
				<ObjectVariable variable="Object::skin">
					<CopyObject index="0" />
				</ObjectVariable>
				<ObjectByName name="OrphanAlley" land="current" />
				<String text="Roster2_Spawn" />
				<CopyObject index="0" />
			</Objects>
		</Action>
	</SpawnTeam2>
	<LinkCharacterAndData cache="true">
		<Action type="setObjectVariable" variable="data" value="Object::UID" asObjectExpression="true" disableEvents="true">
			<Objects>
				<CopyObject index="0" />
				<CopyObject index="4" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="battle_type" value="Object::battle_type" asObjectExpression="true" disableEvents="true">
			<Objects>
				<CopyObject index="0" />
				<CopyObject index="4" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:UpdateAvatarHealth">
			<Objects>
				<CopyObject index="0" />
				<CopyObject index="4" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="character" value="Object::UID" asObjectExpression="true" disableEvents="true">
			<Objects>
				<CopyObject index="4" />
				<CopyObject index="0" />
			</Objects>
		</Action>
	</LinkCharacterAndData>
	<UpdateAvatarHealth cache="true">
		<Action type="setObjectVariable" variable="health" value="Object::health" asObjectExpression="true" disableEvents="true">
			<Objects>
				<CopyObject index="0" />
				<CopyObject index="1" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="max_health" value="Object::max_health" asObjectExpression="true" disableEvents="true">
			<Objects>
				<CopyObject index="0" />
				<CopyObject index="1" />
			</Objects>
		</Action>
		<Action type="playCharacterEffect" resetBeforeStart="true" waitUntilComplete="false" />
	</UpdateAvatarHealth>
	<SetupMovementDelays cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:Movement_NoDelays">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:Movement_ThirdDelay">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
		</Action>
	</SetupMovementDelays>
	<Movement_NoDelays cache="true">
		<Action type="setObjectVariable" variable="delay" value="0" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::0::character" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="delay" value="0" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::1::character" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="delay" value="0" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::2::character" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
	</Movement_NoDelays>
	<Movement_ThirdDelay cache="true">
		<Action type="setObjectVariable" variable="delay" value="0" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::0::character" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="delay" value="1" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::1::character" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="delay" value="0" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::2::character" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
	</Movement_ThirdDelay>
	<SetTeamPositions cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetCharacterPosition">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
				<CopyObject index="1" />
			</Objects>
		</Action>
	</SetTeamPositions>
	<EnterCustomTouch>
		<Action type="customTouch">
			<Attribute name="allowCameraMovement" value="false" />
			<Attribute name="loadScript" value="Superheroes2_FelonFightScripts:FightStateLoaded" />
			<Attribute name="config">
				<AttributeSet name="HiddenHUDElements">
					<Attribute name="EntireHUD" value="true">
						<Requirement type="players land" not="true" />
					</Attribute>
					<Attribute name="BottomButtons" value="true" />
					<Attribute name="SpecialEventButtons" value="true" />
					<Attribute name="Sidebar" value="true" />
					<Attribute name="Taskbar" value="true" />
					<Attribute name="Info" value="true" />
					<Attribute name="ShiftSpendable" value="true" />
					<Attribute name="HUDCurrencies" value="true" />
				</AttributeSet>
				<AttributeSet name="touchables">
					<Attribute name="formula" value="Object::FelonFightSelectable" />
				</AttributeSet>
				<AttributeSet name="onTouchScripts">
					<Attribute name="SequelSquadFighter" value="Superheroes2_FelonFightScripts:FighterSelected" />
					<Attribute name="BattleFelonFighter" value="Superheroes2_FelonFightScripts:FighterSelected" />
				</AttributeSet>
				<AttributeSet name="menuConfig">
					<Attribute name="file" value="BattleHUD" />
					<Attribute name="config" value="BattleHUD.mns" />
					<Attribute name="hud">
						<AttributeSet name="onBackButton">
							<Attribute name="mapTo" value="ExitButton" />
						</AttributeSet>
						<AttributeSet name="ExitButton">
							<Attribute name="script" value="Superheroes2_FelonFightScripts:ExitButtonPressed" />
						</AttributeSet>
						<AttributeSet name="HealButton">
							<Attribute name="script" value="Superheroes2_FelonFightScripts:HealButtonPressed" />
						</AttributeSet>
						<AttributeSet name="HealButtonDisabled">
							<Attribute name="script" value="Superheroes2_FelonFightScripts:HealCancelButtonPressed" />
						</AttributeSet>
						<AttributeSet name="SwapButton">
							<Attribute name="script" value="Superheroes2_FelonFightScripts:PlayerSwapButtonPressed" />
						</AttributeSet>
						<AttributeSet name="SwapButtonDisabled">
							<Attribute name="script" value="Superheroes2_FelonFightScripts:PlayerSwapCancelButtonPressed" />
						</AttributeSet>
						<AttributeSet name="FightButton">
							<Attribute name="script" value="Superheroes2_FelonFightScripts:AttackButtonPressed" />
						</AttributeSet>
						<AttributeSet name="QuickBattleButton">
							<Attribute name="script" value="Superheroes2_FelonFightScripts:QuickBattleButtonPressed" />
						</AttributeSet>
					</Attribute>
				</AttributeSet>
			</Attribute>
		</Action>
	</EnterCustomTouch>
	<StartGameMusic ignoreHUD="true">
		<Action type="sound" sound="Battle_Fight_Start" />
		<Action type="if">
			<If expression="System::evaluate('LocalLand::AdHoc::game_data::Object::social_battle')">
				<Then>
					<Action type="sound" sound="Battle_Music_Friends_Town" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="sound" sound="Battle_Music_Players_Town" />
				</Then>
			</Else>
		</Action>
	</StartGameMusic>
	<StopGameMusic ignoreHUD="true">
		<Action type="if">
			<If expression="System::evaluate('LocalLand::AdHoc::game_data::Object::social_battle')">
				<Then>
					<Action type="stopSoundKit" sound="Battle_Music_Friends_Town" formatMe="true" ignoreObject="true" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="stopSoundKit" sound="Battle_Music_Players_Town" formatMe="true" ignoreObject="true" />
				</Then>
			</Else>
		</Action>
	</StopGameMusic>
	<FadeAndDelete cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="Object::ID" asObjectExpression="true" />
			<True>
				<Action type="fade" fade="out" />
				<Action type="deletecharacter" />
			</True>
		</Action>
	</FadeAndDelete>
	<WorkingHudTip0 ignoreHUD="true" parallel="true" cache="true">
		<Action type="if">
			<If expression="System::evaluate('Land::Local')">
				<Then>
					<Action type="hudTip" text="UI_QuickBattleProgress0" time="3s" remainUntilDismissed="true" />
				</Then>
			</If>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="or(and(!Object::attackers_lost, !Object::defenders_lost), Object::characters_fading)" asObjectExpression="true" />
			<False>
				<Action type="hudTip" clear="true" />
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowResultsScreen" parseOnDemand="true" />
			</False>
			<True>
				<Action type="scheduleScript" script="Superheroes2_FelonFightScripts:WorkingHudTip1" relativeTime="1" shouldSave="false" />
			</True>
		</Action>
	</WorkingHudTip0>
	<WorkingHudTip1 ignoreHUD="true" parallel="true" cache="true">
		<Action type="if">
			<If expression="System::evaluate('Land::Local')">
				<Then>
					<Action type="hudTip" text="UI_QuickBattleProgress1" time="3s" remainUntilDismissed="true" />
				</Then>
			</If>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="or(and(!Object::attackers_lost, !Object::defenders_lost), Object::characters_fading)" asObjectExpression="true" />
			<False>
				<Action type="hudTip" clear="true" />
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowResultsScreen" parseOnDemand="true" />
			</False>
			<True>
				<Action type="scheduleScript" script="Superheroes2_FelonFightScripts:WorkingHudTip2" relativeTime="1" shouldSave="false" />
			</True>
		</Action>
	</WorkingHudTip1>
	<WorkingHudTip2 ignoreHUD="true" parallel="true" cache="true">
		<Action type="if">
			<If expression="System::evaluate('Land::Local')">
				<Then>
					<Action type="hudTip" text="UI_QuickBattleProgress2" time="3s" remainUntilDismissed="true" />
				</Then>
			</If>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="or(and(!Object::attackers_lost, !Object::defenders_lost), Object::characters_fading)" asObjectExpression="true" />
			<False>
				<Action type="hudTip" clear="true" />
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowResultsScreen" parseOnDemand="true" />
			</False>
			<True>
				<Action type="scheduleScript" script="Superheroes2_FelonFightScripts:WorkingHudTip0" relativeTime="1" shouldSave="false" />
			</True>
		</Action>
	</WorkingHudTip2>
	<QuickBattleButtonPressed ignoreHUD="true">
		<Action type="genericConfirmation">
			<Attribute name="config">
				<AttributeSet name="onOK">
					<Attribute name="script" value="Superheroes2_FelonFightScripts:QuickBattleButtonConfirmed" />
				</AttributeSet>
				<AttributeSet name="onCancel"></AttributeSet>
				<AttributeSet name="onBackButton">
					<Attribute name="mapTo" value="onCancel" />
				</AttributeSet>
				<AttributeSet name="title">
					<Attribute name="text" value="UI_Superheroes2_Battle_QuickBattle_title" localise="true" />
					<Attribute name="color" value="FFD51AFF" />
				</AttributeSet>
				<AttributeSet name="message">
					<Attribute name="text" value="UI_Superheroes2_Battle_QuickBattle_body" localise="true" />
					<Attribute name="font" value="eFont_Small" />
					<Attribute name="color" value="FFFFFFFF" />
				</AttributeSet>
				<AttributeSet name="button_Cancel">
					<Attribute name="button_text">
						<AttributeSet name="text">
							<Attribute name="text" value="UI_Superheroes2_Battle_QuickBattle_cancel" localise="true" />
						</AttributeSet>
					</Attribute>
					<Attribute name="button_back">
						<AttributeSet name="button">
							<Attribute name="color" value="BB0310FF" />
						</AttributeSet>
					</Attribute>
				</AttributeSet>
				<AttributeSet name="button_OK">
					<Attribute name="button_text">
						<AttributeSet name="text">
							<Attribute name="text" value="UI_Superheroes2_Battle_QuickBattle_confirm" localise="true" />
						</AttributeSet>
					</Attribute>
					<Attribute name="button_back">
						<AttributeSet name="button">
							<Attribute name="color" value="0091F1FF" />
						</AttributeSet>
					</Attribute>
				</AttributeSet>
				<AttributeSet name="exitButton">
					<Attribute name="active" value="false" />
				</AttributeSet>
				<AttributeSet name="showTwoButtons">
					<Attribute name="active" value="true" />
				</AttributeSet>
			</Attribute>
		</Action>
	</QuickBattleButtonPressed>
	<QuickBattleButtonConfirmed ignoreHUD="true">
		<Action type="updateVariable" variable="QuickBattleUsed" value="1" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableAllButtons" />
		<Action type="if">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<If expression="Object::social_battle" asObjectExpression="true">
				<Then>
					<Action type="incrementSessionCounter" counter="Superhereos2_FelonFight_SocialBattle_Skipped" increment="1" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="incrementSessionCounter" counter="Superhereos2_FelonFight_LocalBattle_Skipped" increment="1" />
				</Then>
			</Else>
		</Action>
		<Action type="setObjectVariable" variable="quick_battle_active" value="1" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="characters_fading" value="1" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:WorkingHudTip0" />
		<Action type="runScript" script="Superheroes2_FelonFightScripts:FadeAndDeleteAvatars" />
		<Action type="runScript" script="Superheroes2_FelonFightScripts:QuickBattle" />
	</QuickBattleButtonConfirmed>
	<DoFadeAndDelete>
		<Action type="parallelIterateObjectVariables" script="Superheroes2_FelonFightScripts:FadeAndDelete">
			<Objects>
				<ObjectByName name="Full_Roster2" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="current">
					<ObjectVariable variable="Object::character">
						<ObjectByUID land="local">
							<CopyObject index="0" />
						</ObjectByUID>
					</ObjectVariable>
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="parallelIterateObjectVariables" script="Superheroes2_FelonFightScripts:FadeAndDelete">
			<Objects>
				<ObjectByName name="Full_Roster1" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="current">
					<ObjectVariable variable="Object::character">
						<ObjectByUID land="local">
							<CopyObject index="0" />
						</ObjectByUID>
					</ObjectVariable>
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="setObjectVariable" variable="characters_fading" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
	</DoFadeAndDelete>
	<FadeAndDeleteAvatars parallel="true" runQueueState="RunInAnyState" ignoreHUD="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DoFadeAndDelete" />
	</FadeAndDeleteAvatars>
	<QuickBattle cache="true" ignoreHUD="true" parallel="true" runQueueState="RunInAnyState" transactional="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:FullAttackQuickBattle" parseOnDemand="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="and(!Object::attackers_lost, !Object::defenders_lost)" asObjectExpression="true" />
			<True>
				<Action type="checkRequirements" ignoreObject="false">
					<Objects>
						<ObjectByName name="game_data" land="local" />
					</Objects>
					<Requirement type="formula" formula="Object::attacker_died" />
					<True>
						<Action type="checkRequirements" ignoreObject="false">
							<Requirement type="formula" formula="Object::attackers_lost == 0" asObjectExpression="true" />
							<True>
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AutoSwapAfterDeathNoVisuals" parseOnDemand="true" />
								<Action type="scheduleScript" script="Superheroes2_FelonFightScripts:QuickBattle" shouldSave="false" relativeTime="0" mode="replace">
									<Objects></Objects>
								</Action>
							</True>
						</Action>
					</True>
					<False>
						<Action type="scheduleScript" script="Superheroes2_FelonFightScripts:QuickBattle" shouldSave="false" relativeTime="0" mode="replace">
							<Objects></Objects>
						</Action>
					</False>
				</Action>
			</True>
		</Action>
	</QuickBattle>
	<HealCharacter cache="true">
		<Action type="setVariable" intVariable="Superheroes2_DCS10_VarTracker" intValue="Superheroes2_DCS10_VarTracker+1" />
		<Action type="if">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<If expression="Object::social_battle" asObjectExpression="true">
				<Then>
					<Action type="setVariable" boolVariable="Superheroes2_DCS6_DidNotHeal" boolValue="false" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="setVariable" boolVariable="Superheroes2_DCS3_DidNotHeal" boolValue="false" />
				</Then>
			</Else>
		</Action>
		<Action type="setObjectVariable" variable="health" value="min(Object::max_health, Object::health + 2)" asObjectExpression="true" disableEvents="true">
			<Objects>
				<ObjectByUID land="local">
					<ObjectVariable index="0" variable="Object::data" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="sound" sound="Battle_Science_Water_Consumed" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:UpdateAvatarHealth">
			<Objects>
				<CopyObject index="0" />
				<ObjectByUID land="local">
					<ObjectVariable index="0" variable="Object::data" />
				</ObjectByUID>
			</Objects>
		</Action>
	</HealCharacter>
	<HealAttacker>
		<Action type="setObjectVariable" variable="health" value="min(Object::max_health, Object::health + 2)" asObjectExpression="true" disableEvents="true">
			<Objects>
				<ObjectVariable name="game_data" variable="Object::attacker" interpretation="object" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:UpdateAvatarHealth">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable name="game_data" variable="Object::attacker::character" land="local" />
				</ObjectByUID>
				<ObjectVariable name="game_data" variable="Object::attacker" interpretation="object" land="local" />
			</Objects>
		</Action>
	</HealAttacker>
	<ConfigureButtonsForVisuals ignoreHUD="true" parallel="true" runQueueState="RunInAnyState" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideSwapCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideHealCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowHealButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableHealButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableFastForwardButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableAttackButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableExitButton" />
	</ConfigureButtonsForVisuals>
	<ConfigureButtonsForHealing ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideSwapCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideHealButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowHealCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableAttackButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableFastForwardButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableExitButton" />
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="players land" />
				<Requirement type="variable" variable="BattleTutorialComplete" />
			</Requirements>
			<True>
				<Action type="hudTip" text="UI_Superheroes2_Battle_HUDTip_healing" time="3s" remainUntilDismissed="true" />
			</True>
		</Action>
	</ConfigureButtonsForHealing>
	<ConfigureButtonsForSwapping ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowSwapCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideHealCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowHealButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableHealButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableAttackButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableFastForwardButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableExitButton" />
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="players land" />
				<Requirement type="variable" variable="BattleTutorialComplete" />
			</Requirements>
			<True>
				<Action type="hudTip" text="UI_Superheroes2_Battle_HUDTip_switching" time="3s" remainUntilDismissed="true" />
			</True>
		</Action>
	</ConfigureButtonsForSwapping>
	<ConfigureButtonsForSwappingAfterDeath ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideSwapCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideHealCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowHealButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableHealButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableAttackButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableFastForwardButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableExitButton" />
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="players land" />
				<Requirement type="variable" variable="BattleTutorialComplete" />
			</Requirements>
			<True>
				<Action type="hudTip" text="UI_Superheroes2_Battle_HUDTip_new_fighter" time="3s" remainUntilDismissed="true" />
			</True>
		</Action>
	</ConfigureButtonsForSwappingAfterDeath>
	<ConfigureButtonsForPlayerTurn ignoreHUD="true" cache="true">
		<Action type="if">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<If expression="Tutorial_Battle_Active">
				<Then>
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:Tutorial_RoundBegun" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideSwapCancelButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowSwapButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideHealCancelButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowHealButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableAttackButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableFastForwardButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableExitButton" />
				</Then>
			</Else>
		</Action>
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="players land" />
				<Requirement type="variable" variable="BattleTutorialComplete" />
			</Requirements>
			<True>
				<Action type="hudTip" text="UI_Superheroes2_Battle_HUDTip_player_action" time="3s" remainUntilDismissed="true" />
			</True>
		</Action>
		<Action type="if">
			<If expression="ShowQuickBattleNotification">
				<Then>
					<Action type="notification" title="UI_Superheroes2_QuickBattleMessage_title" button="UI_OK" text="UI_Superheroes2_QuickBattleMessage_body" icon="ICO_BattleHUD_Superheroes2_QuickBattle" />
					<Action type="updateVariable" variable="ShowQuickBattleNotification" value="0" />
				</Then>
			</If>
		</Action>
	</ConfigureButtonsForPlayerTurn>
	<HealButtonPressed ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ConfigureButtonsForHealing" />
		<Action type="setObjectVariable" variable="can_attack" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="healing" value="1" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:SetSelectableForHealing">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
	</HealButtonPressed>
	<HealCancelButtonPressed parallel="true" runQueueState="RunInAnyState" cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::healing" />
			<True>
				<Action type="setObjectVariable" variable="healing" value="0" disableEvents="true" />
				<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:ClearSelectable">
					<Objects>
						<ObjectByName name="roster1" land="local" />
					</Objects>
					<ScriptObjects>
						<ObjectByUID land="local">
							<CopyObject index="0" />
						</ObjectByUID>
					</ScriptObjects>
				</Action>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ConfigureButtonsForPlayerTurn" />
				<Action type="runScript" script="Superheroes2_FelonFightScripts:AllowAttack" />
			</True>
		</Action>
	</HealCancelButtonPressed>
	<GiveRetreatReward>
		<Action type="setObjectVariable" variable="battle_active" value="0">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setVariable" intVariable="temp_CurrencyReward" intValue="System::evaluate('LocalLand::AdHoc::game_data::Object::total_damage_done') * ConfigValue('__Superheroes2_Spreadsheet_Config:FelonBattles:DamageBonus_CurrencyReward__')" addTempIfNotExisting="true" />
		<Action type="reward" Superheroes2ActivePrizeTrackCurrency="temp_CurrencyReward" noDrops="true" />
		<Action type="runScript" script="Superheroes2_FelonFightScripts:UpdateInflowTelemetry">
			<FormatToken key="type" value="Local" />
		</Action>
		<Action type="if">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<If expression="Object::social_battle" asObjectExpression="true">
				<Then>
					<Action type="updateVariable" variable="FelonFights_Retreat_Social" value="FelonFights_Retreat_Social+1" />
					<Action type="if">
						<If expression="System::evaluate('LocalLand::AdHoc::game_data::Object::total_damage_done')">
							<Then>
								<Action type="if">
									<If expression="FF_SocialBattleTimer == 0">
										<Then>
											<Action type="updateVariable" variable="FF_SocialBattleTimer" value="serverTime(0)" />
										</Then>
									</If>
								</Action>
								<Action type="updateVariable" variable="FF_SocialBattlesToday" value="FF_SocialBattlesToday+1" />
								<Action type="updateVariable" variable="Superheroes2_SocialBattlesFought" value="Superheroes2_SocialBattlesFought+1" />
								<Action type="reward" SocialBattleFights="1" />
							</Then>
						</If>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="updateVariable" variable="FelonFights_Retreat_Local" value="FelonFights_Retreat_Local+1" />
				</Then>
			</Else>
		</Action>
	</GiveRetreatReward>
	<RetreatFromMatch ignoreHUD="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:GiveRetreatReward" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EndMatch" />
	</RetreatFromMatch>
	<ExitButtonPressed parallel="true" runQueueState="RunInAnyState" ignoreHUD="true" cache="true" interruptable="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Requirements>
				<Requirement type="variable" variable="Tutorial_Battle_Active" not="true" />
				<Requirement type="formula" formula="and(System::evaluate('LocalLand::AdHoc::game_data::Object::battle_active'), !System::evaluate('LocalLand::AdHoc::game_data::Object::quick_battle_active'))" />
			</Requirements>
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SkipAllVisuals" />
				<Action type="genericConfirmation">
					<Attribute name="config">
						<AttributeSet name="onOK">
							<Attribute name="script" value="Superheroes2_FelonFightScripts:RetreatFromMatch" />
						</AttributeSet>
						<AttributeSet name="onCancel"></AttributeSet>
						<AttributeSet name="onBackButton">
							<Attribute name="mapTo" value="onCancel" />
						</AttributeSet>
						<AttributeSet name="title">
							<Attribute name="text" value="UI_Superheroes2_Battle_Exit_title" localise="true" />
							<Attribute name="color" value="FFD51AFF" />
						</AttributeSet>
						<AttributeSet name="message">
							<Attribute name="text" value="UI_Superheroes2_Battle_Exit_body" localise="true" />
							<Attribute name="font" value="eFont_Small" />
							<Attribute name="color" value="FFFFFFFF" />
						</AttributeSet>
						<AttributeSet name="button_Cancel">
							<Attribute name="button_text">
								<AttributeSet name="text">
									<Attribute name="text" value="UI_Superheroes2_Battle_Exit_cancel" localise="true" />
								</AttributeSet>
							</Attribute>
							<Attribute name="button_back">
								<AttributeSet name="button">
									<Attribute name="color" value="0091F1FF" />
								</AttributeSet>
							</Attribute>
						</AttributeSet>
						<AttributeSet name="button_OK">
							<Attribute name="button_text">
								<AttributeSet name="text">
									<Attribute name="text" value="UI_Superheroes2_Battle_Exit_confirm" localise="true" />
								</AttributeSet>
							</Attribute>
							<Attribute name="button_back">
								<AttributeSet name="button">
									<Attribute name="color" value="BB0310FF" />
								</AttributeSet>
							</Attribute>
						</AttributeSet>
						<AttributeSet name="exitButton">
							<Attribute name="active" value="false" />
						</AttributeSet>
						<AttributeSet name="showTwoButtons">
							<Attribute name="active" value="true" />
						</AttributeSet>
					</Attribute>
				</Action>
			</True>
		</Action>
	</ExitButtonPressed>
	<ShowRewardPopup cache="true">
		<Action type="if">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<If expression="Object::menu_defenders_lost" asObjectExpression="true">
				<Then>
					<Action type="sound" sound="Battle_Reward_Screen_Win" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="sound" sound="Battle_Reward_Screen_Lose" />
				</Then>
			</Else>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::menu_total_damage_done" asObjectExpression="true" />
			<True>
				<Action type="checkRequirements" ignoreObject="false">
                                        <Requirement type="formula" formula="Object::menu_social_battle" asObjectExpression="true" />
                                        <True><Action type="showMenu" menu="battleresult" scriptResProvider="battleresult.mns" menuConfig="Superheroes2_BattleSummaryConfig:BattleSummaryConfig_Social" buttonsConfig="Superheroes2_BattleSummaryConfig:BattleSummaryButtonConfig" /></True><False><Action type="showMenu" menu="battleresult" scriptResProvider="battleresult.mns" menuConfig="Superheroes2_BattleSummaryConfig:BattleSummaryConfig" buttonsConfig="Superheroes2_BattleSummaryConfig:BattleSummaryButtonConfig" /></False></Action>
			</True>
		</Action>
	</ShowRewardPopup>
	<ShowAnimation cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::menu_total_damage_done" asObjectExpression="true" />
			<True>
				<Action type="checkRequirements" ignoreObject="false">
					<Requirement type="formula" formula="or(Object::menu_attackers_lost, Object::menu_defenders_lost)" asObjectExpression="true" />
					<False>
						<Action type="showMenu" menu="fullscreenanimation" scriptResProvider="fullscreenanimation.mns" buttonsConfig="Superheroes2_BattleSummaryConfig:BattleAnimationButtonConfig" menuConfig="Superheroes2_BattleSummaryConfig:BattleRetreatAnimationConfig" waitUntilDismissed="false" />
						<Action type="updateMenuItem" menu="eMenu_ShowMenuActionMenu">
							<Attribute name="config">
								<AttributeSet name="CenteredAnim">
									<Attribute name="loop" value="false" />
								</AttributeSet>
							</Attribute>
						</Action>
						<Action type="delay" time="1.25" />
					</False>
					<True>
						<Action type="checkRequirements" ignoreObject="false">
							<Requirement type="formula" formula="Object::menu_defenders_lost" asObjectExpression="true" />
							<True>
								<Action type="showMenu" menu="fullscreenanimation" scriptResProvider="fullscreenanimation.mns" buttonsConfig="Superheroes2_BattleSummaryConfig:BattleAnimationButtonConfig" menuConfig="Superheroes2_BattleSummaryConfig:BattleVictoryAnimationConfig" waitUntilDismissed="false" />
								<Action type="updateMenuItem" menu="eMenu_ShowMenuActionMenu">
									<Attribute name="config">
										<AttributeSet name="CenteredAnim">
											<Attribute name="loop" value="false" />
										</AttributeSet>
									</Attribute>
								</Action>
								<Action type="delay" time="2.5" />
							</True>
							<False>
								<Action type="showMenu" menu="fullscreenanimation" scriptResProvider="fullscreenanimation.mns" buttonsConfig="Superheroes2_BattleSummaryConfig:BattleAnimationButtonConfig" menuConfig="Superheroes2_BattleSummaryConfig:BattleDefeatAnimationConfig" waitUntilDismissed="false" />
								<Action type="updateMenuItem" menu="eMenu_ShowMenuActionMenu">
									<Attribute name="config">
										<AttributeSet name="CenteredAnim">
											<Attribute name="loop" value="false" />
										</AttributeSet>
									</Attribute>
								</Action>
								<Action type="delay" time="1.6667" />
							</False>
						</Action>
					</True>
				</Action>
				<Action type="showMenu" clearShownMenu="true" />
			</True>
		</Action>
	</ShowAnimation>
	<CopyDataForMenus cache="true">
		<Action type="setObjectVariable" disableEvents="true" variable="menu_attackers_lost" value="Object::attackers_lost" asObjectExpression="true" />
		<Action type="setObjectVariable" disableEvents="true" variable="menu_defenders_lost" value="Object::defenders_lost" asObjectExpression="true" />
		<Action type="setObjectVariable" disableEvents="true" variable="menu_total_damage_done" value="Object::total_damage_done" asObjectExpression="true" />
		<Action type="setObjectVariable" disableEvents="true" variable="menu_social_battle" value="Object::social_battle" asObjectExpression="true" />
	</CopyDataForMenus>
	<EndMatch cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableCharacterOverlays" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:UpdateBattleTimesOnFighters" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:CopyDataForMenus">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="checkExpression" expression="Superheroes2_SocialBattlesFought">
			<ExpressionCase value="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize1_Target__">
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeededBefore" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize1_Target__" />
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeeded" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize2_Target__" />
			</ExpressionCase>
			<ExpressionCase value="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize2_Target__">
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeededBefore" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize2_Target__" />
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeeded" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize3_Target__" />
			</ExpressionCase>
			<ExpressionCase value="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize3_Target__">
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeededBefore" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize3_Target__" />
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeeded" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize4_Target__" />
			</ExpressionCase>
			<ExpressionCase value="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize4_Target__">
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeededBefore" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize4_Target__" />
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeeded" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize5_Target__" />
			</ExpressionCase>
			<ExpressionCase value="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize5_Target__">
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeededBefore" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize5_Target__" />
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeeded" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize6_Target__" />
			</ExpressionCase>
			<ExpressionCase value="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize6_Target__">
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeededBefore" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize6_Target__" />
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeeded" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize7_Target__" />
			</ExpressionCase>
			<ExpressionCase value="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize7_Target__">
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeededBefore" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize7_Target__" />
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeeded" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize8_Target__" />
			</ExpressionCase>
			<ExpressionCase value="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize8_Target__">
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeededBefore" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize8_Target__" />
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeeded" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize9_Target__" />
			</ExpressionCase>
			<ExpressionCase value="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize9_Target__">
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeededBefore" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize9_Target__" />
				<Action type="setVariable" intVariable="Superheroes2_SocialBattlesNeeded" intValue="__Superheroes2_Spreadsheet_Config:SocialPrizes:Prize10_Target__" />
			</ExpressionCase>
		</Action>
		<Action type="setObjectVariable" variable="social_battle" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:DespawnTeam">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="deleteAllObjectVariables">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:DespawnTeam">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="deleteAllObjectVariables">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="visual_attacker" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="visual_defender" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="hudTip" clear="true" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ClearAllData" />
		<Action type="runScript" script="Superheroes2_FelonFightScripts:ShowAnimationAndRewardPopup" />
		<Action type="runScript" script="Superheroes2_Scripts:GroupFelons" />
	</EndMatch>
	<ShowAnimationAndRewardPopup>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:StopGameMusic" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowRewardPopup" />
		<Action type="deleteAllObjectVariables">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="pantoobject" building="OrphanAlley" zoom="0.5" time="0" />
		<Action type="hideAllBuildings" hide="false" />
		<Action type="hideAllCharacters" hide="false" />
		<Action type="runScript" script="Superheroes2_FelonFightScripts:RefreshVis" />
		<Action type="checkRequirements">
			<Requirement type="players land" />
			<True>
				<Action type="gotoState" state="GameState_InGame" />
			</True>
			<False>
				<Action type="gotoState" state="FriendState_InGame" />
			</False>
		</Action>
	</ShowAnimationAndRewardPopup>
	<RefreshVis parallel="true">
		<Action type="refreshVis" />
	</RefreshVis>
	<SkipSingleVisual cache="true">
		<Action type="interruptScript">
			<Interrupt package="Superheroes2_FelonFightScripts" script="MoveAvatarsToPositions">
				<InCategory category="running" />
			</Interrupt>
			<Interrupt package="Superheroes2_FelonFightScripts" script="VisuallySwapAttacker">
				<InCategory category="running" />
			</Interrupt>
			<Interrupt package="Superheroes2_FelonFightScripts" script="AttackerVisuallyAttack">
				<InCategory category="running" />
			</Interrupt>
			<Interrupt package="Superheroes2_FelonFightScripts" script="DefenderVisuallyAttack">
				<InCategory category="running" />
			</Interrupt>
			<Interrupt package="Superheroes2_FelonFightScripts" script="AttackerReactToAttack">
				<InCategory category="running" />
			</Interrupt>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:StopAttackSounds">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable name="game_data" variable="Object::visual_attacker" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:StopAttackSounds">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable name="game_data" variable="Object::visual_defender" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="PowEffect" value="0">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable name="game_data" variable="Object::visual_defender" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="PowEffect" value="0">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable name="game_data" variable="Object::visual_attacker" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
	</SkipSingleVisual>
	<SkipAllVisuals cache="true">
		<Action type="interruptScript">
			<Interrupt package="Superheroes2_FelonFightScripts" script="MoveAvatarsToPositions">
				<InCategory category="any" />
			</Interrupt>
			<Interrupt package="Superheroes2_FelonFightScripts" script="VisuallySwapAttacker">
				<InCategory category="any" />
			</Interrupt>
			<Interrupt package="Superheroes2_FelonFightScripts" script="AttackerVisuallyAttack">
				<InCategory category="any" />
			</Interrupt>
			<Interrupt package="Superheroes2_FelonFightScripts" script="DefenderVisuallyAttack">
				<InCategory category="any" />
			</Interrupt>
			<Interrupt package="Superheroes2_FelonFightScripts" script="AttackerReactToAttack">
				<InCategory category="any" />
			</Interrupt>
			<Interrupt package="Superheroes2_FelonFightScripts" script="SyncAvatarPositions">
				<InCategory category="any" />
			</Interrupt>
			<Interrupt package="Superheroes2_FelonFightScripts" script="SyncAvatarVisibility">
				<InCategory category="any" />
			</Interrupt>
			<Interrupt package="Superheroes2_FelonFightScripts" script="SyncAttackerAvatarPositions">
				<InCategory category="any" />
			</Interrupt>
			<Interrupt package="Superheroes2_FelonFightScripts" script="SyncAvatarHealthPostAttack">
				<InCategory category="any" />
			</Interrupt>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncAvatarPositions" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncAttackerAvatarPositions" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncAvatarVisibility" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncAvatarHealthPostAttack">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable name="game_data" variable="Object::visual_defender" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncAvatarHealthPostAttack">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable name="game_data" variable="Object::visual_attacker" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:StopAttackSounds">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable name="game_data" variable="Object::visual_attacker" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:StopAttackSounds">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable name="game_data" variable="Object::visual_defender" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="PowEffect" value="0">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable name="game_data" variable="Object::visual_defender" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="PowEffect" value="0">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable name="game_data" variable="Object::visual_attacker" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
	</SkipAllVisuals>
	<StopAttackSounds>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:StopAttackSound" formatMe="deep">
			<FormatToken key="skin" value="{Object::SkinID}" />
		</Action>
	</StopAttackSounds>
	<StopAttackSound>
		<Action type="stopSoundKit" sound="{skin}_Attack" formatMe="true" ignoreObject="true" />
	</StopAttackSound>
	<AttackButtonPressed parallel="true" runQueueState="RunInAnyState" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SkipSingleVisual" />
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::can_attack" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ConfigureButtonsForVisuals" />
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:PerformAttack" />
			</True>
		</Action>
	</AttackButtonPressed>
	<PlayerSwapCancelButtonPressed parallel="true" runQueueState="RunInAnyState" cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::swapping" />
			<True>
				<Action type="setObjectVariable" variable="swapping" value="0" disableEvents="true" />
				<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:ClearSelectable">
					<Objects>
						<ObjectByName name="roster1" land="local" />
					</Objects>
					<ScriptObjects>
						<ObjectByUID land="local">
							<CopyObject index="0" />
						</ObjectByUID>
					</ScriptObjects>
				</Action>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ConfigureButtonsForPlayerTurn" />
				<Action type="runScript" script="Superheroes2_FelonFightScripts:AllowAttack" />
			</True>
		</Action>
	</PlayerSwapCancelButtonPressed>
	<PlayerSwapButtonPressed parallel="true" runQueueState="RunInAnyState" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ConfigureButtonsForSwapping" />
		<Action type="setObjectVariable" variable="can_attack" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="swapping" value="1" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:SetSelectable">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ClearFighterSelectable">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
	</PlayerSwapButtonPressed>
	<ForcePlayerSwap parallel="true" runQueueState="RunInAnyState" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ConfigureButtonsForSwapping" />
		<Action type="setObjectVariable" variable="can_attack" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="swapping" value="1" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:SetSelectable">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ClearFighterSelectable">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
	</ForcePlayerSwap>
	<SwapAfterDeath ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ForcePlayerSwap" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ConfigureButtonsForSwappingAfterDeath" />
		<Action type="setObjectVariable" variable="swapping" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
	</SwapAfterDeath>
	<MoveAvatarsToPositions interruptable="true" ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ConfigureButtonsForVisuals" />
		<Action type="deleteAllObjectVariables">
			<Objects>
				<ObjectByName name="bothRosters" land="local" />
			</Objects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:AddToCompleteRoster">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:AddToCompleteRoster">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="parallelIterateObjectVariables" script="Superheroes2_FelonFightScripts:MoveTeam">
			<Objects>
				<ObjectByName name="bothRosters" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
	</MoveAvatarsToPositions>
	<AddToCompleteRoster ignoreHUD="true" cache="true">
		<Action type="pushBackObjectVariable" formula="Object::UID" disableEvents="true">
			<Objects>
				<ObjectByName name="bothRosters" land="local" />
				<CopyObject index="0" />
			</Objects>
		</Action>
	</AddToCompleteRoster>
	<SyncVisualAvatars cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="Object::visual_attacker" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:TeleportCharacterToItsPosition" parseOnDemand="true">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_attacker" />
						</ObjectByUID>
						<ObjectByName name="OrphanAlley" land="current" />
					</Objects>
				</Action>
			</True>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="Object::visual_defender" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:TeleportCharacterToItsPosition" parseOnDemand="true">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_defender" />
						</ObjectByUID>
						<ObjectByName name="OrphanAlley" land="current" />
					</Objects>
				</Action>
			</True>
		</Action>
	</SyncVisualAvatars>
	<SyncAttackerAvatarPositions ignoreHUD="true" cache="true">
		<Action type="parallelIterateObjectVariables" script="Superheroes2_FelonFightScripts:TeleportTeam">
			<Objects>
				<ObjectByName name="roster1" land="local" />
				<ObjectByName name="team1positions" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
				<CopyObject index="1" />
			</ScriptObjects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncVisualAvatars">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
	</SyncAttackerAvatarPositions>
	<SyncAvatarPositions ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncAttackerAvatarPositions" />
		<Action type="parallelIterateObjectVariables" script="Superheroes2_FelonFightScripts:TeleportTeam">
			<Objects>
				<ObjectByName name="roster2" land="local" />
				<ObjectByName name="team2positions" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
				<CopyObject index="1" />
			</ScriptObjects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncVisualAvatars">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:CalculateAdvantages" />
	</SyncAvatarPositions>
	<MoveCharacterToItsPosition cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<CopyObject index="0" />
			</Objects>
			<Requirement type="formula" formula="Object::delay" asObjectExpression="true" />
			<True>
				<Action type="delay" time="1" />
				<Action type="setObjectVariable" variable="delay" value="0" disableEvents="true" />
			</True>
		</Action>
		<Action type="move" movement="hover" panCamera="false" toBuilding="OrphanAlley" onCompleteScript="Superheroes2_FelonFightScripts:SetCharacterFacing">
			<Objects>
				<CopyObject index="0" />
				<CopyObject index="1" />
				<ObjectVariable index="0" variable="Object::position" interpretation="string" />
			</Objects>
		</Action>
	</MoveCharacterToItsPosition>
	<MoveCharacterToItsPosition_NoWait cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="Object::delay == 1" asObjectExpression="true" />
			<True>
				<Action type="delay" time="1" />
				<Action type="setObjectVariable" variable="delay" value="0" disableEvents="true" />
			</True>
		</Action>
		<Action type="move" movement="hover" panCamera="false" toBuilding="OrphanAlley" waitUntilComplete="false" onCompleteScript="Superheroes2_FelonFightScripts:SetCharacterFacing">
			<Objects>
				<CopyObject index="0" />
				<CopyObject index="1" />
				<ObjectVariable index="0" variable="Object::position" interpretation="string" />
			</Objects>
		</Action>
	</MoveCharacterToItsPosition_NoWait>
	<TeleportCharacterToItsPosition cache="true">
		<Action type="moveObjectInstance" forceValid="false">
			<Objects>
				<CopyObject index="0" />
				<CopyObject index="1" />
				<ObjectVariable index="0" variable="Object::position" interpretation="string" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetCharacterFacing" />
		<Action type="setSortAfterObject">
			<Objects>
				<CopyObject index="0" />
			</Objects>
		</Action>
	</TeleportCharacterToItsPosition>
	<SetCharacterFacing cache="true">
		<Action type="setFacing" object="OrphanAlley" locator="Center" />
	</SetCharacterFacing>
	<SetCharacterPosition cache="true">
		<Action type="setObjectVariable" variable="position" disableEvents="true">
			<Objects>
				<CopyObject index="0" />
				<CopyObject index="1" />
				<CopyObject index="1" />
			</Objects>
		</Action>
	</SetCharacterPosition>
	<MoveTeam cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:MoveCharacterToItsPosition" parseOnDemand="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
				<ObjectByName name="OrphanAlley" land="current" />
			</Objects>
		</Action>
	</MoveTeam>
	<MoveTeam_NoWait cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:MoveCharacterToItsPosition_NoWait" parseOnDemand="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
				<ObjectByName name="OrphanAlley" land="current" />
			</Objects>
		</Action>
	</MoveTeam_NoWait>
	<TeleportTeam cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:TeleportCharacterToItsPosition">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
				<ObjectByName name="OrphanAlley" land="current" />
			</Objects>
		</Action>
	</TeleportTeam>
	<RefreshOverlays cache="true">
		<Action type="playCharacterEffect" waitUntilComplete="false">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
				<ObjectByName name="OrphanAlley" land="current" />
			</Objects>
		</Action>
	</RefreshOverlays>
	<DisableAllButtons ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableHealButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableAttackButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableFastForwardButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableExitButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideSwapCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideHealCancelButton" />
	</DisableAllButtons>
	<DisableAllButExitButton ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableHealButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableAttackButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableFastForwardButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableExitButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideSwapCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideHealCancelButton" />
	</DisableAllButExitButton>
	<DisableAllButAttackButton ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableHealButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableExitButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableAttackButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideSwapCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideHealCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableFastForwardButton" />
	</DisableAllButAttackButton>
	<DisableAllButAttackAndExitButton ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableHealButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableAttackButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableExitButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideSwapCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideHealCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableFastForwardButton" />
	</DisableAllButAttackAndExitButton>
	<EnableAllButtons ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableAttackButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableHealButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableExitButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableFastForwardButton" />
	</EnableAllButtons>
	<ResumeLastFight cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::battle_active" asObjectExpression="true" />
			<True>
				<Action type="checkRequirements" ignoreObject="false">
					<Requirement type="formula" formula="Object::social_battle" asObjectExpression="true" />
					<True>
						<Action type="runScript" script="Superheroes2_FelonFightScripts:ClearAllData" />
					</True>
					<False>
						<Action type="if">
							<If expression="Tutorial_Battle_Active">
								<Then>
									<Action type="deleteAllObjectVariables" disableEvents="true">
										<Objects>
											<ObjectByName name="roster1" />
										</Objects>
									</Action>
									<Action type="if">
										<Objects>
											<ObjectByName name="game_data" land="local" />
										</Objects>
										<If expression="Object::tutorial_state==0" asObjectExpression="true">
											<Then>
												<Action type="setObjectVariable" variable="health" value="2" disableEvents="true">
													<Objects>
														<ObjectByName name="Obj_PieMan" land="local" />
													</Objects>
												</Action>
												<Action type="setObjectVariable" variable="health" value="2" disableEvents="true">
													<Objects>
														<ObjectByName name="Obj_FalloutBoy" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AddFighterToRoster">
													<Objects>
														<ObjectByName name="Obj_PieMan" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AddFighterToRoster">
													<Objects>
														<ObjectByName name="Obj_FalloutBoy" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetFirstAsAttacker" parseOnDemand="true">
													<Objects>
														<ObjectByName name="roster1" land="local" />
													</Objects>
												</Action>
											</Then>
										</If>
										<ElseIf expression="Object::tutorial_state==1" asObjectExpression="true">
											<Then>
												<Action type="setObjectVariable" variable="health" value="1" disableEvents="true">
													<Objects>
														<ObjectByName name="Obj_PieMan" land="local" />
													</Objects>
												</Action>
												<Action type="setObjectVariable" variable="health" value="2" disableEvents="true">
													<Objects>
														<ObjectByName name="Obj_FalloutBoy" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AddFighterToRoster">
													<Objects>
														<ObjectByName name="Obj_PieMan" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AddFighterToRoster">
													<Objects>
														<ObjectByName name="Obj_FalloutBoy" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetFirstAsAttacker" parseOnDemand="true">
													<Objects>
														<ObjectByName name="roster1" land="local" />
													</Objects>
												</Action>
											</Then>
										</ElseIf>
										<ElseIf expression="Object::tutorial_state==2" asObjectExpression="true">
											<Then>
												<Action type="setObjectVariable" variable="health" value="1" disableEvents="true">
													<Objects>
														<ObjectByName name="Obj_PieMan" land="local" />
													</Objects>
												</Action>
												<Action type="setObjectVariable" variable="health" value="1" disableEvents="true">
													<Objects>
														<ObjectByName name="Obj_FalloutBoy" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AddFighterToRoster">
													<Objects>
														<ObjectByName name="Obj_FalloutBoy" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AddFighterToRoster">
													<Objects>
														<ObjectByName name="Obj_PieMan" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetFirstAsAttacker" parseOnDemand="true">
													<Objects>
														<ObjectByName name="roster1" land="local" />
													</Objects>
												</Action>
											</Then>
										</ElseIf>
										<ElseIf expression="Object::tutorial_state==3" asObjectExpression="true">
											<Then>
												<Action type="setObjectVariable" variable="health" value="1" disableEvents="true">
													<Objects>
														<ObjectByName name="Obj_PieMan" land="local" />
													</Objects>
												</Action>
												<Action type="setObjectVariable" variable="health" value="1" disableEvents="true">
													<Objects>
														<ObjectByName name="Obj_FalloutBoy" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AddFighterToRoster">
													<Objects>
														<ObjectByName name="Obj_FalloutBoy" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AddFighterToRoster">
													<Objects>
														<ObjectByName name="Obj_PieMan" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetFirstAsAttacker" parseOnDemand="true">
													<Objects>
														<ObjectByName name="roster1" land="local" />
													</Objects>
												</Action>
											</Then>
										</ElseIf>
										<ElseIf expression="Object::tutorial_state==4" asObjectExpression="true">
											<Then>
												<Action type="setObjectVariable" variable="health" value="1" disableEvents="true">
													<Objects>
														<ObjectByName name="Obj_PieMan" land="local" />
													</Objects>
												</Action>
												<Action type="setObjectVariable" variable="health" value="2" disableEvents="true">
													<Objects>
														<ObjectByName name="Obj_FalloutBoy" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AddFighterToRoster">
													<Objects>
														<ObjectByName name="Obj_FalloutBoy" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AddFighterToRoster">
													<Objects>
														<ObjectByName name="Obj_PieMan" land="local" />
													</Objects>
												</Action>
												<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetFirstAsAttacker" parseOnDemand="true">
													<Objects>
														<ObjectByName name="roster1" land="local" />
													</Objects>
												</Action>
											</Then>
										</ElseIf>
									</Action>
									<Action type="runScript" script="Superheroes2_FelonFightScripts:DoResumeLastFight" />
								</Then>
							</If>
							<Else>
								<Then>
									<Action type="checkRequirements" ignoreObject="false">
										<Objects>
											<ObjectByName name="game_data" land="local" />
										</Objects>
										<Requirement type="formula" formula="or(Object::attackers_lost, Object::defenders_lost)" asObjectExpression="true" />
										<True>
											<Action type="runScript" script="Superheroes2_FelonFightScripts:ShowResultsScreen" />
										</True>
										<False>
											<Action type="genericConfirmation">
												<Attribute name="config">
													<AttributeSet name="onCancel">
														<Attribute name="script" value="Superheroes2_FelonFightScripts:DoResumeLastFight" />
													</AttributeSet>
													<AttributeSet name="onOK">
														<Attribute name="script" value="Superheroes2_FelonFightScripts:ClearAllData" />
													</AttributeSet>
													<AttributeSet name="onBackButton">
														<Attribute name="mapTo" value="onCancel" />
													</AttributeSet>
													<AttributeSet name="title">
														<Attribute name="text" value="UI_Superheroes2_Battle_Resume_title" localise="true" />
														<Attribute name="color" value="FFD51AFF" />
													</AttributeSet>
													<AttributeSet name="message">
														<Attribute name="text" value="UI_Superheroes2_Battle_Resume_body" localise="true" />
														<Attribute name="font" value="eFont_Small" />
														<Attribute name="color" value="FFFFFFFF" />
													</AttributeSet>
													<AttributeSet name="button_Cancel">
														<Attribute name="button_text">
															<AttributeSet name="text">
																<Attribute name="text" value="UI_Superheroes2_Battle_Resume_confirm" localise="true" />
															</AttributeSet>
														</Attribute>
														<Attribute name="button_back">
															<AttributeSet name="button">
																<Attribute name="color" value="0091F1FF" />
															</AttributeSet>
														</Attribute>
													</AttributeSet>
													<AttributeSet name="button_OK">
														<Attribute name="button_text">
															<AttributeSet name="text">
																<Attribute name="text" value="UI_Superheroes2_Battle_Resume_cancel" localise="true" />
															</AttributeSet>
														</Attribute>
														<Attribute name="button_back">
															<AttributeSet name="button">
																<Attribute name="color" value="BB0310FF" />
															</AttributeSet>
														</Attribute>
													</AttributeSet>
													<AttributeSet name="exitButton">
														<Attribute name="active" value="false" />
													</AttributeSet>
													<AttributeSet name="showTwoButtons">
														<Attribute name="active" value="true" />
													</AttributeSet>
												</Attribute>
											</Action>
										</False>
									</Action>
								</Then>
							</Else>
						</Action>
					</False>
				</Action>
			</True>
		</Action>
	</ResumeLastFight>
	<DoRetreatLastFight>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:UpdateBattleTimesOnFighters" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:GiveRetreatReward" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowRewardPopup" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ClearAllData" />
		<Action type="deleteAllObjectVariables">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
	</DoRetreatLastFight>
	<DoResumeLastFight cache="true">
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="StartGameMusic" />
		<Action type="pantoobject" building="OrphanAlley" time="0.0" />
		<Action type="fitToScreen" targetObject="OrphanAlley">
			<Bounds locator="Left_Edge" />
		</Action>
		<Action type="hideAllBuildings" hide="true" belowPointTarget="OrphanAlley" exceptBuildings="OrphanAlley" />
		<Action type="hideAllCharacters" hide="true" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnterCustomTouch" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:InitializePositions1">
			<Objects>
				<ObjectByName name="team1positions" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:InitializePositions2">
			<Objects>
				<ObjectByName name="team2positions" land="local" />
			</Objects>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::attacker" asObjectExpression="true" />
			<True>
				<Action type="removeObjectVariablesByValue" value="Object::UID">
					<Objects>
						<ObjectByName name="roster1" land="local" />
						<ObjectVariable name="game_data" variable="Object::attacker" interpretation="object" land="local" />
					</Objects>
				</Action>
				<Action type="pushFrontObjectVariable" formula="Object::UID" disableEvents="true">
					<Objects>
						<ObjectByName name="roster1" land="local" />
						<ObjectVariable name="game_data" variable="Object::attacker" interpretation="object" land="local" />
					</Objects>
				</Action>
			</True>
			<False>
				<Action type="popFrontObjectVariable" disableEvents="true">
					<Objects>
						<ObjectByName name="team1positions" land="local" />
					</Objects>
				</Action>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetFirstAsDefender" parseOnDemand="true">
					<Objects>
						<ObjectByName name="roster2" land="local" />
					</Objects>
				</Action>
			</False>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SpawnAvatars" />
		<Action type="setObjectVariable" variable="defender_died" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="attacker_damage_done" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="defender_damage_done" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="can_attack" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncAvatarPositions" />
		<Action type="runScript" script="Superheroes2_FelonFightScripts:EnableCharacterOverlays" />
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="or(Object::attackers_lost, Object::defenders_lost)" asObjectExpression="true" />
			<True>
				<Action type="runScript" script="Superheroes2_FelonFightScripts:ShowResultsScreen" />
			</True>
			<False>
				<Action type="checkRequirements" ignoreObject="false">
					<Objects>
						<ObjectByName name="game_data" land="local" />
					</Objects>
					<Requirement type="formula" formula="Object::attacker" asObjectExpression="true" />
					<True>
						<Action type="runScript" package="Superheroes2_FelonFightScripts" script="AllowAttack" />
						<Action type="runScript" package="Superheroes2_FelonFightScripts" script="ConfigureButtonsForPlayerTurn" />
					</True>
					<False>
						<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ChooseNextAttacker" />
					</False>
				</Action>
			</False>
		</Action>
	</DoResumeLastFight>
	<LinkActualCharacterAndData cache="true">
		<Action type="setObjectVariable" variable="actual_character" value="Object::UID" asObjectExpression="true" disableEvents="true">
			<Objects>
				<CopyObject index="4" />
				<CopyObject index="0" />
			</Objects>
		</Action>
	</LinkActualCharacterAndData>
	<DespawnTeam cache="true">
		<Action type="deletecharacter">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable variable="Object::character">
						<CopyObject index="0" />
					</ObjectVariable>
				</ObjectByUID>
			</Objects>
		</Action>
	</DespawnTeam>
	<SetSelectable cache="true">
		<Action type="setObjectVariable" variable="FelonFightSelectable" value="1" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
			</Objects>
		</Action>
	</SetSelectable>
	<SetSelectableForHealing cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="lessThan(Object::health, Object::max_health)" asObjectExpression="true" />
			<True>
				<Action type="setObjectVariable" variable="FelonFightSelectable" value="1" disableEvents="true">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::character" />
						</ObjectByUID>
					</Objects>
				</Action>
			</True>
		</Action>
	</SetSelectableForHealing>
	<ClearFighterSelectable cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="Object::attacker" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ClearSelectable" parseOnDemand="true">
					<Objects>
						<ObjectVariable index="0" variable="Object::attacker" interpretation="object" land="local" />
					</Objects>
				</Action>
			</True>
		</Action>
	</ClearFighterSelectable>
	<ClearSelectable cache="true">
		<Action type="setObjectVariable" variable="FelonFightSelectable" value="0" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
			</Objects>
		</Action>
	</ClearSelectable>
	<MoveAttackerToSelected cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:MoveCharacterToItsPosition_NoWait">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::visual_attacker" />
				</ObjectByUID>
				<ObjectByName name="OrphanAlley" land="current" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:MoveCharacterToItsPosition">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::swapped_attacker::character" land="local" />
				</ObjectByUID>
				<ObjectByName name="OrphanAlley" land="current" />
			</Objects>
		</Action>
	</MoveAttackerToSelected>
	<FighterSelected ignoreHUD="true" cache="true" transactional="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
				<CopyObject index="0" />
			</Objects>
			<Requirement type="formula" formula="Object::healing" asObjectExpression="true" />
			<False>
				<Action type="setObjectVariable" variable="swapping" value="0" disableEvents="true">
					<Objects>
						<ObjectByName name="game_data" land="local" />
					</Objects>
				</Action>
				<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:ClearSelectable">
					<Objects>
						<ObjectByName name="roster1" land="local" />
					</Objects>
					<ScriptObjects>
						<ObjectByUID land="local">
							<CopyObject index="0" />
						</ObjectByUID>
					</ScriptObjects>
				</Action>
				<Action type="checkRequirements" ignoreObject="false">
					<Requirement type="formula" formula="Object::attacker_died" asObjectExpression="true" />
					<True>
						<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SelectFighterAfterDeathCallback">
							<Objects>
								<CopyObject index="1" />
							</Objects>
						</Action>
					</True>
					<False>
						<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SwapAttacker">
							<Objects>
								<CopyObject index="1" />
							</Objects>
						</Action>
					</False>
				</Action>
			</False>
			<True>
				<Action type="setObjectVariable" variable="healing" value="0" disableEvents="true">
					<Objects>
						<CopyObject index="0" />
					</Objects>
				</Action>
				<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:ClearSelectable">
					<Objects>
						<ObjectByName name="roster1" land="local" />
					</Objects>
					<ScriptObjects>
						<ObjectByUID land="local">
							<CopyObject index="0" />
						</ObjectByUID>
					</ScriptObjects>
				</Action>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:TakeResourcesAndHeal">
					<Objects>
						<CopyObject index="1" />
					</Objects>
				</Action>
			</True>
		</Action>
	</FighterSelected>
	<AskGetMore ignoreHUD="true">
		<Action type="genericConfirmation">
			<Attribute name="config">
				<AttributeSet name="onOK">
					<Attribute name="script" value="Superheroes2_FelonFightScripts:OpenDonutStore" />
				</AttributeSet>
				<AttributeSet name="onCancel">
					<Attribute name="script" value="Superheroes2_FelonFightScripts:ResumeAfterHeal" />
				</AttributeSet>
				<AttributeSet name="onBackButton">
					<Attribute name="mapTo" value="onCancel" />
				</AttributeSet>
				<AttributeSet name="title">
					<Attribute name="text" value="RES_ScienceWater_single" localise="true" />
				</AttributeSet>
				<AttributeSet name="message">
					<Attribute name="text" value="RES_InsufficientPremium" localise="true" />
					<Attribute name="font" value="eFont_Small" />
					<Attribute name="color" value="FFFFFFFF" />
				</AttributeSet>
				<AttributeSet name="button_Cancel">
					<Attribute name="button_text">
						<AttributeSet name="text">
							<Attribute name="text" value="GEN_Cancel" localise="true" />
						</AttributeSet>
					</Attribute>
					<Attribute name="button_back">
						<AttributeSet name="button">
							<Attribute name="color" value="BB0310FF" />
						</AttributeSet>
					</Attribute>
				</AttributeSet>
				<AttributeSet name="button_OK">
					<Attribute name="button_text">
						<AttributeSet name="text">
							<Attribute name="text" value="GEN_GetMore" localise="true" />
						</AttributeSet>
					</Attribute>
					<Attribute name="button_back">
						<AttributeSet name="button">
							<Attribute name="color" value="D03484FF" />
						</AttributeSet>
					</Attribute>
				</AttributeSet>
				<AttributeSet name="exitButton">
					<Attribute name="active" value="false" />
				</AttributeSet>
				<AttributeSet name="showTwoButtons">
					<Attribute name="active" value="true" />
				</AttributeSet>
			</Attribute>
		</Action>
	</AskGetMore>
	<DonutConfirmation ignoreHUD="true">
		<Action type="genericConfirmation">
			<Attribute name="config">
				<AttributeSet name="onOK">
					<Attribute name="passObjects" value="true" />
					<Attribute name="script" value="Superheroes2_FelonFightScripts:TakeDonutsAndHeal" />
				</AttributeSet>
				<AttributeSet name="onCancel">
					<Attribute name="script" value="Superheroes2_FelonFightScripts:ResumeAfterHeal" />
				</AttributeSet>
				<AttributeSet name="onBackButton">
					<Attribute name="mapTo" value="onCancel" />
				</AttributeSet>
				<AttributeSet name="title">
					<Attribute name="text" value="UI_Superheroes2_Battle_Heal_title" localise="true" />
					<Attribute name="color" value="FFD51AFF" />
				</AttributeSet>
				<AttributeSet name="message">
					<Attribute name="text" value="UI_Superheroes2_Battle_Heal_body" localise="true" parameters="textParams">
						<AttributeSet name="textParams">
							<Attribute name="0" value="1" />
							<Attribute name="1" formula="ConfigValue('__Superheroes2_Spreadsheet_Config:Spendables:Donuts_Per_Sciencewater_Ratio__')" />
						</AttributeSet>
					</Attribute>
					<Attribute name="font" value="eFont_Small" />
					<Attribute name="color" value="FFFFFFFF" />
				</AttributeSet>
				<AttributeSet name="button_Cancel">
					<Attribute name="button_text">
						<AttributeSet name="text">
							<Attribute name="text" value="UI_Superheroes2_Battle_Heal_cancel" localise="true" />
						</AttributeSet>
					</Attribute>
					<Attribute name="button_back">
						<AttributeSet name="button">
							<Attribute name="color" value="BB0310FF" />
						</AttributeSet>
					</Attribute>
				</AttributeSet>
				<AttributeSet name="button_OK">
					<Attribute name="button_text">
						<AttributeSet name="text">
							<Attribute name="text" value="UI_Superheroes2_Battle_Heal_confirm" localise="true" />
						</AttributeSet>
					</Attribute>
					<Attribute name="button_back">
						<AttributeSet name="button">
							<Attribute name="color" value="0091F1FF" />
						</AttributeSet>
					</Attribute>
				</AttributeSet>
				<AttributeSet name="exitButton">
					<Attribute name="active" value="false" />
				</AttributeSet>
				<AttributeSet name="showTwoButtons">
					<Attribute name="active" value="true" />
				</AttributeSet>
			</Attribute>
		</Action>
	</DonutConfirmation>
	<TakeResourcesAndHeal>
		<Action type="if">
			<If expression="Tutorial_Battle_Active">
				<Then>
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HealSuccess" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="spendResources">
						<Cost ScienceWater="1" />
						<Success name="Superheroes2_FelonFightScripts:HealSuccess" />
						<Failure name="Superheroes2_FelonFightScripts:AskTakeDonuts" />
					</Action>
				</Then>
			</Else>
		</Action>
	</TakeResourcesAndHeal>
	<HealSuccess>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HealCharacter"></Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ResumeAfterHeal" />
	</HealSuccess>
	<AskTakeDonuts>
		<Action type="runScript" script="Superheroes2_FelonFightScripts:DonutConfirmation" />
	</AskTakeDonuts>
	<NotEnoughDonuts>
		<Action type="checkRequirements">
			<Requirement type="players land" />
			<True>
				<Action type="runScript" script="Superheroes2_FelonFightScripts:AskGetMore" />
			</True>
			<False>
				<Action type="runScript" script="Superheroes2_FelonFightScripts:CannotGetMore" />
			</False>
		</Action>
	</NotEnoughDonuts>
	<OpenDonutStore>
		<Action type="focusOnMenuItem" allowInLand="any" minimalStoreFile="FriendMapStoreMenu.xml" onLeaveStore="Superheroes2_FelonFightScripts:ReturnFromStore" />
	</OpenDonutStore>
	<CannotGetMore>
		<Action type="message" text="UI_Superheroes2_Battle_Social_NoSciencewater" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ResumeAfterHeal" />
	</CannotGetMore>
	<TakeDonutsAndHeal ignoreHUD="true">
		<Action type="spendResources">
			<Cost donuts="__Superheroes2_Spreadsheet_Config:Spendables:Donuts_Per_Sciencewater_Ratio__" />
			<Success name="Superheroes2_FelonFightScripts:HealSuccess" />
			<Cancel name="Superheroes2_FelonFightScripts:ResumeAfterHeal" />
			<Failure name="Superheroes2_FelonFightScripts:NotEnoughDonuts" />
		</Action>
	</TakeDonutsAndHeal>
	<ResumeAfterHeal ignoreHUD="true">
		<Action type="runScript" script="Superheroes2_FelonFightScripts:ConfigureButtonsForPlayerTurn" />
		<Action type="runScript" script="Superheroes2_FelonFightScripts:AllowAttack" />
	</ResumeAfterHeal>
	<ReturnFromStore runQueueState="RunInAnyState">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnterCustomTouch" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ResumeAfterHeal" />
	</ReturnFromStore>
	<VisuallySwapAttacker ignoreHUD="true" interruptable="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:MoveAttackerToSelected" parseOnDemand="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
	</VisuallySwapAttacker>
	<UpdateLocationsForSwap cache="true">
		<Action type="setObjectVariable" variable="position" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::swapped_attacker::character" land="local" />
				</ObjectByUID>
				<CopyObject index="0" />
				<ObjectVariable variable="Object::position">
					<ObjectByUID land="current">
						<ObjectVariable index="0" variable="Object::attacker::character" land="local" />
					</ObjectByUID>
				</ObjectVariable>
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="position" value="Roster1_Primary" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::attacker::character" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
	</UpdateLocationsForSwap>
	<CalculateAdvantages cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:UpdateDefenderType">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:CalculateAdvantageIndividual">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:CalculateAdvantageIndividual_Felon">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
	</CalculateAdvantages>
	<UpdateDefenderType cache="true">
		<Action type="updateVariable" variable="defender_type" value="Object::battle_type" disableEvents="true">
			<Objects>
				<ObjectVariable index="0" variable="Object::defender" interpretation="object" land="local" />
			</Objects>
		</Action>
		<Action type="updateVariable" variable="attacker_type" value="Object::battle_type" disableEvents="true">
			<Objects>
				<ObjectVariable index="0" variable="Object::attacker" interpretation="object" land="local" />
			</Objects>
		</Action>
	</UpdateDefenderType>
	<CalculateAdvantageIndividual cache="true">
		<Action type="setObjectVariable" variable="advantage" value="(mod(Object::battle_type, 3)) == (defender_type-1)" asObjectExpression="true" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="disadvantage" value="(mod(defender_type, 3)) == (Object::battle_type-1)" asObjectExpression="true" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
				<CopyObject index="0" />
			</Objects>
		</Action>
	</CalculateAdvantageIndividual>
	<CalculateAdvantageIndividual_Felon cache="true">
		<Action type="setObjectVariable" variable="advantage" value="(mod(Object::battle_type, 3)) == (attacker_type-1)" asObjectExpression="true" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="disadvantage" value="(mod(attacker_type, 3)) == (Object::battle_type-1)" asObjectExpression="true" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
				<CopyObject index="0" />
			</Objects>
		</Action>
	</CalculateAdvantageIndividual_Felon>
	<CalculateDamage cache="true">
		<Action type="setObjectVariable" asObjectExpression="true" variable="attack_type" value="Object::battle_type" disableEvents="true">
			<Objects>
				<CopyObject index="2" />
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" asObjectExpression="true" variable="defend_type" value="Object::battle_type" disableEvents="true">
			<Objects>
				<CopyObject index="2" />
				<CopyObject index="1" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" asObjectExpression="true" variable="damage_done" value="1" disableEvents="true">
			<Objects>
				<CopyObject index="2" />
			</Objects>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<CopyObject index="2" />
				<CopyObject index="1" />
			</Objects>
			<Requirement type="formula" formula="(mod(Object::attack_type, 3)) == (Object::defend_type-1)" asObjectExpression="true" />
			<True>
				<Action type="setObjectVariable" asObjectExpression="true" variable="damage_done" value="min(Object::health,2)" disableEvents="true" />
			</True>
		</Action>
	</CalculateDamage>
	<ApplyDamage cache="true">
		<Action type="updateVariable" variable="damage_done" value="Object::damage_done" disableEvents="true">
			<Objects>
				<CopyObject index="1" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" asObjectExpression="true" value="max(0, Object::health - damage_done)" variable="health" disableEvents="true">
			<Objects>
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="died" value="lessThan(Object::health, 1)" asObjectExpression="true" disableEvents="true">
			<Objects>
				<CopyObject index="1" />
				<CopyObject index="0" />
			</Objects>
		</Action>
	</ApplyDamage>
	<DeleteActualCharacter cache="true">
		<Action type="deletecharacter">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::actual_character" />
				</ObjectByUID>
			</Objects>
		</Action>
	</DeleteActualCharacter>
	<RemoveIfDead cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="lessThan(Object::health, 1)" asObjectExpression="true" />
			<True>
				<Action type="removeObjectVariablesByValue" value="Object::UID">
					<Objects>
						<CopyObject index="1" />
						<CopyObject index="0" />
					</Objects>
				</Action>
				<Action type="checkRequirements" ignoreObject="false">
					<Requirement type="formula" formula="Object::actual_character" asObjectExpression="true" />
					<True>
						<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AdjustLeader" parseOnDemand="true" />
						<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DeleteActualCharacter" parseOnDemand="true" />
					</True>
				</Action>
			</True>
		</Action>
	</RemoveIfDead>
	<AdjustLeader cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="Object::leader" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:MakeNewLeader" parseOnDemand="true">
					<Objects>
						<CopyObject index="1" />
					</Objects>
				</Action>
			</True>
		</Action>
	</AdjustLeader>
	<MakeNewLeader cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="Object::COUNT" asObjectExpression="true" />
			<True>
				<Action type="setObjectVariable" variable="leader" value="1">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::0::actual_character" land="current" />
						</ObjectByUID>
					</Objects>
				</Action>
			</True>
		</Action>
	</MakeNewLeader>
	<SaveVisuals cache="true">
		<Action type="setObjectVariable" variable="visual_attacker" value="Object::character" asObjectExpression="true" disableEvents="true">
			<Objects>
				<CopyObject index="2" />
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="visual_defender" value="Object::character" asObjectExpression="true" disableEvents="true">
			<Objects>
				<CopyObject index="2" />
				<CopyObject index="1" />
			</Objects>
		</Action>
	</SaveVisuals>
	<GenericAttack cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:CalculateDamage">
			<Objects>
				<CopyObject index="0" />
				<CopyObject index="1" />
				<CopyObject index="3" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ApplyDamage">
			<Objects>
				<CopyObject index="1" />
				<CopyObject index="3" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:RemoveIfDead">
			<Objects>
				<CopyObject index="1" />
				<CopyObject index="2" />
			</Objects>
		</Action>
	</GenericAttack>
	<SetPositionToFaceOff cache="true">
		<Action type="setObjectVariable" variable="position" value="Roster2_Primary" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
			</Objects>
		</Action>
	</SetPositionToFaceOff>
	<SetDefenderPositionToFaceOff cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetPositionToFaceOff">
			<Objects>
				<ObjectVariable index="0" variable="Object::defender" interpretation="object" land="local" />
			</Objects>
		</Action>
	</SetDefenderPositionToFaceOff>
	<ChooseNextDefender cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
			<Requirement type="formula" formula="lessThan(Object::COUNT, 1)" asObjectExpression="true" />
			<True>
				<Action type="setObjectVariable" asObjectExpression="true" variable="defender" value="0" disableEvents="true">
					<Objects>
						<ObjectByName name="game_data" land="local" />
					</Objects>
				</Action>
			</True>
			<False>
				<Action type="setObjectVariable" asObjectExpression="true" variable="defender" value="Object::FRONT" disableEvents="true">
					<Objects>
						<ObjectByName name="game_data" land="local" />
						<ObjectByName name="roster2" land="local" />
					</Objects>
				</Action>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetDefenderPositionToFaceOff" parseOnDemand="true">
					<Objects>
						<ObjectByName name="game_data" land="local" />
					</Objects>
				</Action>
			</False>
		</Action>
	</ChooseNextDefender>
	<FakeSelectNextAttackerCharacter cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SelectFighterAfterDeathCallback">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
			</Objects>
		</Action>
	</FakeSelectNextAttackerCharacter>
	<FakeSelectNextAttacker cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:FakeSelectNextAttackerCharacter">
			<Objects>
				<ObjectByUID land="local">
					<ObjectVariable index="0" variable="Object::attacker" />
				</ObjectByUID>
			</Objects>
		</Action>
	</FakeSelectNextAttacker>
	<FakeSelectNextAttackerNoVisuals cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SelectFighterAfterDeathCallbackNoVisuals">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable variable="Object::character">
						<ObjectByUID land="local">
							<ObjectVariable index="0" variable="Object::attacker" />
						</ObjectByUID>
					</ObjectVariable>
				</ObjectByUID>
			</Objects>
		</Action>
	</FakeSelectNextAttackerNoVisuals>
	<AutoSwapAfterDeath ignoreHUD="true" cache="true">
		<Action type="setObjectVariable" asObjectExpression="true" variable="attacker" value="Object::FRONT" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
				<ObjectByName name="roster1" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:FakeSelectNextAttacker" parseOnDemand="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
	</AutoSwapAfterDeath>
	<AutoSwapAfterDeathNoVisuals ignoreHUD="true" cache="true">
		<Action type="setObjectVariable" asObjectExpression="true" variable="attacker" value="Object::FRONT" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
				<ObjectByName name="roster1" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:FakeSelectNextAttackerNoVisuals" parseOnDemand="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
	</AutoSwapAfterDeathNoVisuals>
	<ChooseNextAttacker cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<Requirement type="formula" formula="lessThan(Object::COUNT, 2)" asObjectExpression="true" />
			<True>
				<Action type="runScript" package="Superheroes2_FelonFightScripts" script="AutoSwapAfterDeath" />
			</True>
			<False>
				<Action type="runScript" package="Superheroes2_FelonFightScripts" script="SwapAfterDeath" />
			</False>
		</Action>
	</ChooseNextAttacker>
	<AttackerAttack cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:GenericAttack">
			<Objects>
				<ObjectVariable index="0" variable="Object::attacker" interpretation="object" land="local" />
				<ObjectVariable index="0" variable="Object::defender" interpretation="object" land="local" />
				<ObjectByName name="roster2" land="local" />
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="Object::died" asObjectExpression="true" />
			<True>
				<Action type="setObjectVariable" variable="defender" value="0" disableEvents="true">
					<Objects>
						<CopyObject index="0" />
					</Objects>
				</Action>
				<Action type="setObjectVariable" variable="data" value="0" disableEvents="true">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_defender" />
						</ObjectByUID>
					</Objects>
				</Action>
			</True>
		</Action>
		<Action type="setObjectVariable" variable="defender_died" value="Object::died" asObjectExpression="true" disableEvents="true" />
		<Action type="setObjectVariable" variable="attacker_damage_done" value="Object::damage_done" asObjectExpression="true" disableEvents="true" />
		<Action type="setObjectVariable" variable="total_damage_done" value="Object::total_damage_done + Object::damage_done" asObjectExpression="true" disableEvents="true" />
	</AttackerAttack>
	<DefenderAttack cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:GenericAttack">
			<Objects>
				<ObjectVariable index="0" variable="Object::defender" interpretation="object" land="local" />
				<ObjectVariable index="0" variable="Object::attacker" interpretation="object" land="local" />
				<ObjectByName name="roster1" land="local" />
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="Object::died" asObjectExpression="true" />
			<True>
				<Action type="setObjectVariable" variable="attacker" value="0" disableEvents="true">
					<Objects>
						<CopyObject index="0" />
					</Objects>
				</Action>
				<Action type="setObjectVariable" variable="data" value="0" disableEvents="true">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_attacker" />
						</ObjectByUID>
					</Objects>
				</Action>
			</True>
		</Action>
		<Action type="setObjectVariable" variable="attacker_died" value="Object::died" asObjectExpression="true" disableEvents="true" />
		<Action type="setObjectVariable" variable="defender_damage_done" value="Object::damage_done" asObjectExpression="true" disableEvents="true" />
		<Action type="setObjectVariable" variable="total_damage_taken" value="Object::total_damage_taken + Object::damage_done" asObjectExpression="true" disableEvents="true" />
	</DefenderAttack>
	<FullAttackQuickBattle cache="true" transactional="true">
		<Action type="setObjectVariable" variable="attacker_died" value="0" disableEvents="true" />
		<Action type="setObjectVariable" variable="defender_died" value="0" disableEvents="true" />
		<Action type="setObjectVariable" variable="attacker_damage_done" value="0" disableEvents="true" />
		<Action type="setObjectVariable" variable="defender_damage_done" value="0" disableEvents="true" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AttackerAttack" parseOnDemand="true" />
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="Object::defender_died" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ChooseNextDefender" parseOnDemand="true" />
			</True>
			<False>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DefenderAttack" parseOnDemand="true" />
			</False>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
			<Requirement type="formula" formula="lessThan(Object::COUNT, 1)" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:FullAttackDefendersLost" parseOnDemand="true" />
			</True>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<Requirement type="formula" formula="lessThan(Object::COUNT, 1)" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:FullAttackAttackersLost" parseOnDemand="true" />
			</True>
		</Action>
	</FullAttackQuickBattle>
	<FullAttack cache="true" transactional="true">
		<Action type="setObjectVariable" variable="attacker_died" value="0" disableEvents="true" />
		<Action type="setObjectVariable" variable="defender_died" value="0" disableEvents="true" />
		<Action type="setObjectVariable" variable="attacker_damage_done" value="0" disableEvents="true" />
		<Action type="setObjectVariable" variable="defender_damage_done" value="0" disableEvents="true" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SaveVisuals">
			<Objects>
				<ObjectVariable index="0" variable="Object::attacker" interpretation="object" land="local" />
				<ObjectVariable index="0" variable="Object::defender" interpretation="object" land="local" />
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AttackerAttack" parseOnDemand="true" />
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="Object::defender_died" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ChooseNextDefender" parseOnDemand="true" />
			</True>
			<False>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DefenderAttack" parseOnDemand="true" />
			</False>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
			<Requirement type="formula" formula="lessThan(Object::COUNT, 1)" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:FullAttackDefendersLost" parseOnDemand="true" />
			</True>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<Requirement type="formula" formula="lessThan(Object::COUNT, 1)" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:FullAttackAttackersLost" parseOnDemand="true" />
			</True>
		</Action>
	</FullAttack>
	<FullAttackAttackersLost>
		<Action type="setObjectVariable" variable="attackers_lost" value="1" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="if">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<If expression="Object::social_battle" asObjectExpression="true">
				<Then>
					<Action type="setVariable" intVariable="temp_CurrencyReward" intValue="ConfigValue('__Superheroes2_Spreadsheet_Config:SocialBattles:Loss_CurrencyReward__') + System::evaluate('LocalLand::AdHoc::game_data::Object::total_damage_done') * ConfigValue('__Superheroes2_Spreadsheet_Config:SocialBattles:DamageBonus_CurrencyReward__')" addTempIfNotExisting="true" />
					<Action type="reward" Superheroes2ActivePrizeTrackCurrency="temp_CurrencyReward" FiniteStones="ConfigValue('__Superheroes2_Spreadsheet_Config:SocialBattles:Loss_FiniteStoneReward__')" noDrops="true" />
					<Action type="runScript" script="Superheroes2_FelonFightScripts:UpdateInflowTelemetry">
						<FormatToken key="type" value="Social" />
					</Action>
					<Action type="setVariable" intVariable="FelonFights_Lost_Social" intValue="FelonFights_Lost_Social+1" />
					<Action type="setVariable" intVariable="Superheroes2_DCS1_VarTracker" intValue="Superheroes2_DCS1_VarTracker+1" />
					<Action type="incrementSessionCounter" counter="Superhereos2_FelonFight_SocialBattle" increment="1" />
					<Action type="reward" SocialBattleFights="1" />
					<Action type="setVariable" intVariable="Superheroes2_SocialBattlesFought" intValue="Superheroes2_SocialBattlesFought+1" />
					<Action type="if">
						<If expression="FF_SocialBattleTimer == 0">
							<Then>
								<Action type="updateVariable" variable="FF_SocialBattleTimer" value="serverTime(0)" />
							</Then>
						</If>
					</Action>
					<Action type="updateVariable" variable="FF_SocialBattlesToday" value="FF_SocialBattlesToday+1" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="setVariable" intVariable="temp_CurrencyReward" intValue="ConfigValue('__Superheroes2_Spreadsheet_Config:FelonBattles:Loss_CurrencyReward__') + System::evaluate('LocalLand::AdHoc::game_data::Object::total_damage_done') * ConfigValue('__Superheroes2_Spreadsheet_Config:FelonBattles:DamageBonus_CurrencyReward__')" addTempIfNotExisting="true" />
					<Action type="reward" Superheroes2ActivePrizeTrackCurrency="temp_CurrencyReward" FiniteStones="ConfigValue('__Superheroes2_Spreadsheet_Config:FelonBattles:Loss_FiniteStoneReward__')" noDrops="true" />
					<Action type="runScript" script="Superheroes2_FelonFightScripts:UpdateInflowTelemetry">
						<FormatToken key="type" value="Local" />
					</Action>
					<Action type="setVariable" intVariable="FelonFights_Lost_Local" intValue="FelonFights_Lost_Local+1" />
					<Action type="setVariable" intVariable="Superheroes2_DCS1_VarTracker" intValue="Superheroes2_DCS1_VarTracker+1" />
					<Action type="incrementSessionCounter" counter="Superhereos2_FelonFight_LocalBattle" increment="1" />
				</Then>
			</Else>
		</Action>
	</FullAttackAttackersLost>
	<FullAttackDefendersLost>
		<Action type="setObjectVariable" variable="defenders_lost" value="1" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="if">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<If expression="Object::social_battle" asObjectExpression="true">
				<Then>
					<Action type="setVariable" intVariable="temp_CurrencyReward" intValue="ConfigValue('__Superheroes2_Spreadsheet_Config:SocialBattles:Win_CurrencyReward__') + System::evaluate('LocalLand::AdHoc::game_data::Object::total_damage_done') * ConfigValue('__Superheroes2_Spreadsheet_Config:SocialBattles:DamageBonus_CurrencyReward__')" addTempIfNotExisting="true" />
					<Action type="reward" Superheroes2ActivePrizeTrackCurrency="temp_CurrencyReward" FiniteStones="ConfigValue('__Superheroes2_Spreadsheet_Config:FelonBattles:Win_FiniteStoneReward__')" noDrops="true" />
					<Action type="runScript" script="Superheroes2_FelonFightScripts:UpdateInflowTelemetry">
						<FormatToken key="type" value="Social" />
					</Action>
					<Action type="if">
						<If expression="BattleTutorialComplete">
							<Then>
								<Action type="setVariable" intVariable="LastWinDay" intValue="dateYday(serverTime(0))" />
								<Action type="setVariable" intVariable="FelonFights_Won_Social" intValue="FelonFights_Won_Social+1" />
							</Then>
						</If>
					</Action>
					<Action type="setVariable" intVariable="Superheroes2_DCS1_VarTracker" intValue="Superheroes2_DCS1_VarTracker+1" />
					<Action type="setVariable" intVariable="Superheroes2_DCS5_VarTracker" intValue="Superheroes2_DCS5_VarTracker+1" />
					<Action type="checkExpression" expression="Superheroes2_DCS6_DidNotHeal">
						<ExpressionCase value="0">
							<Action type="setVariable" boolVariable="Superheroes2_DCS6_DidNotHeal" boolValue="true" />
						</ExpressionCase>
						<ExpressionCase value="1">
							<Action type="setVariable" intVariable="Superheroes2_DCS6_VarTracker" intValue="Superheroes2_DCS6_VarTracker+1" />
						</ExpressionCase>
					</Action>
					<Action type="setVariable" intVariable="Superheroes2_DCS7_VarTracker" intValue="Superheroes2_DCS7_VarTracker+1" />
					<Action type="incrementSessionCounter" counter="Superhereos2_FelonFight_SocialBattle" increment="1" />
					<Action type="reward" SocialBattleFights="1" />
					<Action type="setVariable" intVariable="Superheroes2_SocialBattlesFought" intValue="Superheroes2_SocialBattlesFought+1" />
					<Action type="if">
						<If expression="FF_SocialBattleTimer == 0">
							<Then>
								<Action type="updateVariable" variable="FF_SocialBattleTimer" value="serverTime(0)" />
							</Then>
						</If>
					</Action>
					<Action type="updateVariable" variable="FF_SocialBattlesToday" value="FF_SocialBattlesToday+1" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="setVariable" intVariable="temp_CurrencyReward" intValue="ConfigValue('__Superheroes2_Spreadsheet_Config:FelonBattles:Win_CurrencyReward__') + System::evaluate('LocalLand::AdHoc::game_data::Object::total_damage_done') * ConfigValue('__Superheroes2_Spreadsheet_Config:FelonBattles:DamageBonus_CurrencyReward__')" addTempIfNotExisting="true" />
					<Action type="reward" Superheroes2ActivePrizeTrackCurrency="temp_CurrencyReward" FiniteStones="ConfigValue('__Superheroes2_Spreadsheet_Config:FelonBattles:Win_FiniteStoneReward__')" noDrops="true" />
					<Action type="runScript" script="Superheroes2_FelonFightScripts:UpdateInflowTelemetry">
						<FormatToken key="type" value="Local" />
					</Action>
					<Action type="if">
						<If expression="BattleTutorialComplete">
							<Then>
								<Action type="setVariable" intVariable="LastWinDay" intValue="dateYday(serverTime(0))" />
								<Action type="setVariable" intVariable="FelonFights_Won_Local" intValue="FelonFights_Won_Local+1" />
							</Then>
						</If>
					</Action>
					<Action type="setVariable" intVariable="Superheroes2_DCS1_VarTracker" intValue="Superheroes2_DCS1_VarTracker+1" />
					<Action type="setVariable" intVariable="Superheroes2_DCS2_VarTracker" intValue="Superheroes2_DCS2_VarTracker+1" />
					<Action type="checkExpression" expression="Superheroes2_DCS3_DidNotHeal">
						<ExpressionCase value="0">
							<Action type="setVariable" boolVariable="Superheroes2_DCS3_DidNotHeal" boolValue="true" />
						</ExpressionCase>
						<ExpressionCase value="1">
							<Action type="setVariable" intVariable="Superheroes2_DCS3_VarTracker" intValue="Superheroes2_DCS3_VarTracker+1" />
						</ExpressionCase>
					</Action>
					<Action type="setVariable" intVariable="Superheroes2_DCS4_VarTracker" intValue="Superheroes2_DCS4_VarTracker+1" />
					<Action type="incrementSessionCounter" counter="Superhereos2_FelonFight_LocalBattle" increment="1" />
				</Then>
			</Else>
		</Action>
		<Action type="if">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<If expression="Tutorial_Battle_Active">
				<Then>
					<Action type="setVariable" boolVariable="BattleTutorialComplete" boolValue="true" />
				</Then>
			</If>
		</Action>
	</FullAttackDefendersLost>
	<UpdateInflowTelemetry parallel="true">
		<Action type="if" formatMe="deep">
			<If>
				<Requirement type="reqList" location="Superheroes2_Requirements:ActOne" />
				<Then>
					<Action type="incrementSessionCounter" counter="BrassKnucklesFrom{type}Battles" increment="temp_CurrencyReward" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="reqList" location="Superheroes2_Requirements:ActTwo" />
				<Then>
					<Action type="incrementSessionCounter" counter="SoylentRedFrom{type}Battles" increment="temp_CurrencyReward" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="incrementSessionCounter" counter="CrabJuiceCanFrom{type}Battles" increment="temp_CurrencyReward" />
				</Then>
			</Else>
		</Action>
	</UpdateInflowTelemetry>
	<DefenderOnlyAttack cache="true">
		<Action type="setObjectVariable" variable="attacker_died" value="0" disableEvents="true" />
		<Action type="setObjectVariable" variable="defender_died" value="0" disableEvents="true" />
		<Action type="setObjectVariable" variable="attacker_damage_done" value="0" disableEvents="true" />
		<Action type="setObjectVariable" variable="defender_damage_done" value="0" disableEvents="true" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SaveVisuals">
			<Objects>
				<ObjectVariable index="0" variable="Object::attacker" interpretation="object" land="local" />
				<ObjectVariable index="0" variable="Object::defender" interpretation="object" land="local" />
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DefenderAttack" parseOnDemand="true" />
	</DefenderOnlyAttack>
	<AttackerVisuallyAttack ignoreHUD="true" interruptable="true" cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="greaterThan(Object::attacker_damage_done, 0)" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisplaySingleAttackAnimation_Attacker">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_attacker" />
						</ObjectByUID>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_defender" />
						</ObjectByUID>
					</Objects>
				</Action>
			</True>
		</Action>
	</AttackerVisuallyAttack>
	<CheerAnimation cache="true" ignoreHUD="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetCharacterFacing">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="anim-play" animation="FF_Cheer" autodetectFlip="true" isController="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
			</Objects>
		</Action>
	</CheerAnimation>
	<AttackersCheer cache="true">
		<Action type="parallelIterateObjectVariables" script="Superheroes2_FelonFightScripts:CheerAnimation">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
	</AttackersCheer>
	<DefendersCheer cache="true">
		<Action type="parallelIterateObjectVariables" script="Superheroes2_FelonFightScripts:CheerAnimation">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
	</DefendersCheer>
	<DefenderVisuallyAttack ignoreHUD="true" interruptable="true" cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::defender_died" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncAvatarHealthPostAttack">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_defender" />
						</ObjectByUID>
					</Objects>
				</Action>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisplayDeathAnimation">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_defender" />
						</ObjectByUID>
					</Objects>
				</Action>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:AttackersCheer" />
			</True>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="greaterThan(Object::defender_damage_done, 0)" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisplaySingleAttackAnimation_Defender">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_defender" />
						</ObjectByUID>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_attacker" />
						</ObjectByUID>
					</Objects>
				</Action>
			</True>
		</Action>
	</DefenderVisuallyAttack>
	<AttackerReactToAttack ignoreHUD="true" interruptable="true" cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::attacker_died" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncAvatarHealthPostAttack">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_attacker" />
						</ObjectByUID>
					</Objects>
				</Action>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisplayDeathAnimation">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_attacker" />
						</ObjectByUID>
					</Objects>
				</Action>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DefendersCheer" />
			</True>
		</Action>
	</AttackerReactToAttack>
	<ShowResultsScreen ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_Scripts:CalculateWinLossRatio" />
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::attackers_lost" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EndMatch" />
			</True>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::defenders_lost" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EndMatch" />
			</True>
		</Action>
	</ShowResultsScreen>
	<VisuallyAttack ignoreHUD="true" interruptable="true" cache="true">
		<Action type="runScript" script="Superheroes2_FelonFightScripts:AttackerVisuallyAttack" />
		<Action type="runScript" script="Superheroes2_FelonFightScripts:SyncAvatarHealthPostAttack">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::visual_defender" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="runScript" script="Superheroes2_FelonFightScripts:Tutorial_SwitchNotif" />
		<Action type="runScript" script="Superheroes2_FelonFightScripts:DefenderVisuallyAttack" />
		<Action type="runScript" script="Superheroes2_FelonFightScripts:SyncAvatarHealthPostAttack">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::visual_attacker" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="runScript" script="Superheroes2_FelonFightScripts:AttackerReactToAttack" />
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="SyncAvatarVisibility" />
		<Action type="runScript" script="Superheroes2_FelonFightScripts:ShowResultsScreen" />
	</VisuallyAttack>
	<SyncAvatarVisibility ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncAvatarHealthPostAttack">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable name="game_data" variable="Object::visual_attacker" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncAvatarHealthPostAttack">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable name="game_data" variable="Object::visual_defender" land="local" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::attacker_died" />
			<True>
				<Action type="deletecharacter">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_attacker" />
						</ObjectByUID>
					</Objects>
				</Action>
				<Action type="setObjectVariable" variable="visual_attacker" value="0" disableEvents="true" />
			</True>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::defender_died" />
			<True>
				<Action type="deletecharacter">
					<Objects>
						<ObjectByUID land="current">
							<ObjectVariable index="0" variable="Object::visual_defender" />
						</ObjectByUID>
					</Objects>
				</Action>
				<Action type="setObjectVariable" variable="visual_defender" value="0" disableEvents="true" />
			</True>
		</Action>
	</SyncAvatarVisibility>
	<AllowAttack ignoreHUD="true" cache="true">
		<Action type="setObjectVariable" variable="can_attack" value="1" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
	</AllowAttack>
	<PerformAttack cache="true">
		<Action type="setObjectVariable" variable="can_attack" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:FullAttack" parseOnDemand="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:VisuallyAttack" parseOnDemand="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="and(!Object::attackers_lost, !Object::defenders_lost)" asObjectExpression="true" />
			<True>
				<Action type="runScript" package="Superheroes2_FelonFightScripts" script="MoveAvatarsToPositions" />
				<Action type="runScript" package="Superheroes2_FelonFightScripts" script="SyncAvatarPositions" />
				<Action type="checkRequirements" ignoreObject="false">
					<Objects>
						<ObjectByName name="game_data" land="local" />
					</Objects>
					<Requirement type="formula" formula="Object::attacker_died" />
					<True>
						<Action type="checkRequirements" ignoreObject="false">
							<Requirement type="formula" formula="Object::attackers_lost == 0" asObjectExpression="true" />
							<True>
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ChooseNextAttacker" parseOnDemand="true" />
							</True>
						</Action>
					</True>
					<False>
						<Action type="runScript" package="Superheroes2_FelonFightScripts" script="ConfigureButtonsForPlayerTurn" />
						<Action type="runScript" package="Superheroes2_FelonFightScripts" script="AllowAttack" />
					</False>
				</Action>
			</True>
		</Action>
	</PerformAttack>
	<SwapAttacker ignoreHUD="true" cache="true">
		<Action type="setObjectVariable" asObjectExpression="true" variable="swapped_attacker" value="Object::attacker" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" asObjectExpression="true" variable="attacker" value="Object::data" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:CalculateAdvantages" parseOnDemand="true" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:UpdateLocationsForSwap" parseOnDemand="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DefenderOnlyAttack" parseOnDemand="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ConfigureButtonsForVisuals" />
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="VisuallySwapAttacker" />
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="SyncAttackerAvatarPositions" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:VisuallyAttack" parseOnDemand="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="MoveAvatarsToPositions" />
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="SyncAvatarPositions" />
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::attacker_died" />
			<True>
				<Action type="checkRequirements" ignoreObject="false">
					<Requirement type="formula" formula="Object::attackers_lost == 0" asObjectExpression="true" />
					<True>
						<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ChooseNextAttacker" parseOnDemand="true" />
					</True>
				</Action>
			</True>
			<False>
				<Action type="runScript" package="Superheroes2_FelonFightScripts" script="ConfigureButtonsForPlayerTurn" />
				<Action type="runScript" package="Superheroes2_FelonFightScripts" script="AllowAttack" />
			</False>
		</Action>
	</SwapAttacker>
	<DisableSwapCancelButton cache="true">
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="SwapButtonDisabled">
					<Attribute name="active" value="false" />
				</AttributeSet>
				<AttributeSet name="SwapButtonDisabledBaseGraphic">
					<Attribute name="color" value="0xAAAAAAAA" />
				</AttributeSet>
			</Attribute>
		</Action>
	</DisableSwapCancelButton>
	<DisableSwapButton cache="true">
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="SwapButton">
					<Attribute name="active" value="false" />
				</AttributeSet>
				<AttributeSet name="SwapButtonBaseGraphic">
					<Attribute name="color" value="0xAAAAAAAA" />
				</AttributeSet>
			</Attribute>
		</Action>
	</DisableSwapButton>
	<EnableSwapButton cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<Requirement type="formula" formula="greaterThan(Object::COUNT, 1)" asObjectExpression="true" />
			<True>
				<Action type="updateMenuItem" menu="eMenu_CustomTouch">
					<Attribute name="config">
						<AttributeSet name="SwapButton">
							<Attribute name="active" value="true" />
						</AttributeSet>
						<AttributeSet name="SwapButtonBaseGraphic">
							<Attribute name="color" value="0xFFFFFFFF" />
						</AttributeSet>
					</Attribute>
				</Action>
			</True>
		</Action>
	</EnableSwapButton>
	<EnableSwapCancelButton cache="true">
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="SwapButtonDisabled">
					<Attribute name="active" value="true" />
				</AttributeSet>
				<AttributeSet name="SwapButtonDisabledBaseGraphic">
					<Attribute name="color" value="0xFFFFFFFF" />
				</AttributeSet>
			</Attribute>
		</Action>
	</EnableSwapCancelButton>
	<HideSwapCancelButton cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapCancelButton" />
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="SwapButtonDisabled">
					<Attribute name="visible" value="false" />
				</AttributeSet>
			</Attribute>
		</Action>
	</HideSwapCancelButton>
	<ShowSwapCancelButton cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableSwapCancelButton" />
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="SwapButtonDisabled">
					<Attribute name="visible" value="true" />
				</AttributeSet>
			</Attribute>
		</Action>
	</ShowSwapCancelButton>
	<ShowSwapButton cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableSwapButton" />
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="SwapButton">
					<Attribute name="visible" value="true" />
				</AttributeSet>
			</Attribute>
		</Action>
	</ShowSwapButton>
	<HideSwapButton cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapButton" />
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="SwapButton">
					<Attribute name="visible" value="false" />
				</AttributeSet>
			</Attribute>
		</Action>
	</HideSwapButton>
	<ShowHealButton cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableHealButton" />
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="HealButton">
					<Attribute name="visible" value="true" />
				</AttributeSet>
			</Attribute>
		</Action>
	</ShowHealButton>
	<HideHealButton cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableHealButton" />
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="HealButton">
					<Attribute name="visible" value="false" />
				</AttributeSet>
			</Attribute>
		</Action>
	</HideHealButton>
	<ShowHealButton cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableHealButton" />
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="HealButton">
					<Attribute name="visible" value="true" />
				</AttributeSet>
			</Attribute>
		</Action>
	</ShowHealButton>
	<HideHealCancelButton cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableHealCancelButton" />
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="HealButtonDisabled">
					<Attribute name="visible" value="false" />
				</AttributeSet>
			</Attribute>
		</Action>
	</HideHealCancelButton>
	<ShowHealCancelButton cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableHealCancelButton" />
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="HealButtonDisabled">
					<Attribute name="visible" value="true" />
				</AttributeSet>
			</Attribute>
		</Action>
	</ShowHealCancelButton>
	<DisableHealCancelButton cache="true">
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="HealButtonDisabled">
					<Attribute name="active" value="false" />
				</AttributeSet>
				<AttributeSet name="HealButtonDisabledBaseGraphic">
					<Attribute name="color" value="0xAAAAAAAA" />
				</AttributeSet>
				<AttributeSet name="CounterHealBase">
					<Attribute name="visible" value="false" />
				</AttributeSet>
				<AttributeSet name="CounterHealShadow">
					<Attribute name="visible" value="false" />
				</AttributeSet>
				<AttributeSet name="CounterHealNumber">
					<Attribute name="visible" value="false" />
				</AttributeSet>
			</Attribute>
		</Action>
	</DisableHealCancelButton>
	<EnableHealCancelButton cache="true">
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="HealButtonDisabled">
					<Attribute name="active" value="true" />
				</AttributeSet>
				<AttributeSet name="HealButtonDisabledBaseGraphic">
					<Attribute name="color" value="0xFFFFFFFF" />
				</AttributeSet>
				<AttributeSet name="CounterHealBase">
					<Attribute name="visible" value="false" />
				</AttributeSet>
				<AttributeSet name="CounterHealShadow">
					<Attribute name="visible" value="false" />
				</AttributeSet>
				<AttributeSet name="CounterHealNumber">
					<Attribute name="visible" value="false" />
				</AttributeSet>
			</Attribute>
		</Action>
	</EnableHealCancelButton>
	<EnableHealButton cache="true">
		<Action type="checkRequirements">
			<Requirement type="formula" formula="System::evaluate('Spendable::ScienceWater')" />
			<True>
				<Action type="updateMenuItem" menu="eMenu_CustomTouch">
					<Attribute name="config">
						<AttributeSet name="HealButton">
							<Attribute name="active" value="true" />
						</AttributeSet>
						<AttributeSet name="HealButtonBaseGraphic">
							<Attribute name="color" value="0xFFFFFFFF" />
						</AttributeSet>
						<AttributeSet name="CounterHealBase">
							<Requirement type="variable" variable="Tutorial_Battle_Active" />
							<Attribute name="image" value="BUT_GENR_Round_SM:*" />
							<Attribute name="color" value="0xDB660FFF" />
							<Attribute name="visible" value="true" />
						</AttributeSet>
						<AttributeSet name="CounterHealShadow">
							<Attribute name="visible" value="true" />
						</AttributeSet>
						<AttributeSet name="CounterHealNumber">
							<Attribute name="visible" value="true" />
							<Attribute name="text" formula="System::evaluate('Spendable::ScienceWater')" />
						</AttributeSet>
					</Attribute>
				</Action>
			</True>
			<False>
				<Action type="updateMenuItem" menu="eMenu_CustomTouch">
					<Attribute name="config">
						<AttributeSet name="HealButton">
							<Attribute name="active" value="true" />
						</AttributeSet>
						<AttributeSet name="HealButtonBaseGraphic">
							<Attribute name="color" value="0xFFFFFFFF" />
						</AttributeSet>
						<AttributeSet name="CounterHealBase">
							<Attribute name="image" value="ICO_BattleHUD_Superheroes2_Donut" />
							<Attribute name="color" value="0xFFFFFFFF" />
							<Attribute name="visible" value="true">
								<Requirement type="variable" variable="Tutorial_Battle_Active" not="true" />
							</Attribute>
						</AttributeSet>
						<AttributeSet name="CounterHealShadow">
							<Attribute name="visible" value="false" />
						</AttributeSet>
						<AttributeSet name="CounterHealNumber">
							<Attribute name="visible" value="false" />
						</AttributeSet>
					</Attribute>
				</Action>
			</False>
		</Action>
	</EnableHealButton>
	<DisableHealButton cache="true">
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="HealButton">
					<Attribute name="active" value="false" />
				</AttributeSet>
				<AttributeSet name="HealButtonBaseGraphic">
					<Attribute name="color" value="0xAAAAAAAA" />
				</AttributeSet>
				<AttributeSet name="CounterHealBase">
					<Attribute name="visible" value="false" />
				</AttributeSet>
				<AttributeSet name="CounterHealShadow">
					<Attribute name="visible" value="false" />
				</AttributeSet>
				<AttributeSet name="CounterHealNumber">
					<Attribute name="visible" value="false" />
				</AttributeSet>
			</Attribute>
		</Action>
	</DisableHealButton>
	<DisableAttackButton cache="true">
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="FightButton">
					<Attribute name="active" value="false" />
				</AttributeSet>
				<AttributeSet name="FightButtonBaseGraphic">
					<Attribute name="color" value="0xAAAAAAAA" />
				</AttributeSet>
			</Attribute>
		</Action>
	</DisableAttackButton>
	<EnableAttackButton cache="true">
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="FightButton">
					<Attribute name="active" value="true" />
				</AttributeSet>
				<AttributeSet name="FightButtonBaseGraphic">
					<Attribute name="color" value="0xFFFFFFFF" />
				</AttributeSet>
			</Attribute>
		</Action>
	</EnableAttackButton>
	<DisableExitButton cache="true">
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="ExitButton">
					<Attribute name="active" value="false" />
				</AttributeSet>
				<AttributeSet name="Exitbutton">
					<Attribute name="color" value="0xC3C3C399" />
				</AttributeSet>
			</Attribute>
		</Action>
	</DisableExitButton>
	<EnableExitButton cache="true">
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="ExitButton">
					<Attribute name="active" value="true" />
					<Attribute name="active" value="false">
						<Requirement type="variable" variable="Tutorial_Battle_Active" />
					</Attribute>
				</AttributeSet>
				<AttributeSet name="Exitbutton">
					<Attribute name="color" value="0xC3C3C3FF">
						<Requirement type="variable" variable="Tutorial_Battle_Active" not="true" />
					</Attribute>
				</AttributeSet>
			</Attribute>
		</Action>
	</EnableExitButton>
	<DisableFastForwardButton cache="true">
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="QuickBattleButton">
					<Attribute name="active" value="false" />
				</AttributeSet>
				<AttributeSet name="QuickBattleButtonGraphic">
					<Attribute name="color" value="0xAAAAAAAA" />
				</AttributeSet>
			</Attribute>
		</Action>
	</DisableFastForwardButton>
	<EnableFastForwardButton cache="true">
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="QuickBattleButton">
					<Attribute name="active" value="false" />
					<Attribute name="visible" value="false" />
					<Attribute name="active" value="true">
						<Requirement type="variable" variable="QuickBattleEnabled" />
					</Attribute>
					<Attribute name="visible" value="true">
						<Requirement type="variable" variable="QuickBattleEnabled" />
					</Attribute>
				</AttributeSet>
				<AttributeSet name="QuickBattleButtonGraphic">
					<Attribute name="color" value="0xFFFFFFFF" />
				</AttributeSet>
			</Attribute>
		</Action>
	</EnableFastForwardButton>
	<HideFastForwardButton cache="true">
		<Action type="updateMenuItem" menu="eMenu_CustomTouch">
			<Attribute name="config">
				<AttributeSet name="QuickBattleButton">
					<Attribute name="active" value="false" />
					<Attribute name="visible" value="false" />
				</AttributeSet>
			</Attribute>
		</Action>
	</HideFastForwardButton>
	<InitializeRoundData cache="true">
		<Action type="setObjectVariable" asObjectExpression="true" variable="attacker_switched" value="0" disableEvents="true" />
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="Object::next_attacker" />
			<True>
				<Action type="setObjectVariable" asObjectExpression="true" variable="attacker_switched" value="1" disableEvents="true" />
			</True>
		</Action>
		<Action type="setObjectVariable" asObjectExpression="true" variable="damage_done" value="0" disableEvents="true" />
		<Action type="setObjectVariable" asObjectExpression="true" variable="damage_returned" value="0" disableEvents="true" />
		<Action type="setObjectVariable" asObjectExpression="true" variable="defender_died" value="0" disableEvents="true" />
		<Action type="setObjectVariable" asObjectExpression="true" variable="attacker_died" value="0" disableEvents="true" />
		<Action type="setObjectVariable" asObjectExpression="true" variable="next_defender" value="0" disableEvents="true" />
		<Action type="setObjectVariable" asObjectExpression="true" variable="next_attacker" value="0" disableEvents="true" />
		<Action type="setObjectVariable" asObjectExpression="true" variable="match_over" value="0" disableEvents="true" />
	</InitializeRoundData>
	<DeleteCharacter cache="true">
		<Action type="deletecharacter">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::character" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="deletecharacter">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable index="0" variable="Object::actual_character" />
				</ObjectByUID>
			</Objects>
		</Action>
	</DeleteCharacter>
	<SelectFighterAfterDeathCallbackNoVisuals cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetAttacker">
			<Objects>
				<ObjectByUID land="local">
					<ObjectVariable index="0" variable="Object::data" />
				</ObjectByUID>
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="visual_attacker" value="Object::UID" asObjectExpression="true" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="attacker_died" value="0" disableEvents="true">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="position" value="Roster1_Primary" disableEvents="true" />
	</SelectFighterAfterDeathCallbackNoVisuals>
	<SelectFighterAfterDeathCallback cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SelectFighterAfterDeathCallbackNoVisuals" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ConfigureButtonsForVisuals" />
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="MoveAvatarsToPositions" />
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="SyncAvatarPositions" />
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="ConfigureButtonsForPlayerTurn" />
		<Action type="runScript" package="Superheroes2_FelonFightScripts" script="AllowAttack" />
	</SelectFighterAfterDeathCallback>
	<SyncAvatarHealthPostAttack ignoreHUD="true" cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Requirement type="formula" formula="Object::data" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:UpdateAvatarHealth">
					<Objects>
						<CopyObject index="0" />
						<ObjectByUID land="local">
							<ObjectVariable index="0" variable="Object::data" />
						</ObjectByUID>
					</Objects>
				</Action>
			</True>
			<False>
				<Action type="setObjectVariable" variable="health" value="0">
					<Objects>
						<CopyObject index="0" />
					</Objects>
				</Action>
			</False>
		</Action>
	</SyncAvatarHealthPostAttack>
	<DisplaySingleAttackAnimation_Attacker cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetCharacterFacing">
			<Objects>
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="setSortAfterObject" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:FighterAttackSound" formatMe="deep">
			<FormatToken key="skin" value="{Object::SkinID}" />
		</Action>
		<Action type="anim-play" animation="FF_Attack" autodetectFlip="true" isController="true">
			<Objects>
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="setSortAfterObject">
			<Objects>
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="PowEffect" value="rand(5) + 1" asExpression="true">
			<Objects>
				<CopyObject index="1" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetCharacterFacing">
			<Objects>
				<CopyObject index="1" />
			</Objects>
		</Action>
		<Action type="sound" sound="Felon_Gets_Hit" />
		<Action type="anim-play" animation="FF_Hit" autodetectFlip="true" isController="true">
			<Objects>
				<CopyObject index="1" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="PowEffect" value="0">
			<Objects>
				<CopyObject index="1" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncAvatarHealthPostAttack">
			<Objects>
				<CopyObject index="1" />
			</Objects>
		</Action>
	</DisplaySingleAttackAnimation_Attacker>
	<DisplaySingleAttackAnimation_Defender cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetCharacterFacing">
			<Objects>
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="setSortAfterObject" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:FighterAttackSound" formatMe="deep">
			<FormatToken key="skin" value="{Object::SkinID}" />
		</Action>
		<Action type="anim-play" animation="FF_Attack" autodetectFlip="true" isController="true">
			<Objects>
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="setSortAfterObject">
			<Objects>
				<CopyObject index="0" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="PowEffect" value="rand(5) + 1" asExpression="true">
			<Objects>
				<CopyObject index="1" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetCharacterFacing">
			<Objects>
				<CopyObject index="1" />
			</Objects>
		</Action>
		<Action type="sound" sound="Fighter_Gets_Hit" />
		<Action type="anim-play" animation="FF_Hit" autodetectFlip="true" isController="true">
			<Objects>
				<CopyObject index="1" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="PowEffect" value="0">
			<Objects>
				<CopyObject index="1" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SyncAvatarHealthPostAttack">
			<Objects>
				<CopyObject index="1" />
			</Objects>
		</Action>
	</DisplaySingleAttackAnimation_Defender>
	<FighterAttackSound>
		<Action type="sound" sound="{skin}_Attack" formatMe="true" ignoreObject="true" />
	</FighterAttackSound>
	<DisplayDeathAnimation cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SetCharacterFacing" />
		<Action type="if">
			<If expression="and(greaterThan(Object::SkinID, 153120), mod(Object::SkinID, 2)==0)" asObjectExpression="true">
				<Then>
					<Action type="sound" sound="Male_Felon_Knocked_Out" />
				</Then>
			</If>
			<ElseIf expression="greaterThan(Object::SkinID, 153120)" asObjectExpression="true">
				<Then>
					<Action type="sound" sound="Female_Felon_Knocked_Out" />
				</Then>
			</ElseIf>
		</Action>
		<Action type="anim-play" animation="FF_Fail" autodetectFlip="true" isController="true" nowait="true" />
		<Action type="delay" time="0.9" />
		<Action type="fade" fade="out" />
	</DisplayDeathAnimation>
	<AddFighter cache="true">
		<Action type="pushBackObjectVariable" formula="Object::UID" disableEvents="true">
			<Objects>
				<ObjectByName name="Full_Roster1" land="local" />
				<CopyObject index="0" />
			</Objects>
		</Action>
	</AddFighter>
	<AddFighterToRoster cache="true">
		<Action type="pushBackObjectVariable" formula="Object::UID" disableEvents="true">
			<Objects>
				<ObjectByName name="roster1" land="local" />
				<CopyObject index="0" />
			</Objects>
		</Action>
	</AddFighterToRoster>
	<RemoveFighter cache="true">
		<Action type="removeObjectVariablesByValue" value="Object::UID">
			<Objects>
				<ObjectByName name="Full_Roster1" land="local" />
				<CopyObject index="0" />
			</Objects>
		</Action>
	</RemoveFighter>
	<CopySocialFighters>
		<Action type="deleteAllObjectVariables">
			<Objects>
				<ObjectByName name="LocalSocialObject1" land="local" />
			</Objects>
		</Action>
		<Action type="deleteAllObjectVariables">
			<Objects>
				<ObjectByName name="LocalSocialObject2" land="local" />
			</Objects>
		</Action>
		<Action type="deleteAllObjectVariables">
			<Objects>
				<ObjectByName name="LocalSocialObject3" land="local" />
			</Objects>
		</Action>
		<Action type="copyObjectVariables">
			<Objects>
				<ObjectByName name="TopFighterObject1" land="current" />
				<ObjectByName name="LocalSocialObject1" land="local" />
			</Objects>
		</Action>
		<Action type="copyObjectVariables">
			<Objects>
				<ObjectByName name="TopFighterObject2" land="current" />
				<ObjectByName name="LocalSocialObject2" land="local" />
			</Objects>
		</Action>
		<Action type="copyObjectVariables">
			<Objects>
				<ObjectByName name="TopFighterObject3" land="current" />
				<ObjectByName name="LocalSocialObject3" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="health" value="Object::max_health" asObjectExpression="true" disableEvents="true">
			<Objects>
				<ObjectByName name="LocalSocialObject1" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="health" value="Object::max_health" asObjectExpression="true" disableEvents="true">
			<Objects>
				<ObjectByName name="LocalSocialObject2" land="local" />
			</Objects>
		</Action>
		<Action type="setObjectVariable" variable="health" value="Object::max_health" asObjectExpression="true" disableEvents="true">
			<Objects>
				<ObjectByName name="LocalSocialObject3" land="local" />
			</Objects>
		</Action>
	</CopySocialFighters>
	<LoadSocialFighters>
		<Action type="deleteAllObjectVariables">
			<Objects>
				<ObjectByName name="Full_Roster2" land="local" />
			</Objects>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="LocalSocialObject3" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::max_health" asObjectExpression="true" />
			<True>
				<Action type="pushBackObjectVariable" formula="Object::UID">
					<Objects>
						<ObjectByName name="Full_Roster2" land="local" />
						<ObjectByName name="LocalSocialObject3" land="local" />
					</Objects>
				</Action>
			</True>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="LocalSocialObject2" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::max_health" asObjectExpression="true" />
			<True>
				<Action type="pushBackObjectVariable" formula="Object::UID">
					<Objects>
						<ObjectByName name="Full_Roster2" land="local" />
						<ObjectByName name="LocalSocialObject2" land="local" />
					</Objects>
				</Action>
			</True>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="LocalSocialObject1" land="local" />
			</Objects>
			<Requirement type="formula" formula="Object::max_health" asObjectExpression="true" />
			<True>
				<Action type="pushBackObjectVariable" formula="Object::UID">
					<Objects>
						<ObjectByName name="Full_Roster2" land="local" />
						<ObjectByName name="LocalSocialObject1" land="local" />
					</Objects>
				</Action>
			</True>
		</Action>
	</LoadSocialFighters>
	<CalculateBestFighters parallel="true">
		<Action type="deleteAllObjectVariables" disableEvents="true">
			<Objects>
				<ObjectByName name="TopFighterObject1" land="local" />
			</Objects>
		</Action>
		<Action type="deleteAllObjectVariables" disableEvents="true">
			<Objects>
				<ObjectByName name="TopFighterObject2" land="local" />
			</Objects>
		</Action>
		<Action type="deleteAllObjectVariables" disableEvents="true">
			<Objects>
				<ObjectByName name="TopFighterObject3" land="local" />
			</Objects>
		</Action>
		<Action type="deleteAllObjectVariables" disableEvents="true">
			<Objects>
				<ObjectByName name="LocalSocialObject1" land="local" />
			</Objects>
		</Action>
		<Action type="setVariable" intVariable="FF_ActiveFighterCount" intValue="0" disableEvents="true" />
		<Action type="runScriptOnAttributes" attributePath="Superheroes2_FightConfig:PotentialRosterConfig" attributeSet="roster">
			<Filtered>
				<Filter>
					<AttributeTrue name="available" />
				</Filter>
				<RunScript script="Superheroes2_FelonFightScripts:AddTopFighterByName">
					<AttributeValue name="adhocObject" />
				</RunScript>
			</Filtered>
		</Action>
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:SortTopFighters" parseOnDemand="true" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:CopyTopFighters" parseOnDemand="true" />
		<Action type="updateVariable" variable="TeamRating" value="System::evaluate('LocalLand::AdHoc::TopFighterObject1::Object::max_health') + System::evaluate('LocalLand::AdHoc::TopFighterObject2::Object::max_health') + System::evaluate('LocalLand::AdHoc::TopFighterObject3::Object::max_health')" />
	</CalculateBestFighters>
	<AddTopFighterByName cache="true">
		<Action type="setVariable" intVariable="FF_ActiveFighterCount" intValue="FF_ActiveFighterCount+1" disableEvents="true" />
		<Action type="pushBackObjectVariable" formula="Object::UID" disableEvents="true">
			<Objects>
				<ObjectByName name="LocalSocialObject1" land="local" />
				<ObjectByName land="local">
					<CopyObject index="0" />
				</ObjectByName>
			</Objects>
		</Action>
	</AddTopFighterByName>
	<SortTopFighters cache="true">
		<Action type="sortObjectVariables" disableEvents="true">
			<SortFormula formula="-Object::max_health" land="local" />
			<Objects>
				<ObjectByName name="LocalSocialObject1" land="local" />
			</Objects>
		</Action>
	</SortTopFighters>
	<CopyTopFighters cache="true">
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="LocalSocialObject1" land="local" />
			</Objects>
			<Requirement type="formula" formula="greaterThan(Object::COUNT,0)" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:CopyActualTopFighter" parseOnDemand="true">
					<FormatToken key="index" value="0" />
					<FormatToken key="object" value="1" />
				</Action>
			</True>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="LocalSocialObject1" land="local" />
			</Objects>
			<Requirement type="formula" formula="greaterThan(Object::COUNT,1)" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:CopyActualTopFighter" parseOnDemand="true">
					<FormatToken key="index" value="1" />
					<FormatToken key="object" value="2" />
				</Action>
			</True>
		</Action>
		<Action type="checkRequirements" ignoreObject="false">
			<Objects>
				<ObjectByName name="LocalSocialObject1" land="local" />
			</Objects>
			<Requirement type="formula" formula="greaterThan(Object::COUNT,2)" asObjectExpression="true" />
			<True>
				<Action type="actionSequence" script="Superheroes2_FelonFightScripts:CopyActualTopFighter" parseOnDemand="true">
					<FormatToken key="index" value="2" />
					<FormatToken key="object" value="3" />
				</Action>
			</True>
		</Action>
		<Action type="deleteAllObjectVariables" disableEvents="true">
			<Objects>
				<ObjectByName name="LocalSocialObject1" land="local" />
			</Objects>
		</Action>
	</CopyTopFighters>
	<CopyActualTopFighter cache="true">
		<Action type="copyObjectVariables" formatMe="deep" disableEvents="true">
			<Objects>
				<ObjectByUID land="current">
					<ObjectVariable variable="Object::{index}" land="local">
						<ObjectByName name="LocalSocialObject1" land="local" />
					</ObjectVariable>
				</ObjectByUID>
				<ObjectByName name="TopFighterObject{object}" land="local" />
			</Objects>
		</Action>
	</CopyActualTopFighter>
	<Tutorial_RoundBegun ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:Tutorial_UpdateStates" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:Tutorial_RunNotifications" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:Tutorial_ConfigureButtons" />
	</Tutorial_RoundBegun>
	<Tutorial_UpdateStates ignoreHUD="true" cache="true">
		<Action type="if">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<If expression="Object::tutorial_state==0" asObjectExpression="true">
				<Then>
					<Action type="if">
						<Objects>
							<ObjectByName name="roster2" land="local" />
						</Objects>
						<If expression="Object::COUNT==2" asObjectExpression="true">
							<Then>
								<Action type="setObjectVariable" variable="tutorial_state" value="1" disableEvents="true">
									<Objects>
										<ObjectByName name="game_data" land="local" />
									</Objects>
								</Action>
								<Action type="setObjectVariable" variable="tutorial_run_notifications" value="1" disableEvents="true">
									<Objects>
										<ObjectByName name="game_data" land="local" />
									</Objects>
								</Action>
							</Then>
						</If>
					</Action>
				</Then>
			</If>
			<ElseIf expression="Object::tutorial_state==1" asObjectExpression="true">
				<Then>
					<Action type="if">
						<Objects>
							<ObjectByName name="game_data" land="local" />
						</Objects>
						<If expression="System::evaluate('AdHoc::game_data::Object::attacker') == System::evaluate('AdHoc::Obj_FalloutBoy::Object::UID')">
							<Then>
								<Action type="setObjectVariable" variable="tutorial_state" value="2" disableEvents="true">
									<Objects>
										<ObjectByName name="game_data" land="local" />
									</Objects>
								</Action>
								<Action type="setObjectVariable" variable="tutorial_run_notifications" value="1" disableEvents="true">
									<Objects>
										<ObjectByName name="game_data" land="local" />
									</Objects>
								</Action>
							</Then>
						</If>
					</Action>
				</Then>
			</ElseIf>
			<ElseIf expression="Object::tutorial_state==2" asObjectExpression="true">
				<Then>
					<Action type="if">
						<Objects>
							<ObjectByName name="roster2" land="local" />
						</Objects>
						<If expression="Object::COUNT==1" asObjectExpression="true">
							<Then>
								<Action type="setObjectVariable" variable="tutorial_state" value="3" disableEvents="true">
									<Objects>
										<ObjectByName name="game_data" land="local" />
									</Objects>
								</Action>
								<Action type="setObjectVariable" variable="tutorial_run_notifications" value="1" disableEvents="true">
									<Objects>
										<ObjectByName name="game_data" land="local" />
									</Objects>
								</Action>
							</Then>
						</If>
					</Action>
				</Then>
			</ElseIf>
			<ElseIf expression="Object::tutorial_state==3" asObjectExpression="true">
				<Then>
					<Action type="if">
						<Objects>
							<ObjectByName name="Obj_FalloutBoy" land="local" />
						</Objects>
						<If expression="Object::max_health==Object::health" asObjectExpression="true">
							<Then>
								<Action type="setObjectVariable" variable="tutorial_state" value="4" disableEvents="true">
									<Objects>
										<ObjectByName name="game_data" land="local" />
									</Objects>
								</Action>
								<Action type="setObjectVariable" variable="tutorial_run_notifications" value="1" disableEvents="true">
									<Objects>
										<ObjectByName name="game_data" land="local" />
									</Objects>
								</Action>
							</Then>
						</If>
					</Action>
				</Then>
			</ElseIf>
		</Action>
	</Tutorial_UpdateStates>
	<Tutorial_RunNotifications ignoreHUD="true" cache="true">
		<Action type="if">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<If expression="Object::tutorial_run_notifications">
				<Then>
					<Action type="if">
						<Objects>
							<ObjectByName name="game_data" land="local" />
						</Objects>
						<If expression="Object::tutorial_state==0" asObjectExpression="true">
							<Then>
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableAllButtons" />
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableCharacterOverlays" />
								<Action type="interruptScript">
									<Interrupt package="Superheroes2_FelonFightScripts" script="ExitButtonPressed">
										<InCategory category="any" />
									</Interrupt>
								</Action>
								<Action type="notification" title="UI_Superheroes2_Battle_Tutorial_Notif1_title" text="UI_Superheroes2_Battle_Tutorial_Notif1_body" icon="ICO_BattleHUD_Superheroes2_Attack" button="UI_OK" />
								<Action type="notification" title="UI_Superheroes2_Battle_Tutorial_Notif2_title" text="UI_Superheroes2_Battle_Tutorial_Notif2_body" icon="ICO_BattleHUD_Superheroes2_Attack" button="UI_OK" />
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableCharacterOverlays" />
								<Action type="setObjectVariable" variable="tutorial_run_notifications" value="0" disableEvents="true">
									<Objects>
										<ObjectByName name="game_data" land="local" />
									</Objects>
								</Action>
							</Then>
						</If>
						<ElseIf expression="Object::tutorial_state==1" asObjectExpression="true">
							<Then>
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableAllButtons" />
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableCharacterOverlays" />
								<Action type="interruptScript">
									<Interrupt package="Superheroes2_FelonFightScripts" script="ExitButtonPressed">
										<InCategory category="any" />
									</Interrupt>
								</Action>
								<Action type="notification" title="UI_Superheroes2_Battle_Tutorial_Notif3_title" text="UI_Superheroes2_Battle_Tutorial_Notif3_body" icon="ICO_BattleHUD_Superheroes2_TutorialFighterTypes" button="UI_OK" />
								<Action type="notification" title="UI_Superheroes2_Battle_Tutorial_Notif4_title" text="UI_Superheroes2_Battle_Tutorial_Notif4_body" icon="ICO_BattleHUD_Superheroes2_TutorialTechUp" button="UI_OK" />
								<Action type="notification" title="UI_Superheroes2_Battle_Tutorial_Notif5_title" text="UI_Superheroes2_Battle_Tutorial_Notif5_body" icon="ICO_BattleHUD_Superheroes2_TutorialFighterTypes" button="UI_OK" />
								<Action type="notification" title="UI_Superheroes2_Battle_Tutorial_Notif6_title" text="UI_Superheroes2_Battle_Tutorial_Notif6_body" icon="ICO_BattleHUD_Superheroes2_SwitchCharacter" button="UI_OK" />
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableCharacterOverlays" />
							</Then>
						</ElseIf>
						<ElseIf expression="Object::tutorial_state==2" asObjectExpression="true">
							<Then>
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableAllButtons" />
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableCharacterOverlays" />
								<Action type="interruptScript">
									<Interrupt package="Superheroes2_FelonFightScripts" script="ExitButtonPressed">
										<InCategory category="any" />
									</Interrupt>
								</Action>
								<Action type="notification" title="UI_Superheroes2_Battle_Tutorial_Notif10_title" text="UI_Superheroes2_Battle_Tutorial_Notif10_body" icon="ICO_BattleHUD_Superheroes2_TutorialFighterTypes" button="UI_OK" />
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableCharacterOverlays" />
								<Action type="setObjectVariable" variable="tutorial_run_notifications" value="0" disableEvents="true">
									<Objects>
										<ObjectByName name="game_data" land="local" />
									</Objects>
								</Action>
							</Then>
						</ElseIf>
						<ElseIf expression="Object::tutorial_state==3" asObjectExpression="true">
							<Then>
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableAllButtons" />
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableCharacterOverlays" />
								<Action type="interruptScript">
									<Interrupt package="Superheroes2_FelonFightScripts" script="ExitButtonPressed">
										<InCategory category="any" />
									</Interrupt>
								</Action>
								<Action type="notification" title="UI_Superheroes2_Battle_Tutorial_Notif8_title" text="UI_Superheroes2_Battle_Tutorial_Notif8_body" icon="ICO_BattleHUD_Superheroes2_Heal" button="UI_OK" />
								<Action type="notification" title="UI_Superheroes2_Battle_Tutorial_Notif9_title" text="UI_Superheroes2_Battle_Tutorial_Notif9_body" icon="ICO_BattleHUD_Superheroes2_Heal" button="UI_OK" />
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableCharacterOverlays" />
								<Action type="setObjectVariable" variable="tutorial_run_notifications" value="0" disableEvents="true">
									<Objects>
										<ObjectByName name="game_data" land="local" />
									</Objects>
								</Action>
							</Then>
						</ElseIf>
						<ElseIf expression="Object::tutorial_state==4" asObjectExpression="true">
							<Then>
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableAllButtons" />
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableCharacterOverlays" />
								<Action type="interruptScript">
									<Interrupt package="Superheroes2_FelonFightScripts" script="ExitButtonPressed">
										<InCategory category="any" />
									</Interrupt>
								</Action>
								<Action type="notification" title="UI_Superheroes2_Battle_Tutorial_Notif11_title" text="UI_Superheroes2_Battle_Tutorial_Notif11_body" icon="ICO_BattleHUD_Superheroes2_Attack" button="UI_OK" />
								<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableCharacterOverlays" />
								<Action type="setObjectVariable" variable="tutorial_run_notifications" value="0" disableEvents="true">
									<Objects>
										<ObjectByName name="game_data" land="local" />
									</Objects>
								</Action>
							</Then>
						</ElseIf>
					</Action>
				</Then>
			</If>
		</Action>
	</Tutorial_RunNotifications>
	<DisableCharacterOverlays parallel="true" cache="true">
		<Action type="updateVariable" variable="InBattle" value="0" />
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:RefreshOverlays">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:RefreshOverlays">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
	</DisableCharacterOverlays>
	<EnableCharacterOverlays parallel="true">
		<Action type="updateVariable" variable="InBattle" value="1" />
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:RefreshOverlays">
			<Objects>
				<ObjectByName name="roster1" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
		<Action type="iterateObjectVariables" script="Superheroes2_FelonFightScripts:RefreshOverlays">
			<Objects>
				<ObjectByName name="roster2" land="local" />
			</Objects>
			<ScriptObjects>
				<ObjectByUID land="local">
					<CopyObject index="0" />
				</ObjectByUID>
			</ScriptObjects>
		</Action>
	</EnableCharacterOverlays>
	<Tutorial_SwitchNotif ignoreHUD="true">
		<Action type="if">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<If expression="and(Object::tutorial_state==1,Object::tutorial_run_notifications)" asObjectExpression="true">
				<Then>
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableCharacterOverlays" />
					<Action type="interruptScript">
						<Interrupt package="Superheroes2_FelonFightScripts" script="ExitButtonPressed">
							<InCategory category="any" />
						</Interrupt>
					</Action>
					<Action type="notification" title="UI_Superheroes2_Battle_Tutorial_Notif7_title" text="UI_Superheroes2_Battle_Tutorial_Notif7_body" icon="ICO_BattleHUD_Superheroes2_SwitchCharacter" button="UI_OK" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableCharacterOverlays" />
					<Action type="setObjectVariable" variable="tutorial_run_notifications" value="0" disableEvents="true">
						<Objects>
							<ObjectByName name="game_data" land="local" />
						</Objects>
					</Action>
				</Then>
			</If>
		</Action>
	</Tutorial_SwitchNotif>
	<Tutorial_ConfigureButtons ignoreHUD="true" cache="true">
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideSwapCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowSwapButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:HideHealCancelButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:ShowHealButton" />
		<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableExitButton" />
		<Action type="if">
			<Objects>
				<ObjectByName name="game_data" land="local" />
			</Objects>
			<If expression="Object::tutorial_state==0" asObjectExpression="true">
				<Then>
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableAttackButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableHealButton" />
				</Then>
			</If>
			<ElseIf expression="Object::tutorial_state==1" asObjectExpression="true">
				<Then>
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableAttackButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableFastForwardButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableSwapButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableHealButton" />
				</Then>
			</ElseIf>
			<ElseIf expression="Object::tutorial_state==2" asObjectExpression="true">
				<Then>
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableAttackButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableHealButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableFastForwardButton" />
				</Then>
			</ElseIf>
			<ElseIf expression="Object::tutorial_state==3" asObjectExpression="true">
				<Then>
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableAttackButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableHealButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableFastForwardButton" />
				</Then>
			</ElseIf>
			<ElseIf expression="Object::tutorial_state==4" asObjectExpression="true">
				<Then>
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:EnableAttackButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableSwapButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableHealButton" />
					<Action type="actionSequence" script="Superheroes2_FelonFightScripts:DisableFastForwardButton" />
				</Then>
			</ElseIf>
		</Action>
	</Tutorial_ConfigureButtons>
</ScriptPackage>