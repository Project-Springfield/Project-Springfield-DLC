<ScriptPackage>
	<RigellianSpaceship_Placed parallel="true">
		<Action type="setObjectVariable" variable="Neutral" value="1" />
		<Action type="setObjectVariable" variable="Kang" value="0" />
		<Action type="setObjectVariable" variable="Kodos" value="0" />
		<Action type="setVariable" intVariable="XMAS2017_NumCharactersAtBossFight" intValue="0" />
		<Action type="setVariable" intVariable="XMAS2017_NumSlotsUsedAtBossFight" intValue="0" />
	</RigellianSpaceship_Placed>
	<MysteryBox_Act1_Won_FreeLandBlock>
		<Action type="setVariable" intVariable="XMAS2017_Act1_FreeLandBlock_From_Box" intValue="XMAS2017_Act1_FreeLandBlock_From_Box+1" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act1_CheckLoop" />
	</MysteryBox_Act1_Won_FreeLandBlock>
	<MysteryBox_Act1_Won_IceRoadStraight>
		<Action type="setVariable" intVariable="XMAS2017_Act1_IceRoadStraight_From_Box" intValue="XMAS2017_Act1_IceRoadStraight_From_Box+1" asExpression="true" />
		<Action type="setVariable" intVariable="XMAS2017_IceRoadRewardCount" intValue="XMAS2017_IceRoadRewardCount+5" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act1_CheckLoop" />
	</MysteryBox_Act1_Won_IceRoadStraight>
	<MysteryBox_Act1_Won_IceRoadStraight2>
		<Action type="setVariable" intVariable="XMAS2017_Act1_IceRoadStraight_From_Box2" intValue="XMAS2017_Act1_IceRoadStraight_From_Box2+1" asExpression="true" />
		<Action type="setVariable" intVariable="XMAS2017_IceRoadRewardCount" intValue="XMAS2017_IceRoadRewardCount+5" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act1_CheckLoop" />
	</MysteryBox_Act1_Won_IceRoadStraight2>
	<MysteryBox_Act1_Won_IceRoadStraight3>
		<Action type="setVariable" intVariable="XMAS2017_Act1_IceRoadStraight_From_Box3" intValue="XMAS2017_Act1_IceRoadStraight_From_Box3+1" asExpression="true" />
		<Action type="setVariable" intVariable="XMAS2017_IceRoadRewardCount" intValue="XMAS2017_IceRoadRewardCount+5" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act1_CheckLoop" />
	</MysteryBox_Act1_Won_IceRoadStraight3>
	<MysteryBox_Act1_Won_IceRoadStraight4>
		<Action type="setVariable" intVariable="XMAS2017_Act1_IceRoadStraight_From_Box4" intValue="XMAS2017_Act1_IceRoadStraight_From_Box4+1" asExpression="true" />
		<Action type="setVariable" intVariable="XMAS2017_IceRoadRewardCount" intValue="XMAS2017_IceRoadRewardCount+5" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act1_CheckLoop" />
	</MysteryBox_Act1_Won_IceRoadStraight4>
	<MysteryBox_Act1_Won_LargeSnowyChristmasHill>
		<Action type="setVariable" intVariable="XMAS2017_Act1_LargeSnowyChristmasHill_From_Box" intValue="XMAS2017_Act1_LargeSnowyChristmasHill_From_Box+1" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act1_CheckLoop" />
	</MysteryBox_Act1_Won_LargeSnowyChristmasHill>
	<MysteryBox_Act1_Won_SmallSnowyChristmasHill>
		<Action type="setVariable" intVariable="XMAS2017_Act1_SmallSnowyChristmasHill_From_Box" intValue="XMAS2017_Act1_SmallSnowyChristmasHill_From_Box+1" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act1_CheckLoop" />
	</MysteryBox_Act1_Won_SmallSnowyChristmasHill>
	<MysteryBox_Act1_CheckLoop>
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="formula" formula="XMAS2017_Act1_FreeLandBlock_From_Box == XMAS2017_Act1_MysteryBox_LoopCount+1" />
				<Requirement type="formula" formula="XMAS2017_Act1_IceRoadStraight_From_Box == (XMAS2017_Act1_MysteryBox_LoopCount+1)" />
				<Requirement type="formula" formula="XMAS2017_Act1_IceRoadStraight_From_Box2 == (XMAS2017_Act1_MysteryBox_LoopCount+1)" />
				<Requirement type="formula" formula="XMAS2017_Act1_IceRoadStraight_From_Box3 == (XMAS2017_Act1_MysteryBox_LoopCount+1)" />
				<Requirement type="formula" formula="XMAS2017_Act1_IceRoadStraight_From_Box4 == (XMAS2017_Act1_MysteryBox_LoopCount+1)" />
				<Requirement type="formula" formula="XMAS2017_Act1_LargeSnowyChristmasHill_From_Box == XMAS2017_Act1_MysteryBox_LoopCount+1" />
				<Requirement type="formula" formula="XMAS2017_Act1_SmallSnowyChristmasHill_From_Box == XMAS2017_Act1_MysteryBox_LoopCount+1" />
			</Requirements>
			<True>
				<Action type="setVariable" intVariable="XMAS2017_Act1_MysteryBox_LoopCount" intValue="XMAS2017_Act1_MysteryBox_LoopCount+1" asExpression="true" />
			</True>
		</Action>
	</MysteryBox_Act1_CheckLoop>
	<MysteryBox_Act2_Won_FreeLandBlock>
		<Action type="setVariable" intVariable="XMAS2017_Act2_FreeLandBlock_From_Box" intValue="XMAS2017_Act2_FreeLandBlock_From_Box+1" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act2_CheckLoop" />
	</MysteryBox_Act2_Won_FreeLandBlock>
	<MysteryBox_Act2_Won_IceRoadStraight>
		<Action type="setVariable" intVariable="XMAS2017_Act2_IceRoadStraight_From_Box" intValue="XMAS2017_Act2_IceRoadStraight_From_Box+1" asExpression="true" />
		<Action type="setVariable" intVariable="XMAS2017_IceRoadRewardCount" intValue="XMAS2017_IceRoadRewardCount+5" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act2_CheckLoop" />
	</MysteryBox_Act2_Won_IceRoadStraight>
	<MysteryBox_Act2_Won_IceRoadStraight2>
		<Action type="setVariable" intVariable="XMAS2017_Act2_IceRoadStraight_From_Box2" intValue="XMAS2017_Act2_IceRoadStraight_From_Box2+1" asExpression="true" />
		<Action type="setVariable" intVariable="XMAS2017_IceRoadRewardCount" intValue="XMAS2017_IceRoadRewardCount+5" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act2_CheckLoop" />
	</MysteryBox_Act2_Won_IceRoadStraight2>
	<MysteryBox_Act2_Won_IceRoadStraight3>
		<Action type="setVariable" intVariable="XMAS2017_Act2_IceRoadStraight_From_Box3" intValue="XMAS2017_Act2_IceRoadStraight_From_Box3+1" asExpression="true" />
		<Action type="setVariable" intVariable="XMAS2017_IceRoadRewardCount" intValue="XMAS2017_IceRoadRewardCount+5" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act2_CheckLoop" />
	</MysteryBox_Act2_Won_IceRoadStraight3>
	<MysteryBox_Act2_Won_IceRoadStraight4>
		<Action type="setVariable" intVariable="XMAS2017_Act2_IceRoadStraight_From_Box4" intValue="XMAS2017_Act2_IceRoadStraight_From_Box4+1" asExpression="true" />
		<Action type="setVariable" intVariable="XMAS2017_IceRoadRewardCount" intValue="XMAS2017_IceRoadRewardCount+5" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act2_CheckLoop" />
	</MysteryBox_Act2_Won_IceRoadStraight4>
	<MysteryBox_Act2_Won_NorthPoleElfCabins>
		<Action type="setVariable" intVariable="XMAS2017_Act2_NorthPoleElfCabins_From_Box" intValue="XMAS2017_Act2_NorthPoleElfCabins_From_Box+1" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act2_CheckLoop" />
	</MysteryBox_Act2_Won_NorthPoleElfCabins>
	<MysteryBox_Act2_Won_NorthPoleReindeerStables>
		<Action type="setVariable" intVariable="XMAS2017_Act2_NorthPoleReindeerStables_From_Box" intValue="XMAS2017_Act2_NorthPoleReindeerStables_From_Box+1" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:MysteryBox_Act2_CheckLoop" />
	</MysteryBox_Act2_Won_NorthPoleReindeerStables>
	<MysteryBox_Act2_CheckLoop>
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="formula" formula="XMAS2017_Act2_FreeLandBlock_From_Box == XMAS2017_Act2_MysteryBox_LoopCount+1" />
				<Requirement type="formula" formula="XMAS2017_Act2_IceRoadStraight_From_Box == (XMAS2017_Act2_MysteryBox_LoopCount+1)" />
				<Requirement type="formula" formula="XMAS2017_Act2_IceRoadStraight_From_Box2 == (XMAS2017_Act2_MysteryBox_LoopCount+1)" />
				<Requirement type="formula" formula="XMAS2017_Act2_IceRoadStraight_From_Box3 == (XMAS2017_Act2_MysteryBox_LoopCount+1)" />
				<Requirement type="formula" formula="XMAS2017_Act2_IceRoadStraight_From_Box4 == (XMAS2017_Act2_MysteryBox_LoopCount+1)" />
				<Requirement type="formula" formula="XMAS2017_Act2_NorthPoleElfCabins_From_Box == XMAS2017_Act2_MysteryBox_LoopCount+1" />
				<Requirement type="formula" formula="XMAS2017_Act2_NorthPoleReindeerStables_From_Box == XMAS2017_Act2_MysteryBox_LoopCount+1" />
			</Requirements>
			<True>
				<Action type="setVariable" intVariable="XMAS2017_Act2_MysteryBox_LoopCount" intValue="XMAS2017_Act2_MysteryBox_LoopCount+1" asExpression="true" />
			</True>
		</Action>
	</MysteryBox_Act2_CheckLoop>
	<FightAliens_1_JobList>
		<Action type="gotoState" state="GameState_JobList" extras="XMAS2017_QuestConfig:FightAliens_1_JobList" />
	</FightAliens_1_JobList>
	<FightAliens_2_JobList>
		<Action type="gotoState" state="GameState_JobList" extras="XMAS2017_QuestConfig:FightAliens_2_JobList" />
	</FightAliens_2_JobList>
	<FightAliens_3_JobList>
		<Action type="gotoState" state="GameState_JobList" extras="XMAS2017_QuestConfig:FightAliens_3_JobList" />
	</FightAliens_3_JobList>
	<FightAliens_4_JobList>
		<Action type="gotoState" state="GameState_JobList" extras="XMAS2017_QuestConfig:FightAliens_4_JobList" />
	</FightAliens_4_JobList>
	<FightAliens_5_JobList>
		<Action type="gotoState" state="GameState_JobList" extras="XMAS2017_QuestConfig:FightAliens_5_JobList" />
	</FightAliens_5_JobList>
	<PourBS_1_JobList>
		<Action type="gotoState" state="GameState_JobList" extras="XMAS2017_QuestConfig:PourBS_1_JobList" />
	</PourBS_1_JobList>
	<BattleBSLeague_1_JobList>
		<Action type="gotoState" state="GameState_JobList" extras="XMAS2017_QuestConfig:BattleBSLeague_1_JobList" />
	</BattleBSLeague_1_JobList>
	<PrizeListButtonPressed runQueueState="RunInAnyState">
		<Action type="checkExpression" expression="XMAS2017_EventHubTabValue">
			<ExpressionCase value="0">
				<Action type="runScript" script="XMAS2017_Scripts:Tab_PrizeTrack" />
			</ExpressionCase>
			<ExpressionCase value="1">
				<Action type="runScript" script="XMAS2017_Scripts:Tab_ReGiftingMachine" />
			</ExpressionCase>
			<ExpressionCase value="2">
				<Action type="runScript" script="XMAS2017_Scripts:Tab_BossFight" />
			</ExpressionCase>
			<ExpressionCase value="3">
				<Action type="runScript" script="XMAS2017_Scripts:Tab_Crafting" />
			</ExpressionCase>
		</Action>
	</PrizeListButtonPressed>
	<Tab_PrizeTrack>
		<Action type="updateVariable" variable="XMAS2017_EventHubTabValue" value="0" />
		<Action type="gotoState" state="GameState_HubPrizeTrack" forceState="true">
			<Extras>
				<Attribute name="helpButtonScript" value="XMAS2017_Scripts:GuidePanel_Event" />
				<Attribute name="specialEvent" value="XMAS2017_Event" />
				<Attribute name="exitButtonScript" value="MiscScripts:GoToInGame" />
			</Extras>
		</Action>
		<Action type="markBadgeViewed" badgeName="XMAS2017_PrizeTrackBadge" />
	</Tab_PrizeTrack>
	<GuidePanel_Event>
		<Action type="updateVariable" variable="XMAS2017_EventHubTabValue" value="0" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="XMAS2017_GuidePanelsConfig:EventGuide_Config" />
	</GuidePanel_Event>
	<Tab_Crafting>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="if">
					<If expression="XMAS2017_CraftingGuideSeen">
						<Then>
							<Action type="updateVariable" variable="XMAS2017_EventHubTabValue" value="3" />
							<Action type="gotoState" state="GameState_HubCraftingMenu" forceState="false">
								<Extras>
									<Attribute name="MenuConfig" value="XMAS2017_CraftingConfig:CraftingMenu" />
									<Attribute name="ExitButtonScript" value="MiscScripts:GoToInGame" />
									<Attribute name="onLoadScript" value="XMAS2017_Scripts_Crafting:UpdateCrafting" />
									<Attribute name="specialEvent" value="XMAS2017_Event" />
								</Extras>
							</Action>
							<Action type="markBadgeViewed" badgeName="XMAS2017_CraftingBadge" />
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="actionSequence" script="XMAS2017_Scripts:GuidePanel_Crafting" />
						</Then>
					</Else>
				</Action>
			</True>
		</Action>
	</Tab_Crafting>
	<Tab_BossFight>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="if">
					<If>
						<Requirement type="gamestate" state="GameState_QuestProgress" not="true" />
						<Then>
							<Action type="if">
								<If expression="XMAS2017_BossFightGuideSeen">
									<Then>
										<Action type="updateVariable" variable="XMAS2017_EventHubTabValue" value="2" />
										<Action type="markBadgeViewed" badgeName="XMAS2017_BossFightBadge" />
										<Action type="gotoState" state="GameState_QuestProgress" forceState="true">
											<Extras>
												<Attribute name="questParentDelegate" value="BossFight_Master" />
												<Attribute name="specialEvent" value="XMAS2017_Event" />
												<Attribute name="showEventHub" value="true" />
											</Extras>
										</Action>
									</Then>
								</If>
								<Else>
									<Then>
										<Action type="actionSequence" script="XMAS2017_Scripts:GuidePanel_BossFight" />
									</Then>
								</Else>
							</Action>
						</Then>
					</If>
				</Action>
			</True>
		</Action>
	</Tab_BossFight>
	<Tab_ReGiftingMachine ignoreHUD="true">
		<Action type="scrollEventHubToIndex" scrollToIndex="0" />
		<Action type="markBadgeViewed" badgeName="ReGiftingMachine" />
		<Action type="setVariable" intVariable="XMAS2017_EventHubTabValue" intValue="1" />
		<Action type="gotoState" state="GameState_HubDataDrivenMenu" forceState="false">
			<Extras>
				<Attribute name="menuName" value="SciFighterMinigameHUB" />
				<Attribute name="scriptResProvider" value="SciFighterMinigameHUB.mns" />
				<Attribute name="menuConfig" value="XMAS2017_MenuConfig_ReGiftingMachine:ReGiftingMachineEventHubMenuConfig" />
				<Attribute name="buttonsConfig" value="XMAS2017_MenuConfig_ReGiftingMachine:ReGiftingMachineEventHubButtonsConfig" />
				<Attribute name="progressBarsConfig" value="XMAS2017_MenuConfig_ReGiftingMachine:ReGiftingMachineEventHubProgressBarConfig" />
				<Attribute name="specialEvent" value="XMAS2017_Event" />
			</Extras>
		</Action>
	</Tab_ReGiftingMachine>
	<TabPressed_ReGiftingMachine_Help ignoreHUD="true">
		<Action type="sound" sound="UIButton" />
		<Action type="scrollEventHubToIndex" scrollToIndex="0" />
		<Action type="setVariable" intVariable="XMAS2017_EventHubTabValue" intValue="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="XMAS2017_MenuConfig_ReGiftingMachine:ReGiftingMachineGuide" />
	</TabPressed_ReGiftingMachine_Help>
	<GuidePanel_ReGiftingMachine_Exit ignoreHUD="true">
		<Action type="if">
			<If expression="XMAS2017">
				<Then>
					<Action type="actionSequence" script="XMAS2017_Scripts:Tab_ReGiftingMachine" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="actionSequence" script="XMAS2017_Scripts:ExitReGiftingMachineGuide" />
				</Then>
			</Else>
		</Action>
	</GuidePanel_ReGiftingMachine_Exit>
	<ExitReGiftingMachineGuide ignoreHUD="true">
		<Action type="runScript" script="MiscScripts:ReturnToGameState" />
	</ExitReGiftingMachineGuide>
	<GuidePanel_BossFight ignoreHUD="true">
		<Action type="sound" sound="UIButton" />
		<Action type="runScript" script="XMAS2017_Scripts:GuidePanel_BossFight_NoSound" />
	</GuidePanel_BossFight>
	<GuidePanel_BossFight_NoSound ignoreHUD="true">
		<Action type="updateVariable" variable="XMAS2017_EventHubTabValue" value="2" />
		<Action type="updateVariable" variable="XMAS2017_BossFightGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="XMAS2017_GuidePanelsConfig:BossFightGuide_Config" />
	</GuidePanel_BossFight_NoSound>
	<GuidePanel_BossFight_Center>
		<Action type="updateVariable" variable="XMAS2017_BossFightGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="XMAS2017_GuidePanelsConfig:BossFightGuide_Config">
			<Extras>
				<Attribute name="ExitButtonScript" value="MiscScripts:ReturnToGameState" />
				<Attribute name="Center" value="true" />
			</Extras>
		</Action>
	</GuidePanel_BossFight_Center>
	<GuidePanel_Crafting>
		<Action type="updateVariable" variable="XMAS2017_EventHubTabValue" value="3" />
		<Action type="updateVariable" variable="XMAS2017_CraftingGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="XMAS2017_GuidePanelsConfig:CraftingGuide_Config" />
	</GuidePanel_Crafting>
	<GuidePanel_Crafting_Center>
		<Action type="updateVariable" variable="XMAS2017_CraftingGuideSeen" value="1" />
		<Action type="gotoState" state="State_HubGuidePanel" extras="XMAS2017_GuidePanelsConfig:CraftingGuide_Config">
			<Extras>
				<Attribute name="ExitButtonScript" value="MiscScripts:ReturnToGameState" />
				<Attribute name="Center" value="true" />
			</Extras>
		</Action>
	</GuidePanel_Crafting_Center>
	<GetMoreMiniGameCurrency>
		<Action type="focusOnMenuItem" menuCategory="XMAS2017" itemName="XMAS2017_MiniGamePack3" />
	</GetMoreMiniGameCurrency>
	<ActOnePrizeTrackTab ignoreHUD="true">
		<Action type="notification" title="UI_XMAS2017_PrizeTrack_title" button="UI_OK" text="UI_Superheroes2_PrizeTrack_Future_text" tooltip="UI_Superheroes2_PrizeTrack_Future_toolTip" icon="ICO_PRIZ_XMAS2017_GautamaBuddha_LG" darken="true" />
	</ActOnePrizeTrackTab>
	<ReGiftingMachineCraftingReward>
		<Action type="reward" XMAS2017_CraftingCurrency="10" />
		<Action type="setVariable" intVariable="RM_Wins" intValue="0" />
	</ReGiftingMachineCraftingReward>
	<ReGiftingMachineLandLoad>
		<Action type="if">
			<If expression="and(System::evaluate('Game::State::GameState_CustomTouch'), greaterThan(RM_FRAMECNT, 0))">
				<Then>
					<Action type="if">
						<If expression="ReGiftingMachine_Active &amp;&amp; RM_PAUSED==0">
							<Then>
								<Action type="runScript" script="XMAS2017_Scripts_ReGiftingMachine:QuitGame" />
							</Then>
						</If>
					</Action>
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="runScript" script="XMAS2017_Scripts_ReGiftingMachine:FinishReGiftingMachine" />
				</Then>
			</Else>
		</Action>
	</ReGiftingMachineLandLoad>
	<MiniGameCurrencyReward_1>
		<Action type="reward" XMAS2017_MinigameCurrency="25" />
		<Action type="notification" icon="ICO_STOR_XMAS2017_WrappingPaperPack1" title="CON_XMAS2017_MiniGamePack1_name" text="CON_XMAS2017_MiniGamePack1_desc" button="UI_OK" />
	</MiniGameCurrencyReward_1>
	<MiniGameCurrencyReward_2>
		<Action type="reward" XMAS2017_MinigameCurrency="50" />
		<Action type="notification" icon="ICO_STOR_XMAS2017_WrappingPaperPack2" title="CON_XMAS2017_MiniGamePack2_name" text="CON_XMAS2017_MiniGamePack2_desc" button="UI_OK" />
	</MiniGameCurrencyReward_2>
	<MiniGameCurrencyReward_3>
		<Action type="reward" XMAS2017_MinigameCurrency="75" />
		<Action type="notification" icon="ICO_STOR_XMAS2017_WrappingPaperPack3" title="CON_XMAS2017_MiniGamePack3_name" text="CON_XMAS2017_MiniGamePack3_desc" button="UI_OK" />
	</MiniGameCurrencyReward_3>
	<AwardKangKodos>
		<Action type="if">
			<If>
				<Requirement type="character" name="Kang" not="true" />
				<Then>
					<Action type="reward">
						<Item type="character" name="Kang" useImmediately="true" />
					</Action>
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If>
				<Requirement type="character" name="Kodos" not="true" />
				<Then>
					<Action type="reward">
						<Item type="character" name="Kodos" useImmediately="true" />
					</Action>
				</Then>
			</If>
		</Action>
	</AwardKangKodos>
	<PrizeTrack1>
		<Action type="reward">
			<Item type="character" name="GautamaBuddha" useImmediately="true" />
		</Action>
		<Action type="reward">
			<Item type="consumable" name="FreeLandBlock" />
		</Action>
		<Action type="gotoState" state="GameState_InGame" />
	</PrizeTrack1>
	<AwardRegiftingCurrency>
		<Action type="reward" XMAS2017_MinigameCurrency="toDouble(System::getConfigValue('__XMAS2017_BalancingConfig:ReGiftingMachine:StartCurrency__'))*2" />
	</AwardRegiftingCurrency>
	<GoToKwanzaaDrHibbertPT>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="KwanzaaDrHibbert" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="KwanzaaDrHibbert" inventory="true" />
					</True>
					<False>
						<Action type="updateVariable" variable="XMAS2017_EventHubTabValue" value="0" />
						<Action type="gotoState" state="GameState_HubPrizeTrack" forceState="true">
							<Extras>
								<Attribute name="helpButtonScript" value="XMAS2017_Scripts:GuidePanel_Event" />
								<Attribute name="specialEvent" value="XMAS2017_Event" />
								<Attribute name="prizeListIndex" value="1" />
								<Attribute name="selectPrize" value="3" />
								<Attribute name="exitButtonScript" value="MiscScripts:GoToInGame" />
							</Extras>
						</Action>
						<Action type="markBadgeViewed" badgeName="XMAS2017_PrizeTrackBadge" />
					</False>
				</Action>
			</True>
			<False>
				<Action type="gotoState" state="GameState_InGame" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoToKwanzaaDrHibbertPT>
	<GoToGautamaBuddhaPT>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="GautamaBuddha" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="GautamaBuddha" inventory="true" />
					</True>
					<False>
						<Action type="updateVariable" variable="XMAS2017_EventHubTabValue" value="0" />
						<Action type="gotoState" state="GameState_HubPrizeTrack" forceState="true">
							<Extras>
								<Attribute name="helpButtonScript" value="XMAS2017_Scripts:GuidePanel_Event" />
								<Attribute name="specialEvent" value="XMAS2017_Event" />
								<Attribute name="prizeListIndex" value="1" />
								<Attribute name="selectPrize" value="0" />
								<Attribute name="exitButtonScript" value="MiscScripts:GoToInGame" />
							</Extras>
						</Action>
						<Action type="markBadgeViewed" badgeName="XMAS2017_PrizeTrackBadge" />
					</False>
				</Action>
			</True>
			<False>
				<Action type="gotoState" state="GameState_InGame" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoToGautamaBuddhaPT>
	<GoTo_Tappables ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="if">
					<If expression="#program;                         if(User::getVariable('BankedRoboFunzos') &gt; 0)                         {                             return false;                         }                         else                         {                             var character = Character::find('RoboFunzo');                             var characterInstanceList = Land::getAllInstancesOfObject(character);                             foreach(characterInstanceList as instance)                             {                                 if(!Object::getDelete(instance))                                 {                                     return false;                                 }                             }                         }                         return true;">
						<Then>
							<Action type="if">
								<If expression="#program;                                     var characterInstances = Character::getAllInstancesAsArray();                                     if (Array::size(characterInstances) &gt; 0)                                     {                                         foreach(characterInstances as instance)                                         {                                             if (Object::getVariableAsNumber(instance, 'RoboFunzoAttached') &gt; 0)                                             {                                                 Script::runOnObjectInstance('XMAS2017_Scripts:PanToObjectRef', instance);                                                 return false;                                             }                                         }                                     }                                     return true;">
									<Then>
										<Action type="hudTip" text="UI_XMAS2017_AllTappablesCleared" time="10s" requiresActiveHUD="false" />
									</Then>
								</If>
							</Action>
						</Then>
					</If>
					<Else>
						<Then>
							<Action type="pantoobject" time="0" character="RoboFunzo" flagsToAvoid="delete" />
						</Then>
					</Else>
				</Action>
			</True>
		</Action>
	</GoTo_Tappables>
	<PanToObjectRef>
		<Action type="pantoobject" time="0" useObjectRef="true" />
	</PanToObjectRef>
	<SpawnFullHudTip>
		<Action type="hudTip" text="UI_XMAS2017_TownFull" time="3s" queue="true" waitForHUD="true" />
	</SpawnFullHudTip>
	<TappableTapped parallel="true" cache="true">
		<Action type="runScriptOnAll" character="RoboFunzo" in_radius="5" radius_delay="0.3" script="XMAS2017_Scripts:Tappable_Tapped_Single" />
		<Action type="actionSequence" script="XMAS2017_Scripts:Tappable_Tapped_Single" />
	</TappableTapped>
	<Tappable_Tapped_Single parallel="true" cache="true">
		<Action type="if">
			<If expression="Object::Delete==0">
				<Then>
					<Action type="setObjectVariable" variable="TAPPED" value="1" allowOrphan="false" asExpression="true" />
					<Action type="actionSequence" script="XMAS2017_Scripts:Tappable_Reward" />
					<Action type="setObjectFlag" flags="delete" />
					<Action type="runScript" script="XMAS2017_Scripts:Tappable_AnimateAndDie_Single" />
				</Then>
			</If>
		</Action>
	</Tappable_Tapped_Single>
	<Tappable_AnimateAndDie parallel="true" cache="true">
		<Action type="sound" sound="MysticalPest_Tap" />
		<Action type="delay" time="0.2" />
		<Action type="sound" sound="RoboFunzo_Tap_A" />
		<Action type="if">
			<If expression="#program;                 if(mod(RoboFunzos_Tapped, 2)  &gt; 0)                 {                 return true;                 }                 return false;">
				<Then>
					<Action type="anim-play" animation="Squish_1" />
				</Then>
			</If>
			<Else>
				<Then>
					<Action type="anim-play" animation="Squish_2" />
				</Then>
			</Else>
		</Action>
		<Action type="anim-waitforend" />
		<Action type="fade" fade="outmax" />
		<Action type="deletecharacter" character="RoboFunzo" />
		<Action type="checkRequirements" ignoreObject="false">
			<Requirements>
				<Requirement type="active quest" quest="XMAS2017_DCS_ClearRoboFunzos" />
			</Requirements>
			<True>
				<Action type="setVariable" intVariable="XMAS2017_DCS_RoboFunzos" intValue="XMAS2017_DCS_RoboFunzos+1" />
			</True>
		</Action>
	</Tappable_AnimateAndDie>
	<Tappable_AnimateAndDie_Single parallel="true" cache="true">
		<Action type="sound" sound="MysticalPest_Tap" />
		<Action type="delay" time="0.2" />
		<Action type="sound" sound="RoboFunzo_Tap_A" />
		<Action type="anim-play" animation="Squish_1" />
		<Action type="anim-waitforend" />
		<Action type="fade" fade="outmax" />
		<Action type="deletecharacter" character="RoboFunzo" />
		<Action type="checkRequirements" ignoreObject="false">
			<Requirements>
				<Requirement type="active quest" quest="XMAS2017_DCS_ClearRoboFunzos" />
			</Requirements>
			<True>
				<Action type="setVariable" intVariable="XMAS2017_DCS_RoboFunzos" intValue="XMAS2017_DCS_RoboFunzos+1" />
			</True>
		</Action>
		<Action type="if">
			<If expression="#program;                 if(User::getVariable('BankedRoboFunzos') &gt; 0)                 {                     return false;                 }                 else                 {                     var character = Character::find('RoboFunzo');                     var characterInstanceList = Land::getAllInstancesOfObject(character);                     foreach(characterInstanceList as instance)                     {                         if(!Object::getDelete(instance))                         {                             return false;                         }                     }                     var characterInstances = Character::getAllInstancesAsArray();                     if (Array::size(characterInstances) &gt; 0)                     {                         foreach(characterInstances as instance)                         {                             if (Object::getVariableAsNumber(instance, 'RoboFunzoAttached') &gt; 0)                             {                                 return false;                             }                         }                     }                 }                 return true;">
				<Then>
					<Action type="hudTip" text="UI_XMAS2017_AllTappablesCleared" time="10s" requiresActiveHUD="false" />
				</Then>
			</If>
		</Action>
	</Tappable_AnimateAndDie_Single>
	<Tappable_Reward parallel="true" cache="true">
		<Action type="reward" save="true" XMAS2017_ActivePrizeTrackCurrency="__XMAS2017_BalancingConfig:Tappables:Award_PTCurrency__" chance="__XMAS2017_BalancingConfig:Tappables:DropChance_PTCurrency__" chanceType="s" suppress_sound="true" />
		<Action type="reward" save="true" XMAS2017_CraftingCurrency="__XMAS2017_GameConfig:TappableCraftReward:Amount__" chance="__XMAS2017_BalancingConfig:Tappables:DropChance_Craft1__" chanceType="s" suppress_sound="true" />
		<Action type="reward" save="true" XMAS2017_MinigameCurrency="__XMAS2017_BalancingConfig:Tappables:Award_RGM__" chance="__XMAS2017_BalancingConfig:Tappables:DropChance_RGM__" chanceType="s" suppress_sound="true" />
		<Action type="setVariable" intVariable="RoboFunzos_Tapped" intValue="RoboFunzos_Tapped+1" />
	</Tappable_Reward>
	<DCS_Reset_RoboFunzos>
		<Action type="updateVariable" variable="XMAS2017_DCS_RoboFunzos" value="0" />
	</DCS_Reset_RoboFunzos>
	<DCS_Reset_RoboFunzos_Friends>
		<Action type="updateVariable" variable="XMAS2017_DCS_RoboFunzos_Friends" value="0" />
	</DCS_Reset_RoboFunzos_Friends>
	<SpawnFriendTappables>
		<Action type="if">
			<If>
				<Requirements>
					<Requirement type="friendlevel" level="15" />
				</Requirements>
				<Then>
					<Action type="createobject" name="RoboFunzo" count="30" save="true" panCamera="false" />
				</Then>
			</If>
			<ElseIf>
				<Requirements>
					<Requirement type="friendlevel" level="10" />
				</Requirements>
				<Then>
					<Action type="createobject" name="RoboFunzo" count="25" save="true" panCamera="false" />
				</Then>
			</ElseIf>
			<ElseIf>
				<Requirements>
					<Requirement type="friendlevel" level="5" />
				</Requirements>
				<Then>
					<Action type="createobject" name="RoboFunzo" count="20" save="true" panCamera="false" />
				</Then>
			</ElseIf>
		</Action>
	</SpawnFriendTappables>
	<TappableTapped_Friend>
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="friendactioncount" amount="3" special="false" not="true" />
			</Requirements>
			<True>
				<Action type="friendActionPerformed" />
				<Action type="actionSequence" script="XMAS2017_Scripts:Tappable_Reward_Friend" />
				<Action type="runScript" script="XMAS2017_Scripts:Tappable_AnimateAndDie_Friend" />
				<Action type="checkRequirements" ignoreObject="false">
					<Requirements>
						<Requirement type="active quest" quest="XMAS2017_DCS_ClearRoboFunzosInFriendsTowns" />
					</Requirements>
					<True>
						<Action type="setVariable" intVariable="XMAS2017_DCS_RoboFunzos_Friends" intValue="XMAS2017_DCS_RoboFunzos_Friends+1" />
					</True>
				</Action>
			</True>
		</Action>
	</TappableTapped_Friend>
	<Tappable_AnimateAndDie_Friend parallel="true" cache="true">
		<Action type="sound" sound="MysticalPest_Tap" />
		<Action type="delay" time="0.2" />
		<Action type="sound" sound="RoboFunzo_Tap_A" />
		<Action type="anim-play" animation="Squish_1" />
		<Action type="anim-waitforend" />
		<Action type="fade" fade="outmax" />
		<Action type="deletecharacter" character="RoboFunzo" />
		<Action type="setVariable" intVariable="RoboFunzo_Tapped_Friend" intValue="RoboFunzo_Tapped_Friend+1" />
	</Tappable_AnimateAndDie_Friend>
	<Tappable_Reward_Friend parallel="true" cache="true">
		<Action type="reward" save="true" XMAS2017_ActivePrizeTrackCurrency="selector XMAS2017_PTCurrencyPerFriendAction" chance="__XMAS2017_BalancingConfig:Tappables:DropChance_PTCurrency__" chanceType="s" suppress_sound="true" />
		<Action type="reward" save="true" XMAS2017_CraftingCurrency="selector XMAS2017_CraftingCurrencyPerFriendAction" chance="__XMAS2017_BalancingConfig:Tappables:DropChance_Craft1__" chanceType="s" suppress_sound="true" />
		<Action type="reward" save="true" money="selector socialMoneyReward" xp="1" FriendPoint="selector friendPointsReward" donuts="1" chance="selector socialDonutChanceReward" chanceType="d" suppress_sound="true" />
	</Tappable_Reward_Friend>
	<FriendsHUDInfo>
		<Action type="triggerevent" name="ScriptEvent" data="XMAS2017_UpdateFriendActionHelpVariables" />
		<Action type="runScript" script="XMAS2017_Scripts:FriendsHUDInfoAux" />
	</FriendsHUDInfo>
	<FriendsHUDInfoAux>
		<Action type="checkRequirements">
			<Requirement type="reqList" location="XMAS2017_Requirements:ActOne" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="variable" variable="FriendActionsCount" count="30" not="true" />
					<True>
						<Action type="notification" title="RES_XMAS2017_Act1PrizeTrackCurrency_Plural" button="UI_OK" text="GEN_ResourceListing_XMAS2017_PT1" icon="ICO_CUR_XMAS2017_CurrencyAct1_LG">
							<Variable name="XMAS2017_PT1_FOR_NEXT_FRIEND_ACTION" type="int" />
							<Variable name="XMAS2017_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
						</Action>
					</True>
					<False>
						<Action type="notification" title="RES_XMAS2017_Act1PrizeTrackCurrency_Plural" button="UI_OK" text="UI_XMAS2017_OutOfFriendActions_PT1" icon="ICO_CUR_XMAS2017_CurrencyAct1_LG"></Action>
					</False>
				</Action>
			</True>
		</Action>
		<Action type="checkRequirements">
			<Requirement type="reqList" location="XMAS2017_Requirements:ActTwo" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="variable" variable="FriendActionsCount" count="30" not="true" />
					<True>
						<Action type="notification" title="RES_XMAS2017_Act2PrizeTrackCurrency_Plural" button="UI_OK" text="GEN_ResourceListing_XMAS2017_PT2" icon="ICO_CUR_XMAS2017_CurrencyAct2_LG">
							<Variable name="XMAS2017_PT2_FOR_NEXT_FRIEND_ACTION" type="int" />
							<Variable name="XMAS2017_ACTIONS_UNTIL_NEXT_MULTIPLIER" type="int" />
						</Action>
					</True>
					<False>
						<Action type="notification" title="RES_XMAS2017_Act2PrizeTrackCurrency_Plural" button="UI_OK" text="UI_XMAS2017_OutOfFriendActions_PT2" icon="ICO_CUR_XMAS2017_CurrencyAct2_LG"></Action>
					</False>
				</Action>
			</True>
		</Action>
	</FriendsHUDInfoAux>
	<XMAS2017_Prestige_Act1>
		<Action type="reward">
			<Item type="consumable" name="XMAS2017_Prestige_Act1" useImmediately="true" />
		</Action>
	</XMAS2017_Prestige_Act1>
	<EnterXMAS2017Category>
		<Action type="focusOnMenuItem" menuCategory="XMAS2017" />
	</EnterXMAS2017Category>
	<EnterHolidayBazaarCategory>
		<Action type="focusOnMenuItem" menuCategory="XMAS2017_HolidayBazaar" />
	</EnterHolidayBazaarCategory>
	<MessageFreeLandBlock>
		<Action type="genericMessage">
			<Attribute name="config">
				<AttributeSet name="message">
					<Attribute name="text" value="UI_Added_To_Inventory" parameters="textParams" localise="true">
						<AttributeSet name="textParams">
							<Attribute name="0" value="CON_FreeLandBlock_name" localise="true" />
						</AttributeSet>
					</Attribute>
					<Attribute name="font" value="eFont_Normal" />
					<Attribute name="color" value="FFFFFFFF" />
				</AttributeSet>
				<AttributeSet name="left">
					<Attribute name="image" value="ICO_STOR_SINGLE_FREELANDTOKEN" />
				</AttributeSet>
				<AttributeSet name="button_OK">
					<Attribute name="button_text">
						<AttributeSet name="text">
							<Attribute name="text" value="UI_OK" localise="true" />
						</AttributeSet>
					</Attribute>
				</AttributeSet>
				<AttributeSet name="gradient">
					<Attribute name="active" value="false" />
				</AttributeSet>
			</Attribute>
		</Action>
	</MessageFreeLandBlock>
	<MessageConductorOtto>
		<Action type="checkRequirements">
			<Requirement type="characterunlocked" name="Otto" not="true" />
			<True>
				<Action type="genericMessage">
					<Attribute name="config">
						<AttributeSet name="message">
							<Attribute name="text" value="UI_Added_To_Inventory" parameters="textParams" localise="true">
								<AttributeSet name="textParams">
									<Attribute name="0" value="CON_ConductorOtto_name" localise="true" />
								</AttributeSet>
							</Attribute>
							<Attribute name="font" value="eFont_Normal" />
							<Attribute name="color" value="FFFFFFFF" />
						</AttributeSet>
						<AttributeSet name="left">
							<Attribute name="image" value="Otto_Conductor_Menu.rgb" />
						</AttributeSet>
						<AttributeSet name="button_OK">
							<Attribute name="button_text">
								<AttributeSet name="text">
									<Attribute name="text" value="UI_OK" localise="true" />
								</AttributeSet>
							</Attribute>
						</AttributeSet>
						<AttributeSet name="gradient">
							<Attribute name="active" value="false" />
						</AttributeSet>
					</Attribute>
				</Action>
			</True>
		</Action>
	</MessageConductorOtto>
	<MessageKwanzaaDrHibbert>
		<Action type="checkRequirements">
			<Requirement type="characterunlocked" name="DrHibbert" not="true" />
			<True>
				<Action type="genericMessage">
					<Attribute name="config">
						<AttributeSet name="message">
							<Attribute name="text" value="UI_Added_To_Inventory" parameters="textParams" localise="true">
								<AttributeSet name="textParams">
									<Attribute name="0" value="CON_KwanzaaDrHibbert_name" localise="true" />
								</AttributeSet>
							</Attribute>
							<Attribute name="font" value="eFont_Normal" />
							<Attribute name="color" value="FFFFFFFF" />
						</AttributeSet>
						<AttributeSet name="left">
							<Attribute name="image" value="DrHibbert_Kwanzaa_Menu.rgb" />
						</AttributeSet>
						<AttributeSet name="button_OK">
							<Attribute name="button_text">
								<AttributeSet name="text">
									<Attribute name="text" value="UI_OK" localise="true" />
								</AttributeSet>
							</Attribute>
						</AttributeSet>
						<AttributeSet name="gradient">
							<Attribute name="active" value="false" />
						</AttributeSet>
					</Attribute>
				</Action>
			</True>
		</Action>
	</MessageKwanzaaDrHibbert>
	<RecommendStoreCategory ignoreHUD="true">
		<Action type="clearRecommendations" category="Event" name="XMAS2017_ThreePanel" />
		<Action type="recommendation" recType="Event" name="XMAS2017_ThreePanel" eventName="UI_XMAS2017_Title" limitedTime="true" limitedTimeEndDate="XMAS2017_EndDate" />
		<Action type="focusOnMenuItem" menuCategory="XMAS2017" />
		<Action type="updateVariable" variable="XMAS2017_StorePanelSeen" value="1" />
	</RecommendStoreCategory>
	<RecommendStoreOnePanel ignoreHUD="true">
		<Action type="clearRecommendations" category="Event" name="XMAS2017_ThreePanel" />
		<Action type="clearRecommendations" category="Event" name="XMAS2017_OnePanel" />
		<Action type="recommendation" recType="Event" name="XMAS2017_OnePanel" eventName="UI_XMAS2017_Title" limitedTime="true" limitedTimeEndDate="XMAS2017_EndDate" />
		<Action type="reparseBuildMenu" />
	</RecommendStoreOnePanel>
	<RecommendHolidayBazaarStoreCategory ignoreHUD="true">
		<Action type="clearRecommendations" category="Event" name="XMAS2017_HolidayBazaar_OnePanel" />
		<Action type="recommendation" recType="Event" name="XMAS2017_HolidayBazaar_OnePanel" eventName="UI_XMAS2017_Title" limitedTime="true" limitedTimeEndDate="XMAS2017_HolidayBazaar_Store_End" />
		<Action type="reparseBuildMenu" />
	</RecommendHolidayBazaarStoreCategory>
	<KodosBattleStarted ignoreHUD="true" parallel="true">
		<Action type="setObjectVariable" variable="Kodos" value="1">
			<Objects>
				<ObjectByName name="RigellianChristmasSpaceship" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="XMAS2017_Scripts:RigellianChristmasSpaceship_Start" />
	</KodosBattleStarted>
	<KodosBattleDone ignoreHUD="true" parallel="true">
		<Action type="setObjectVariable" variable="Kodos" value="0">
			<Objects>
				<ObjectByName name="RigellianChristmasSpaceship" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="XMAS2017_Scripts:RigellianChristmasSpaceship_Done" />
	</KodosBattleDone>
	<KangBattleStarted ignoreHUD="true" parallel="true">
		<Action type="setObjectVariable" variable="Kang" value="1">
			<Objects>
				<ObjectByName name="RigellianChristmasSpaceship" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="XMAS2017_Scripts:RigellianChristmasSpaceship_Start" />
	</KangBattleStarted>
	<KangBattleDone ignoreHUD="true" parallel="true">
		<Action type="setObjectVariable" variable="Kang" value="0">
			<Objects>
				<ObjectByName name="RigellianChristmasSpaceship" />
			</Objects>
		</Action>
		<Action type="actionSequence" script="XMAS2017_Scripts:RigellianChristmasSpaceship_Done" />
	</KangBattleDone>
	<BSBattleStarted ignoreHUD="true" parallel="true">
		<Action type="setVariable" intVariable="XMAS2017_NumSlotsUsedAtBossFight" intValue="XMAS2017_NumSlotsUsedAtBossFight+1" asExpression="true" />
		<Action type="actionSequence" script="XMAS2017_Scripts:RigellianChristmasSpaceship_Start" />
	</BSBattleStarted>
	<BSBattleDone ignoreHUD="true" parallel="true">
		<Action type="setVariable" intVariable="XMAS2017_NumSlotsUsedAtBossFight" intValue="XMAS2017_NumSlotsUsedAtBossFight-1" asExpression="true" />
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="formula" formula="XMAS2017_NumSlotsUsedAtBossFight &lt;= 0" />
			</Requirements>
			<True>
				<Action type="setVariable" intVariable="XMAS2017_NumSlotsUsedAtBossFight" intValue="0" />
			</True>
		</Action>
		<Action type="actionSequence" script="XMAS2017_Scripts:RigellianChristmasSpaceship_Done" />
	</BSBattleDone>
	<RigellianSpaceship_ActiveIn_Done ignoreHUD="true" parallel="true">
		<Action type="setObjectVariable" variable="Active_In" value="0" asExpression="true" allowOrphan="false">
			<Objects>
				<ObjectByName name="RigellianChristmasSpaceship" />
			</Objects>
		</Action>
	</RigellianSpaceship_ActiveIn_Done>
	<RigellianSpaceship_ActiveOut_Done ignoreHUD="true" parallel="true">
		<Action type="setObjectVariable" variable="Active_Out" value="0" asExpression="true" allowOrphan="false">
			<Objects>
				<ObjectByName name="RigellianChristmasSpaceship" />
			</Objects>
		</Action>
	</RigellianSpaceship_ActiveOut_Done>
	<RigellianChristmasSpaceship_Start ignoreHUD="true">
		<Action type="setVariable" intVariable="XMAS2017_NumCharactersAtBossFight" intValue="XMAS2017_NumCharactersAtBossFight+1" asExpression="true" />
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="formula" formula="#program;                                                     var building = Land::getFirstInstanceOfObject(Building::find('RigellianChristmasSpaceship'));                                                     return Object::getVariableAsNumber(building, 'Neutral');" />
			</Requirements>
			<True>
				<Action type="setObjectVariable" variable="Active_In" value="1" asExpression="true" allowOrphan="false">
					<Objects>
						<ObjectByName name="RigellianChristmasSpaceship" />
					</Objects>
				</Action>
				<Action type="setObjectVariable" variable="Active" value="1" asExpression="true" allowOrphan="false">
					<Objects>
						<ObjectByName name="RigellianChristmasSpaceship" />
					</Objects>
				</Action>
				<Action type="setObjectVariable" variable="Neutral" value="0" asExpression="true" allowOrphan="false">
					<Objects>
						<ObjectByName name="RigellianChristmasSpaceship" />
					</Objects>
				</Action>
				<Action type="sound" sound="RigellianChristmasSpaceshipTakeOff" />
			</True>
		</Action>
	</RigellianChristmasSpaceship_Start>
	<RigellianChristmasSpaceship_Done ignoreHUD="true" parallel="true">
		<Action type="setVariable" intVariable="XMAS2017_NumCharactersAtBossFight" intValue="XMAS2017_NumCharactersAtBossFight-1" asExpression="true" />
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="formula" formula="XMAS2017_NumCharactersAtBossFight &lt;= 0" />
			</Requirements>
			<True>
				<Action type="setObjectVariable" variable="Active" value="0" asExpression="true" allowOrphan="false">
					<Objects>
						<ObjectByName name="RigellianChristmasSpaceship" />
					</Objects>
				</Action>
				<Action type="setObjectVariable" variable="Active_Out" value="1" asExpression="true" allowOrphan="false">
					<Objects>
						<ObjectByName name="RigellianChristmasSpaceship" />
					</Objects>
				</Action>
				<Action type="setObjectVariable" variable="Neutral" value="1" asExpression="true" allowOrphan="false">
					<Objects>
						<ObjectByName name="RigellianChristmasSpaceship" />
					</Objects>
				</Action>
				<Action type="setVariable" intVariable="XMAS2017_NumCharactersAtBossFight" intValue="0" />
				<Action type="sound" sound="RigellianChristmasSpaceshipLand" />
			</True>
		</Action>
	</RigellianChristmasSpaceship_Done>
	<GoTo_Tappables_SystemMessage ignoreHUD="true">
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<False>
				<Action type="gotoland" land="Springfield" showPopup="true" />
			</False>
			<True>
				<Action type="if">
					<If>
						<Requirement type="reqList" location="XMAS2017_Requirements:HaveEnoughMiniGameCurrency" />
						<Then>
							<Action type="actionSequence" script="XMAS2017_Scripts:Tab_ReGiftingMachine" />
						</Then>
					</If>
					<ElseIf expression="#program;                         if(User::getVariable('BankedRoboFunzos') &gt; 0)                         {                             return true;                         }                         else                         {                             var character = Character::find('RoboFunzo');                             var characterInstanceList = Land::getAllInstancesOfObject(character);                             foreach(characterInstanceList as instance)                             {                                 if(!Object::getDelete(instance))                                 {                                     return true;                                 }                             }                         }                         return false;">
						<Then>
							<Action type="pantoobject" time="0" character="RoboFunzo" flagsToAvoid="delete" />
						</Then>
					</ElseIf>
					<ElseIf expression="#program;                         var characterInstances = Character::getAllInstancesAsArray();                         if (Array::size(characterInstances) &gt; 0)                         {                             foreach(characterInstances as instance)                             {                                 if (Object::getVariableAsNumber(instance, 'RoboFunzoAttached') &gt; 0)                                 {                                     Script::runOnObjectInstance('XMAS2017_Scripts:PanToObjectRef', instance);                                     return true;                                 }                             }                         }                         return false;">
						<Then></Then>
					</ElseIf>
					<ElseIf>
						<Requirements>
							<Requirement type="quest started" quest="FreshOffTheDonutTruck_4" />
							<Requirement type="building" building="BigBox" rewardsCollected="yes" />
						</Requirements>
						<Then>
							<Action type="actionSequence" script="DailyTasks_HelperScripts:OpenDailyChallengeSystemUI" />
						</Then>
					</ElseIf>
					<Else>
						<Then>
							<Action type="message" text="UI_XMAS2017_NoTappables" />
						</Then>
					</Else>
				</Action>
			</True>
		</Action>
	</GoTo_Tappables_SystemMessage>
	<Tab_Crafting_ScrollTo>
		<Action type="updateVariable" variable="XMAS2017_EventHubTabValue" value="3" />
		<Action type="gotoState" state="GameState_HubCraftingMenu" forceState="false" formatMe="deep">
			<Extras>
				<Attribute name="MenuConfig" value="XMAS2017_CraftingConfig:CraftingMenu" />
				<Attribute name="ExitButtonScript" value="MiscScripts:GoToInGame" />
				<Attribute name="onLoadScript" value="XMAS2017_Scripts_Crafting:UpdateCrafting" />
				<Attribute name="specialEvent" value="XMAS2017_Event" />
				<Attribute name="ItemToScrollTo" value="{ItemToScrollTo}" />
			</Extras>
		</Action>
		<Action type="markBadgeViewed" badgeName="XMAS2017_CraftingBadge" />
	</Tab_Crafting_ScrollTo>
	<GoTo_SantasPlaneSled>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="SantasPlaneSled" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="SantasPlaneSled" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="SantasPlaneSled" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoTo_SantasPlaneSled>
	<GoTo_SnakeWithRudolph>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="SnakeWithRudolph" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="SnakeWithRudolph" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="SnakeWithRudolph" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoTo_SnakeWithRudolph>
	<GoTo_TheStableAtTheInn>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="TheStableAtTheInn" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="TheStableAtTheInn" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="TheStableAtTheInn" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoTo_TheStableAtTheInn>
	<GoTo_TireFireplace>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="SpringfieldTireyard" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="SpringfieldTireyard" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="SpringfieldTireyard" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoTo_TireFireplace>
	<GoTo_FestiveRigellianQueen>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="RigellianQueen" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="RigellianQueen" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="RigellianQueen" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoTo_FestiveRigellianQueen>
	<GoTo_RadiantBSStation>
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="RadiantBSStation" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="RadiantBSStation" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="RadiantBSStation" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoTo_RadiantBSStation>
	<XMAS2017_Prestige_Act1>
		<Action type="reward">
			<Item type="consumable" name="XMAS2017_Prestige_Act1" useImmediately="true" />
		</Action>
	</XMAS2017_Prestige_Act1>
	<XMAS2017_Prestige_Act2>
		<Action type="reward">
			<Item type="consumable" name="XMAS2017_Prestige_Act2" useImmediately="true" />
		</Action>
	</XMAS2017_Prestige_Act2>
	<HypnotizableCharacterTouched parallel="true" cache="true">
		<Action type="if">
			<If expression="Object::RoboFunzoAttached">
				<Then>
					<Action type="actionSequence" script="XMAS2017_Scripts:Tappable_Reward" parseOnDemand="true" />
					<Action type="program">
						<Program><![CDATA[
                                #program;
                                var character = Script::getObjectInstance();
                                Object::setVariable(character, 'RoboFunzoAttached', '0', 0, true);
                                Object::setVariable(character, 'RoboFunzoDestroyed', '1', 0, true);
                                Object::setVariable(character, 'CharacterReadyToBeAttached', '0', 0, true);
                            ]]></Program>
					</Action>
					<Action type="possessCharacter" isPossessed="false" />
					<Action type="if">
						<If expression="RoboFunzos_TotalAttached &gt; 0">
							<Then>
								<Action type="setVariable" intVariable="RoboFunzos_TotalAttached" intValue="RoboFunzos_TotalAttached-1" />
							</Then>
						</If>
					</Action>
					<Action type="scheduleScript" mode="create" script="XMAS2017_Scripts:StopHoverDestroy" shouldSave="true" relativeTime="1s" />
					<Action type="pantoobject" useObjectRef="true" />
					<Action type="returnToInGameState" />
				</Then>
			</If>
		</Action>
	</HypnotizableCharacterTouched>
	<StopHoverDestroy parallel="true">
		<Action type="program">
			<Program><![CDATA[
                    #program;
                    var character = Script::getObjectInstance();
                    Object::setVariable(character, 'RoboFunzoDestroyed', '0', 0, true);
                ]]></Program>
		</Action>
	</StopHoverDestroy>
	<RoboFunzoPossess parallel="true" interruptable="true" lastinterruptableaction="5">
		<Action type="checkRequirements">
			<Requirements>
				<Requirement type="formula" formula="RoboFunzos_TotalAttached &lt; 5" />
				<Requirement type="reqList" location="XMAS2017_Requirements:ActTwo" />
			</Requirements>
			<True>
				<Action type="program">
					<Program><![CDATA[
                            #program;
                            var character = Script::getObjectInstance();
                            var currentJob = Character::getCurrentJobInstance(character);
                            if(isNULL(currentJob))
                            {
                                Object::setVariable(character, 'CharacterReadyToBeAttached', '1', 0, false);
                            }
                        ]]></Program>
				</Action>
				<Action type="if">
					<If expression="Object::CharacterReadyToBeAttached">
						<Then>
							<Action type="program">
								<Program><![CDATA[
                                        #program;
                                        var character = Script::getObjectInstance();
                                        Object::setVariable(character, 'RoboFunzoAttached', '1', 0, false);
                                    ]]></Program>
							</Action>
							<Action type="possessCharacter" isPossessed="true" />
							<Action type="move" speed="1" panCamera="false" />
							<Action type="setVariable" intVariable="RoboFunzos_TotalAttached" intValue="RoboFunzos_TotalAttached+1" />
						</Then>
					</If>
				</Action>
			</True>
		</Action>
	</RoboFunzoPossess>
	<AttachRoboFunzos>
		<Action type="if">
			<If expression="System::evaluate('Character::Homer::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Homer" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Marge::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Marge" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Bart::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Bart" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Lisa::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Lisa" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Grampa::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Grampa" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Nelson::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Nelson" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Milhouse::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Milhouse" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Kirk::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Kirk" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Luann::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Luann" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::SgtSkinner::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="SgtSkinner" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Krusty::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Krusty" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Ned::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Ned" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Wiggum::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Wiggum" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Snake::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Snake" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Burns::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Burns" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Smithers::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Smithers" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::RichardNixon::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="RichardNixon" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Apu::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Apu" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Selma::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Selma" isPossessed="true" />
				</Then>
			</If>
		</Action>
		<Action type="if">
			<If expression="System::evaluate('Character::Patty::Object::RoboFunzoAttached')">
				<Then>
					<Action type="possessCharacter" character="Patty" isPossessed="true" />
				</Then>
			</If>
		</Action>
	</AttachRoboFunzos>
	<FullyUpgrade_ExoticPettingZoo parallel="true">
		<Action type="updateVariable" variable="ExoticPettingZooBuildingLevel" value="2" />
	</FullyUpgrade_ExoticPettingZoo>
	<FullyUpgrade_FortressOfLonelitude parallel="true">
		<Action type="updateVariable" variable="FortressOfLonelitudeBuildingLevel" value="2" />
	</FullyUpgrade_FortressOfLonelitude>
	<XMAS2017_RecommendMysteryBox_Start parallel="true">
		<Action type="recommendation" recType="Promoted" name="XMAS2017_WinterWonderland_MysteryBox" />
	</XMAS2017_RecommendMysteryBox_Start>
	<XMAS2017_RecommendMysteryBoxPromo_Start parallel="true">
		<Action type="recommendation" recType="Promoted" name="XMAS2017_WinterWonderland_MysteryBoxPromo" />
	</XMAS2017_RecommendMysteryBoxPromo_Start>
	<GoToRigellianChristmasToyWorkshop parallel="true">
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="RigellianChristmasToyWorkshop" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="RigellianChristmasToyWorkshop" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="RigellianChristmasToyWorkshop" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoToRigellianChristmasToyWorkshop>
	<GoToChristmasCabin parallel="true">
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="ChristmasCabin" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="ChristmasCabin" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="ChristmasCabin" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoToChristmasCabin>
	<GoToGingerbreadHouseDeco parallel="true">
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="GingerbreadHouseDeco" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="GingerbreadHouseDeco" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="GingerbreadHouseDeco" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoToGingerbreadHouseDeco>
	<GoToSnowpersonSecurityGuard parallel="true">
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="SnowpersonSecurityGuard" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="SnowpersonSecurityGuard" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="SnowpersonSecurityGuard" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoToSnowpersonSecurityGuard>
	<GoToGingerbreadSimpsonsHouse parallel="true">
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="GingerbreadSimpsonsHouse" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="GingerbreadSimpsonsHouse" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="GingerbreadSimpsonsHouse" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoToGingerbreadSimpsonsHouse>
	<GoToElfDayCareDoor parallel="true">
		<Action type="if">
			<If>
				<Requirement type="land" land="Springfield" not="true" />
				<Then>
					<Action type="gotoland" land="Springfield" showPopup="true" />
				</Then>
			</If>
			<ElseIf>
				<Requirement type="building" building="ElfDayCareDoor" not="true" />
				<Then>
					<Action type="focusOnMenuItem" itemName="ElfDayCareDoor" inventory="true" />
				</Then>
			</ElseIf>
			<Else>
				<Then>
					<Action type="pantoobject" time="0" building="ElfDayCareDoor" fakeTouch="false" />
				</Then>
			</Else>
		</Action>
	</GoToElfDayCareDoor>
	<StoreNotification_SantaSled>
		<Action type="checkRequirements">
			<Requirement type="building" building="SantasPlaneSled" />
			<False>
				<Action type="notification" title="BLD_SantasPlaneSled_name" text="UI_SantasPlaneSled_notification" icon="SantasPlaneSled_Menu" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="SantasPlaneSled" menuCategory="XMAS2017" />
			</False>
		</Action>
	</StoreNotification_SantaSled>
	<StoreNotification_SnakeWithRudolph>
		<Action type="checkRequirements">
			<Requirement type="building" building="SnakeWithRudolph" />
			<False>
				<Action type="notification" title="BLD_SnakeEatingRudolph_name" text="UI_SnakeWithRudolph_notification" icon="SnakeWithRudolph_Menu" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="SnakeWithRudolph" menuCategory="XMAS2017" />
			</False>
		</Action>
	</StoreNotification_SnakeWithRudolph>
	<StoreNotification_EskiMoes>
		<Action type="checkRequirements">
			<Requirement type="building" building="EskiMoes" />
			<False>
				<Action type="notification" title="BLD_EskiMoes_name" text="UI_EskiMoes_notification" icon="EskiMoes_Menu" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="EskiMoes" menuCategory="XMAS2017" />
			</False>
		</Action>
	</StoreNotification_EskiMoes>
	<StoreNotification_PeakInn>
		<Action type="checkRequirements">
			<Requirement type="building" building="ThePeakInn" />
			<False>
				<Action type="notification" title="UI_ThePeakInnLyla_title" text="UI_ThePeakInn_notification" icon="ICO_PRIZ_XMAS2017_PeakInnLyla_LG" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="ThePeakInn" menuCategory="XMAS2017" />
			</False>
		</Action>
	</StoreNotification_PeakInn>
	<StoreNotification_ChineseRestaurant>
		<Action type="checkRequirements">
			<Requirement type="building" building="ChineseRestaurant" />
			<False>
				<Action type="notification" title="BLD_ChineseRestaurant_name" text="UI_ChineseRestaurant_notification" icon="ChineseRestaurant_Menu" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="ChineseRestaurant" menuCategory="XMAS2017" />
			</False>
		</Action>
	</StoreNotification_ChineseRestaurant>
	<StoreNotification_XMASTreeRalph>
		<Action type="checkRequirements">
			<Requirement type="consumable" name="ChristmasTreeRalph" />
			<False>
				<Action type="notification" title="CON_ChristmasTreeRalph_name" text="UI_ChristmasTreeRalph_notification" icon="CharacterSets_Ralph_ChristmasTree" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="ChristmasTreeRalph" menuCategory="XMAS2017" />
			</False>
		</Action>
	</StoreNotification_XMASTreeRalph>
	<StoreNotification_Shiva>
		<Action type="checkRequirements">
			<Requirement type="character" name="Shiva" />
			<False>
				<Action type="notification" title="CHA_Shiva_name" text="UI_Shiva_notification" icon="ICO_PRIZ_XMAS2017_Shiva_LG" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="Shiva" menuCategory="XMAS2017" />
			</False>
		</Action>
	</StoreNotification_Shiva>
	<StoreNotification_StableInn>
		<Action type="checkRequirements">
			<Requirement type="building" building="StableInn" />
			<False>
				<Action type="notification" title="BLD_TheStableAtTheInn_name" text="UI_StableInn_notification" icon="InnStable_Menu" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="StableInn" menuCategory="XMAS2017" />
			</False>
		</Action>
	</StoreNotification_StableInn>
	<StoreNotification_TireFireplaceBundle>
		<Action type="checkRequirements">
			<Requirement type="conditional" logic="OR">
				<Requirement type="consumable" name="TireFireplace" />
				<Requirement type="consumable" name="XMAS2017_TireFirePlaceBundle" />
			</Requirement>
			<False>
				<Action type="notification" title="CON_TireFireplace_name" text="UI_TireFireplace_notification" icon="TireYardFire_Fireplace_Menu" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="TireFireplace" menuCategory="XMAS2017" />
			</False>
		</Action>
	</StoreNotification_TireFireplaceBundle>
	<StoreNotification_KrustyOnIce>
		<Action type="checkRequirements">
			<Requirement type="building" building="KrustysKristmasOnIce" />
			<False>
				<Action type="notification" title="BLD_KrustysKristmasOnIce_name" text="UI_KrustysKristmasOnIce_notification" icon="KrustyKristmasOnIce_Menu" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="KrustysKristmasOnIce" menuCategory="XMAS2017" />
			</False>
		</Action>
	</StoreNotification_KrustyOnIce>
	<StoreNotification_KrustofskyTempleBundle>
		<Action type="checkRequirements">
			<Requirement type="building" building="TempleBethSpringfield" />
			<False>
				<Action type="notification" title="BLD_TempleBethSpringfield_name" text="UI_TempleBethSpringfield_notification" icon="ICO_PRIZ_XMAS2017_RabbiKrustovski_LG" button="UI_OK" />
				<Action type="focusOnMenuItem" itemName="TempleBethSpringfield" menuCategory="XMAS2017" />
			</False>
		</Action>
	</StoreNotification_KrustofskyTempleBundle>
	<StoreNotification_LastChance>
		<Action type="notification" title="UI_LastChance_name" text="UI_LastChance_notification" icon="ICO_STOR_Single_XMAS2017_Event" button="UI_OK" />
		<Action type="focusOnMenuItem" menuCategory="XMAS2017" />
	</StoreNotification_LastChance>
	<StoreNotification_HolidayBazaar>
		<Action type="notification" title="UI_Bazaar_name" text="UI_Bazaar_notification" icon="ICO_STOR_Single_XMAS2017_HolidayBazaar" button="UI_OK" />
	</StoreNotification_HolidayBazaar>
	<PanToKwikEMart>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="building" building="Kwik-E-Mart" />
						<Then>
							<Action type="pantoobject" time="0" building="Kwik-E-Mart" fakeTouch="false" fakeTouchAvoidsIndicators="true" />
						</Then>
					</If>
					<ElseIf>
						<Requirement type="building" building="Kwik-E-MartFranchise" />
						<Then>
							<Action type="pantoobject" time="0" building="Kwik-E-MartFranchise" fakeTouch="false" fakeTouchAvoidsIndicators="true" />
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="building owned" building="Kwik-E-Mart" />
						<Then>
							<Action type="focusOnMenuItem" itemName="Kwik-E-Mart" inventory="true" />
						</Then>
					</ElseIf>
					<ElseIf>
						<Requirement type="building owned" building="Kwik-E-MartFranchise" />
						<Then>
							<Action type="focusOnMenuItem" itemName="Kwik-E-MartFranchise" inventory="true" />
						</Then>
					</ElseIf>
				</Action>
			</True>
			<False>
				<Action type="gotoState" state="GameState_InGame" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</PanToKwikEMart>
	<KwikEMart_Tapped>
		<Action type="updateVariable" variable="XMAS2017_HolidayScratcher_ObjSeen" value="1" />
	</KwikEMart_Tapped>
	<GoTo_GautamaBuddha>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="GautamaBuddha" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="GautamaBuddha" inventory="true" />
					</True>
					<False>
						<Action type="checkRequirements">
							<Requirement type="character" name="GautamaBuddha" />
							<True>
								<Action type="pantoobject" character="GautamaBuddha" fakeTouch="true" />
							</True>
							<False>
								<Action type="runScript" script="XMAS2017_Scripts:Tab_PrizeTrack" />
							</False>
						</Action>
					</False>
				</Action>
			</True>
			<False>
				<Action type="gotoState" state="GameState_InGame" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_GautamaBuddha>
	<GoTo_RigellianConstructionSite>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirements>
						<Requirement type="item" item="RigellianConstructionSite" checkInventoryOnly="true" />
					</Requirements>
					<True>
						<Action type="focusOnMenuItem" itemName="RigellianConstructionSite" inventory="true" />
					</True>
					<False>
						<Action type="updateVariable" variable="XMAS2017_EventHubTabValue" value="0" />
						<Action type="gotoState" state="GameState_HubPrizeTrack" forceState="true">
							<Extras>
								<Attribute name="helpButtonScript" value="XMAS2017_Scripts:GuidePanel_Event" />
								<Attribute name="specialEvent" value="XMAS2017_Event" />
								<Attribute name="prizeListIndex" value="0" />
								<Attribute name="selectPrize" value="5" />
								<Attribute name="exitButtonScript" value="MiscScripts:GoToInGame" />
							</Extras>
						</Action>
						<Action type="markBadgeViewed" badgeName="XMAS2017_PrizeTrackBadge" />
					</False>
				</Action>
			</True>
			<False>
				<Action type="gotoState" state="GameState_InGame" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoTo_RigellianConstructionSite>
	<JesusCarpentryShop_Tapped>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="if">
					<If>
						<Requirement type="reqList" location="XMAS2017_Requirements:Crafting_Unlocked" />
						<Then>
							<Action type="runScript" script="XMAS2017_Scripts:Tab_Crafting" />
						</Then>
					</If>
				</Action>
			</True>
			<False>
				<Action type="gotoState" state="GameState_InGame" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</JesusCarpentryShop_Tapped>
	<RigellianQueen_Festive_Inventory>
		<Action type="notification" title="CON_RigellianQueen_Festive_name" button="UI_OK" text="UI_ItemsInInventory" icon="ICO_STOR_Single_XMAS2017_RigellianQueenFestiveFacade" />
		<Action type="focusOnMenuItem" itemName="RigellianQueen" inventory="true" menuCategory="Inventory" />
	</RigellianQueen_Festive_Inventory>
	<NoIceRiverTiles>
		<Action type="message" title="UI_IceRiver" text="UI_IceRiverMessage" />
	</NoIceRiverTiles>
	<GoToBalderdashingAllTheWay_7>
		<Action type="gotoState" state="GameState_InGame" forceState="true" waitForState="true" />
		<Action type="gotoState" state="GameState_QuestProgress" forceState="true">
			<Extras>
				<Attribute name="questNameToShow" value="BalderdashingAllTheWay_7" />
			</Extras>
		</Action>
	</GoToBalderdashingAllTheWay_7>
	<NorthPoleStationBundleReward>
		<Action type="reward">
			<Item type="building" name="NorthPoleStation" useImmediately="true" />
		</Action>
		<Action type="reward">
			<Item type="building" name="NorthPoleMonorailExtension" useImmediately="true" />
		</Action>
		<Action type="reward">
			<Item type="building" name="NorthPoleMonorailExtension2" useImmediately="true" />
		</Action>
		<Action type="reward">
			<Item type="building" name="NorthPoleMonorailExtension3" useImmediately="true" />
		</Action>
		<Action type="reward">
			<Item type="building" name="NorthPoleMonorailExtension4" useImmediately="true" />
		</Action>
	</NorthPoleStationBundleReward>
	<GingerbreadSimpsonsHouse_Tapped parallel="true">
		<Action type="sound" sound="GingerbreadSimpsonsHouse_Tap" />
		<Action type="delay" time="0.5" />
		<Action type="anim-play" animation="Tap" nowait="true" />
	</GingerbreadSimpsonsHouse_Tapped>
	<GoToReGiftingMachine>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="item" item="ReGiftingMachine" checkInventoryOnly="true" />
					<True>
						<Action type="focusOnMenuItem" menuCategory="Buildings" itemName="ReGiftingMachine" inventory="true" />
					</True>
					<False>
						<Action type="focusOnMenuItem" menuCategory="XMAS2017" itemName="ReGiftingMachine" />
					</False>
				</Action>
			</True>
			<False>
				<Action type="returnToInGameState" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoToReGiftingMachine>
	<GoToJesusCarpentryShop>
		<Action type="checkRequirements">
			<Requirement type="land" land="Springfield" />
			<True>
				<Action type="checkRequirements">
					<Requirement type="item" item="JesusCarpentryShop" checkInventoryOnly="true" />
					<True>
						<Action type="focusOnMenuItem" menuCategory="Buildings" itemName="JesusCarpentryShop" inventory="true" />
					</True>
					<False>
						<Action type="focusOnMenuItem" menuCategory="XMAS2017" itemName="JesusCarpentryShop" />
					</False>
				</Action>
			</True>
			<False>
				<Action type="returnToInGameState" />
				<Action type="pantoobject" building="KrustylandShuttleToSpringfield" fakeTouch="true" />
			</False>
		</Action>
	</GoToJesusCarpentryShop>
	<CountIceRoadRewards>
		<Action type="setVariable" intVariable="XMAS2017_IceRoadRewardCount" intValue="(XMAS2017_Act1_IceRoadStraight_From_Box + XMAS2017_Act1_IceRoadStraight_From_Box2 + XMAS2017_Act1_IceRoadStraight_From_Box3 + XMAS2017_Act1_IceRoadStraight_From_Box4 + XMAS2017_Act2_IceRoadStraight_From_Box + XMAS2017_Act2_IceRoadStraight_From_Box2 + XMAS2017_Act2_IceRoadStraight_From_Box3 + XMAS2017_Act2_IceRoadStraight_From_Box4) * 5" asExpression="true" />
	</CountIceRoadRewards>
	<GrantDestroyedSpaceshipSkin>
		<Action type="message" text="UI_XMAS2017_BossComplete_text" />
		<Action type="reward">
			<Item type="consumable" name="DestroyedRigellianSpaceship" useImmediately="true" />
		</Action>
	</GrantDestroyedSpaceshipSkin>
	<SpaceshipSkinChanged>
		<Action type="checkRequirements">
			<Requirement type="building" building="RigellianChristmasSpaceship" skin="RigellianChristmasSpaceshipDestroyed" />
			<True>
				<Action type="setObjectVariable" variable="Destroyed" value="1" onType="building" onObject="RigellianChristmasSpaceship" />
			</True>
			<False>
				<Action type="setObjectVariable" variable="Destroyed" value="0" onType="building" onObject="RigellianChristmasSpaceship" />
			</False>
		</Action>
	</SpaceshipSkinChanged>
	<DisplayEventCompleteMessage>
		<Action type="message" text="UI_XMAS2017_EventComplete_text" />
	</DisplayEventCompleteMessage>
</ScriptPackage>